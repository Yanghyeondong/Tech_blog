{"componentChunkName":"component---src-templates-post-template-tsx","path":"/os_hw_3/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p><em>í•´ë‹¹ í¬ìŠ¤íŠ¸ëŠ” í•„ìê°€ ì§ì ‘ í’€ì´í•œ ê²ƒìœ¼ë¡œ ì˜¤ë‹µì´ë‚˜ ì˜ëª»ëœ í•´ì„ì´ ìˆì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</em><br>\n<em>í˜¹ì‹œë‚˜ ì§€ì í•  ë¶€ë¶„ì´ ìˆë‹¤ë©´ í•­ìƒ í™˜ì˜ì…ë‹ˆë‹¤!</em> ğŸ˜</p>\n<h2 id=\"ë¬¸ì œ-ë°-í’€ì´\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%EB%B0%8F-%ED%92%80%EC%9D%B4\" aria-label=\"ë¬¸ì œ ë° í’€ì´ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë¬¸ì œ ë° í’€ì´</h2>\n<h4 id=\"1-for-timing-youll-need-to-use-a-timer-eg-gettimeofday-how-precise-is-such-a-timer-how-long-does-an-operation-have-to-take-in-order-for-you-to-time-it-precisely-this-will-help-determine-how-many-times-in-a-loop-youll-have-to-repeat-a-page-access-in-order-to-time-it-successfully\" style=\"position:relative;\"><a href=\"#1-for-timing-youll-need-to-use-a-timer-eg-gettimeofday-how-precise-is-such-a-timer-how-long-does-an-operation-have-to-take-in-order-for-you-to-time-it-precisely-this-will-help-determine-how-many-times-in-a-loop-youll-have-to-repeat-a-page-access-in-order-to-time-it-successfully\" aria-label=\"1 for timing youll need to use a timer eg gettimeofday how precise is such a timer how long does an operation have to take in order for you to time it precisely this will help determine how many times in a loop youll have to repeat a page access in order to time it successfully permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. For timing, youâ€™ll need to use a timer (e.g., gettimeofday()). How precise is such a timer? How long does an operation have to take in order for you to time it precisely? (this will help determine how many times, in a loop, youâ€™ll have to repeat a page access in order to time it successfully)</h4>\n<p>gettimeofday() í•¨ìˆ˜ëŠ” ë§ˆì´í¬ë¡œ ì´ˆë‹¨ìœ„ê¹Œì§€ ì‹œê°„ì„ ì´ ìˆ˜ ìˆë‹¤. ë§Œì•½ ì´ì²˜ëŸ¼ ë§ˆì´í¬ë¡œ ì´ˆ ë‹¨ìœ„ë¥¼ ì‚¬ìš©í•  ê²½ìš°, ë‚˜ë…¸ ì´ˆ ì‘ì—…ì„ êµ¬ë³„í•˜ê¸° ìœ„í•´ì„œëŠ” ìµœì†Œ 1000ë²ˆ ì •ë„ ì‘ì—…ì„ ë°˜ë³µí•´ì•¼ í•œë‹¤. ì´ë•Œ, clock_gettime\r\n<code class=\"language-text\">(clockid_t clk_id, struct timespec *tp)</code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ê²½ìš° ë‚˜ë…¸ ì´ˆê¹Œì§€ ì •ë°€í•œ ì‹œê°„ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">struct</span> <span class=\"token class-name\">timespec</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token class-name\">time_t</span>   tv_sec<span class=\"token punctuation\">;</span>        <span class=\"token comment\">/* seconds */</span>\r\n        <span class=\"token keyword\">long</span>     tv_nsec<span class=\"token punctuation\">;</span>       <span class=\"token comment\">/* nanoseconds */</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>(ì¶œì²˜:<a href=\"https://linux.die.net/man/3/clock_gettime\" target=\"_blank\" rel=\"nofollow\">https://linux.die.net/man/3/clock_gettime</a>)\r\nì—¬ê¸°ì„œ clk_idì˜ ê²½ìš° CLOCK_REALTIME, CLOCK_MONOTONIC, CLOCK_PROCESS_CPUTIME_ID ë“±ì´ ì¡´ì¬í•œë‹¤. ë³¸ ë¦¬í¬íŠ¸ì—ì„œëŠ” ê·¸ ì¤‘ì—ì„œ â€œHigh-resolution per-process timer from the CPUâ€ë¡œ ì„¤ëª…ë˜ì–´ ìˆëŠ” CLOCK_PROCESS_CPUTIME_IDë¥¼ ì‚¬ìš©í•œë‹¤.</p>\n<h4 id=\"2-write-the-program-called-tlbc-that-can-roughly-measure-the-cost-of-accessing-each-page-inputs-to-the-program-should-be-the-number-of-pages-to-touch-and-the-number-of-trials\" style=\"position:relative;\"><a href=\"#2-write-the-program-called-tlbc-that-can-roughly-measure-the-cost-of-accessing-each-page-inputs-to-the-program-should-be-the-number-of-pages-to-touch-and-the-number-of-trials\" aria-label=\"2 write the program called tlbc that can roughly measure the cost of accessing each page inputs to the program should be the number of pages to touch and the number of trials permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Write the program, called tlb.c, that can roughly measure the cost of accessing each page. Inputs to the program should be: the number of pages to touch and the number of trials.</h4>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\r\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\r\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;unistd.h></span></span>\r\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;time.h></span></span>\r\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;math.h></span></span>\r\n\r\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> argc<span class=\"token punctuation\">,</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>argv<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">int</span> n_pages <span class=\"token operator\">=</span> <span class=\"token function\">atoi</span><span class=\"token punctuation\">(</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">int</span> n_trials <span class=\"token operator\">=</span> <span class=\"token function\">atoi</span><span class=\"token punctuation\">(</span>argv<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">int</span> pagesize <span class=\"token operator\">=</span> <span class=\"token function\">sysconf</span><span class=\"token punctuation\">(</span>_SC_PAGESIZE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token comment\">// printf(\"page size: %d\\n\", pagesize);</span>\r\n  <span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>arr <span class=\"token operator\">=</span> <span class=\"token function\">calloc</span><span class=\"token punctuation\">(</span>n_pages<span class=\"token punctuation\">,</span> pagesize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">struct</span> <span class=\"token class-name\">timespec</span> start<span class=\"token punctuation\">,</span> end<span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">int</span> jump <span class=\"token operator\">=</span> pagesize <span class=\"token operator\">/</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token function\">clock_gettime</span><span class=\"token punctuation\">(</span>CLOCK_PROCESS_CPUTIME_ID<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>start<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> n_trials<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> n_pages <span class=\"token operator\">*</span> jump<span class=\"token punctuation\">;</span> j <span class=\"token operator\">+=</span> jump<span class=\"token punctuation\">)</span>\r\n      arr<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token punctuation\">}</span>\r\n  <span class=\"token function\">clock_gettime</span><span class=\"token punctuation\">(</span>CLOCK_PROCESS_CPUTIME_ID<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>end<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token keyword\">long</span> timesum <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>end<span class=\"token punctuation\">.</span>tv_sec <span class=\"token operator\">-</span> start<span class=\"token punctuation\">.</span>tv_sec<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token function\">pow</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> end<span class=\"token punctuation\">.</span>tv_nsec <span class=\"token operator\">-</span> start<span class=\"token punctuation\">.</span>tv_nsec<span class=\"token punctuation\">;</span>\r\n\r\n  <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%f\\n\"</span><span class=\"token punctuation\">,</span>  <span class=\"token punctuation\">(</span><span class=\"token keyword\">double</span><span class=\"token punctuation\">)</span>timesum <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>n_trials <span class=\"token operator\">*</span> n_pages<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token function\">free</span><span class=\"token punctuation\">(</span>arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ìœ„ì˜ í•¨ìˆ˜ëŠ” pageì˜ ê°œìˆ˜ì™€ trialsì˜ íšŸìˆ˜ë¥¼ ì¸ìë¡œ ì „ë‹¬ë°›ìœ¼ë©°, callocì„ í†µí•´ page ì‚¬ì´ì¦ˆì™€ page ê°œìˆ˜ì˜ ê³±ë§Œí¼ ë°°ì—´ì„ í• ë‹¹í•œë‹¤. ì´í›„ ì¤‘ì²© ë°˜ë³µë¬¸ì„ í†µí•´ ë°°ì—´ì— ì ‘ê·¼í•˜ì—¬ ê°’ì„ ìˆ˜ì •í•œë‹¤. ìµœì¢…ì ìœ¼ë¡œëŠ” ê±¸ë¦° ì‹œê°„ì— trials ì™€ page ìˆ˜ë¥¼ ë‚˜ëˆ„ì–´ ì¤Œìœ¼ë¡œì„œ ê°œë³„ ì ‘ê·¼ ì‹œê°„ì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>\n<h4 id=\"3-now-write-a-script-in-your-favorite-scripting-language-bash-to-run-this-program-while-varying-the-number-of-pages-accessed-from-1-up-to-a-few-thousand-perhaps-incrementing-by-a-factor-of-two-per-iteration-run-the-script-on-different-machines-and-gather-some-data\" style=\"position:relative;\"><a href=\"#3-now-write-a-script-in-your-favorite-scripting-language-bash-to-run-this-program-while-varying-the-number-of-pages-accessed-from-1-up-to-a-few-thousand-perhaps-incrementing-by-a-factor-of-two-per-iteration-run-the-script-on-different-machines-and-gather-some-data\" aria-label=\"3 now write a script in your favorite scripting language bash to run this program while varying the number of pages accessed from 1 up to a few thousand perhaps incrementing by a factor of two per iteration run the script on different machines and gather some data permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Now write a script in your favorite scripting language (bash?) to run this program, while varying the number of pages accessed from 1 up to a few thousand, perhaps incrementing by a factor of two per iteration. Run the script on different machines and gather some data.</h4>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">#<span class=\"token operator\">!</span><span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>sh\r\ntarget<span class=\"token operator\">=</span><span class=\"token string\">\"tlb.c\"</span>\r\noutput<span class=\"token operator\">=</span><span class=\"token string\">\"./tlb\"</span>\r\n\r\ngcc <span class=\"token operator\">-</span>g <span class=\"token operator\">-</span>o $output $target\r\n\r\n<span class=\"token keyword\">for</span> var in <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">4</span> <span class=\"token number\">8</span> <span class=\"token number\">16</span> <span class=\"token number\">32</span> <span class=\"token number\">64</span> <span class=\"token number\">128</span> <span class=\"token number\">256</span> <span class=\"token number\">512</span> <span class=\"token number\">1024</span> <span class=\"token number\">2048</span> <span class=\"token number\">4096</span> <span class=\"token number\">8192</span>\r\n<span class=\"token keyword\">do</span>\r\n    tlb $<span class=\"token punctuation\">{</span>var<span class=\"token punctuation\">}</span> <span class=\"token number\">20000</span>\r\ndone</code></pre></div>\n<p>ì™¸ë¶€ ì„œë²„:</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token number\">2019312219</span>@swji<span class=\"token operator\">:</span><span class=\"token operator\">~</span><span class=\"token operator\">/</span>hw<span class=\"token operator\">/</span><span class=\"token number\">3</span>$ test<span class=\"token punctuation\">.</span>sh\r\n<span class=\"token number\">4.079250</span>\r\n<span class=\"token number\">3.695925</span>\r\n<span class=\"token number\">4.238037</span>\r\n<span class=\"token number\">3.679025</span>\r\n<span class=\"token number\">8.597144</span>\r\n<span class=\"token number\">15.431428</span>\r\n<span class=\"token number\">16.706047</span>\r\n<span class=\"token number\">15.680921</span>\r\n<span class=\"token number\">15.823412</span>\r\n<span class=\"token number\">16.253341</span>\r\n<span class=\"token number\">16.088938</span>\r\n<span class=\"token number\">11.811327</span>\r\n<span class=\"token number\">16.236492</span>\r\n<span class=\"token number\">25.697800</span></code></pre></div>\n<p>ê°œì¸ ë°ìŠ¤í¬í†± wsl2 ìš°ë¶„íˆ¬:</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">hdyang@DESKTOP<span class=\"token operator\">-</span>EU17S6T<span class=\"token operator\">:</span><span class=\"token operator\">~</span><span class=\"token operator\">/</span>os_hw3$ <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>test<span class=\"token punctuation\">.</span>sh\r\n<span class=\"token number\">1.555</span>\r\n<span class=\"token number\">2.5325</span>\r\n<span class=\"token number\">2.59875</span>\r\n<span class=\"token number\">2.41125</span>\r\n<span class=\"token number\">4.24625</span>\r\n<span class=\"token number\">4.912344</span>\r\n<span class=\"token number\">4.704766</span>\r\n<span class=\"token number\">4.933438</span>\r\n<span class=\"token number\">4.583887</span>\r\n<span class=\"token number\">4.734736</span>\r\n<span class=\"token number\">4.821323</span>\r\n<span class=\"token number\">4.603918</span>\r\n<span class=\"token number\">3.763282</span>\r\n<span class=\"token number\">3.787769</span>\r\nHow many trials are needed to get reliable measurements<span class=\"token operator\">?</span></code></pre></div>\n<p>20000íšŒ ì •ë„ë¡œ trialsë¥¼ ì„¤ì •í•˜ë‹ˆ ì‹¤í–‰ì‹œë§ˆë‹¤ í° ê¸°ë³µ ì—†ì´ ì˜ ë‚˜íƒ€ë‚¬ë‹¤.</p>\n<h4 id=\"4-next-graph-the-results-making-a-graph-that-looks-similar-to-the-one-above-use-a-good-tool-like-ploticus-or-even-zplot-visualization-usually-makes-the-data-much-easier-to-digest-why-do-you-think-that-is\" style=\"position:relative;\"><a href=\"#4-next-graph-the-results-making-a-graph-that-looks-similar-to-the-one-above-use-a-good-tool-like-ploticus-or-even-zplot-visualization-usually-makes-the-data-much-easier-to-digest-why-do-you-think-that-is\" aria-label=\"4 next graph the results making a graph that looks similar to the one above use a good tool like ploticus or even zplot visualization usually makes the data much easier to digest why do you think that is permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Next, graph the results, making a graph that looks similar to the one above. Use a good tool like ploticus or even zplot. Visualization usually makes the data much easier to digest; why do you think that is?</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9b2461610b70ec406c094ee61e209e00/fe70a/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.77083333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAADK/AAAyvwF6t4D2AAABOElEQVQoz31Si27kMAj0/3/q9qpL4vgB2Mxp2LjKbtuzNAL8GAZMmnM6APhz4Q4uEcG+78g5o/eO6+6vSHNOmJnT/nTBzNBaCzJV/ZUIl4BEWVShqkE6xngB91aydW5xNm93BsSeSCyl1vr1+G4XfA64z3joJJ8DuGKe0/97CpoOpG3bXggX7nFuirMbug5UMRx1xcaOIjfD0Z5+YsNJ+FrGxLwIP46OvUiQbkWwV434bIbPzDPFZ5Z4Q/WJTWfD57CQvkDCP1lC1dqLci/LmCK2oi+V8VOCPbJ2C/m0JCvd4vf+1w6W+U7oqubb2fyoEtiLeOnqPodzpIgxRuAeL3/FnOnE6WEJq+T40TlgphDRmD22hLPIXq+ZpF9KwXEcOM8zLPeTiEQGfcM9c87ZH4+H11q/KXvHP6tMYVReHIk8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/9b2461610b70ec406c094ee61e209e00/a59e9/1.webp 192w,\n/static/9b2461610b70ec406c094ee61e209e00/0ca9f/1.webp 384w,\n/static/9b2461610b70ec406c094ee61e209e00/dc9b9/1.webp 768w,\n/static/9b2461610b70ec406c094ee61e209e00/b10c1/1.webp 1122w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/9b2461610b70ec406c094ee61e209e00/3b721/1.png 192w,\n/static/9b2461610b70ec406c094ee61e209e00/66595/1.png 384w,\n/static/9b2461610b70ec406c094ee61e209e00/fe486/1.png 768w,\n/static/9b2461610b70ec406c094ee61e209e00/fe70a/1.png 1122w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/9b2461610b70ec406c094ee61e209e00/fe486/1.png\"\n            alt=\"1\"\n            title=\"1\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/827368c6b033dba83b83cdefe2cccca4/efaae/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.77083333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAADLAAAAywAEoZFrbAAABJElEQVQoz41TWY7FIAzj/led7tAFCPHIKfQxnZ+HZAVobGJInYioqkLvgVIKOI7jwDAMWNcV0zRhnmd47zGOI5ZlsRzmVi4a19VN7T9wpJTgQzDhfd9NOARvotzj6DmN56hEcs5ZRQQNrVIpTNRubkooRVBEoKX84TieFmO0BSEtisCfCcMWMfoPBn9ZnALnEWOISFmgevMc74OWbusFIKAIZzISK8hd5Tl/5kRMgp/tPuSIArdtm90JBfcrYzsSjpgxVzGz1lX9Xv+zXO8P6x6x7MlE5xpRX+5bUNyRdMZbkHa1fuhtfYunbd5WnhO7CvVV7btlGkyQlpv1FvnyxHVdFnnPDed5Pv3JvgwhWOS+a/32PqmvhIn8Qxj7B7lfPT/g+hf5JWD4MYjTogAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/827368c6b033dba83b83cdefe2cccca4/a59e9/2.webp 192w,\n/static/827368c6b033dba83b83cdefe2cccca4/0ca9f/2.webp 384w,\n/static/827368c6b033dba83b83cdefe2cccca4/dc9b9/2.webp 768w,\n/static/827368c6b033dba83b83cdefe2cccca4/ea298/2.webp 1119w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/827368c6b033dba83b83cdefe2cccca4/3b721/2.png 192w,\n/static/827368c6b033dba83b83cdefe2cccca4/66595/2.png 384w,\n/static/827368c6b033dba83b83cdefe2cccca4/fe486/2.png 768w,\n/static/827368c6b033dba83b83cdefe2cccca4/efaae/2.png 1119w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/827368c6b033dba83b83cdefe2cccca4/fe486/2.png\"\n            alt=\"2\"\n            title=\"2\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\r\nê·¸ë˜í”„ë¥¼ í™•ì¸í•´ ë³´ë©´ ì™¸ë¶€ ì„œë²„ëŠ” í˜ì´ì§€ì˜ ë„˜ë²„ê°€ 8ì„ ë„˜ì–´ê°€ëŠ” êµ¬ê°„ë¶€í„° ì‹œê°„ì´ ì¦ê°€í•˜ëŠ” ëª¨ìŠµì„ ë³´ì´ë©°, ì´í›„ë¡œëŠ” ë‹¤ì‹œ ì¼ì • ì‹œê°„ì„ ìœ ì§€í•˜ë‹¤ê°€ 8192ê°€ ë˜ëŠ” ìˆœê°„ì— ë‹¤ì‹œ ì‹œê°„ì´ ì¦ê°€í•˜ëŠ” ëª¨ìŠµì„ ë³´ì¸ë‹¤. ì²«ë²ˆì§¸ ì¦ê°€êµ¬ê°„ì„ í†µí•´ first-level TLB ëŠ” ëŒ€ëµ 8ê°œ ì •ë„ì˜ í˜ì´ì§€ë¥¼ ë‹´ì„ ìˆ˜ ìˆëŠ” ê²ƒìœ¼ë¡œ ì˜ˆìƒë˜ë©°, ë‘ë²ˆì§¸ ì¦ê°€êµ¬ê°„ì„ í†µí•´ second-level TLB ê¹Œì§€ ì¡´ì¬í•  ê²ƒìœ¼ë¡œ ì˜ˆì¸¡ëœë‹¤.\r\nê°œì¸ ë°ìŠ¤í¬í†±ì˜ ìš°ë¶„íˆ¬ì˜ ê²½ìš° í˜ì´ì§€ì˜ ë„˜ë²„ê°€ 8ì„ ë„˜ì–´ê°€ëŠ” êµ¬ê°„ë¶€í„° ì‹œê°„ì´ ì¦ê°€í•˜ëŠ” ëª¨ìŠµì„ ë³´ì´ë©°, ì´í›„ë¡œëŠ” ë‹¤ì‹œ ì¼ì • ì‹œê°„ì„ ìœ ì§€í•˜ê²Œ ëœë‹¤. ì²«ë²ˆì§¸ ì¦ê°€êµ¬ê°„ì„ í†µí•´ first-level TLB ëŠ” ëŒ€ëµ 8ê°œ ì •ë„ì˜ í˜ì´ì§€ë¥¼ ë‹´ì„ ìˆ˜ ìˆëŠ” ê²ƒìœ¼ë¡œ ì˜ˆìƒë˜ë©°, second-level TLBì˜ ê²½ìš° í…ŒìŠ¤íŠ¸í•˜ëŠ” í˜ì´ì§€ì˜ ìˆ˜ë¥¼ ì¡°ê¸ˆ ë” ëŠ˜ë ¤ë³´ì•„ì•¼ì§€ ê·¸ ìœ ë¬´ì™€ í¬ê¸°ë¥¼ ì•Œ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.\r\nì´ì²˜ëŸ¼ ê·¸ë˜í”„ë¥¼ í†µí•´ ì‹œê°í™”ë¥¼ í•´ë³´ë‹ˆ TLBì˜ ì‹¤ì œ ì‘ë™ ê³¼ì •ì„ ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìˆì—ˆë‹¤.</p>\n<h4 id=\"5-one-thing-to-watch-out-for-is-compiler-optimization-compilers-do-all-sorts-of-clever-things-including-removing-loops-which-increment-values-that-no-other-part-of-the-program-subsequently-uses-how-can-you-ensure-the-compiler-does-not-remove-the-main-loop-above-from-your-tlb-size-estimator\" style=\"position:relative;\"><a href=\"#5-one-thing-to-watch-out-for-is-compiler-optimization-compilers-do-all-sorts-of-clever-things-including-removing-loops-which-increment-values-that-no-other-part-of-the-program-subsequently-uses-how-can-you-ensure-the-compiler-does-not-remove-the-main-loop-above-from-your-tlb-size-estimator\" aria-label=\"5 one thing to watch out for is compiler optimization compilers do all sorts of clever things including removing loops which increment values that no other part of the program subsequently uses how can you ensure the compiler does not remove the main loop above from your tlb size estimator permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. One thing to watch out for is compiler optimization. Compilers do all sorts of clever things, including removing loops which increment values that no other part of the program subsequently uses. How can you ensure the compiler does not remove the main loop above from your TLB size estimator?</h4>\n<p>ì´ì „ 3ë²ˆ ë¬¸í•­ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´, ë³¸ ë¦¬í¬íŠ¸ì—ì„œëŠ” ì»´íŒŒì¼ëŸ¬ë¡œ gccë¥¼ ì‚¬ìš©í•œë‹¤. gccë„ ì˜µì…˜ì„ í†µí•´ ìµœì í™”ë¥¼ ì§€ì›í•˜ë©°, -O1, -O2, -O3 ë“± ìµœì í™” ì •ë„ë„ ì„¤ì •ì´ ê°€ëŠ¥í•˜ë‹¤. ë‹¨, ì´ëŸ¬í•œ ì˜µì…˜ì´ ì—†ëŠ” ê²½ìš° gccëŠ” -O0 ë¡œ ì„¤ì •ë˜ëŠ”ë° ì´ëŠ” ê³§ ê¸°ë³¸ì (ë””í´íŠ¸ ì„¤ì •)ìœ¼ë¡œ ìµœì í™”ë¥¼ í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. ë”°ë¼ì„œ ì´ë²ˆ ì»´íŒŒì¼ì—ì„œëŠ” TLB size estimator ì˜ main loop ê°€ ì‚­ì œë˜ì§€ ì•Šì•˜ìŒì„ ì˜ˆìƒí•  ìˆ˜ ìˆë‹¤.</p>\n<h4 id=\"6-another-thing-to-watch-out-for-is-the-fact-that-most-systems-today-ship-with-multiple-cpus-and-each-cpu-of-course-has-its-own-tlb-hierarchy-to-really-get-good-measurements-you-have-to-run-your-code-on-just-one-cpu-instead-of-letting-the-scheduler-bounce-it-from-one-cpu-to-the-next\" style=\"position:relative;\"><a href=\"#6-another-thing-to-watch-out-for-is-the-fact-that-most-systems-today-ship-with-multiple-cpus-and-each-cpu-of-course-has-its-own-tlb-hierarchy-to-really-get-good-measurements-you-have-to-run-your-code-on-just-one-cpu-instead-of-letting-the-scheduler-bounce-it-from-one-cpu-to-the-next\" aria-label=\"6 another thing to watch out for is the fact that most systems today ship with multiple cpus and each cpu of course has its own tlb hierarchy to really get good measurements you have to run your code on just one cpu instead of letting the scheduler bounce it from one cpu to the next permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. Another thing to watch out for is the fact that most systems today ship with multiple CPUs, and each CPU, of course, has its own TLB hierarchy. To really get good measurements, you have to run your code on just one CPU, instead of letting the scheduler bounce it from one CPU to the next.</h4>\n<p>How can you do that? (hint: look up â€œpinning a threadâ€ on Google for some clues)<br>\n<code class=\"language-text\">pthread_setaffinity_np()</code> ì™€ ê°™ì€ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ CPU AFFINITYë¥¼ í†µí•´ í”„ë¡œì„¸ìŠ¤ê°€ ì§€ì •í•´ì¤€ cpuë§Œ ì‚¬ìš©í•˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤.(ì¶œì²˜:<a href=\"https://man7.org/linux/man\" target=\"_blank\" rel=\"nofollow\">https://man7.org/linux/man</a> pages/man3/pthread_setaffinity_np.3.html)<br>\nWhat will happen if you donâ€™t do this, and the code moves from one CPU to the other?<br>\në§Œì•½ í•´ë‹¹ ì½”ë“œê°€ cpuì—¬ëŸ¬ê°œë¡œ ë°”ê¾¸ì–´ ê°€ë©° ì‹¤í–‰ë  ê²½ìš°, TLB ë°ì´í„°ë¥¼ ìƒì–´ë²„ë¦´ ìˆ˜ ìˆê²Œ ë˜ë©°, ì´ë•Œë¬¸ì— ì ‘ê·¼ ì†ë„ê°€ ê¸°ì¡´ê³¼ ì°¨ì´ë‚  ê²ƒì´ë‹¤.</p>\n<h4 id=\"7-another-issue-that-might-arise-relates-to-initialization-if-you-dont-initialize-the-array-a-above-before-accessing-it-the-first-time-you-access-it-will-be-very-expensive-due-to-initial-access-costs-such-as-demand-zeroing-will-this-affect-your-code-and-its-timing-what-can-you-do-to-counterbalance-these-potential-costs\" style=\"position:relative;\"><a href=\"#7-another-issue-that-might-arise-relates-to-initialization-if-you-dont-initialize-the-array-a-above-before-accessing-it-the-first-time-you-access-it-will-be-very-expensive-due-to-initial-access-costs-such-as-demand-zeroing-will-this-affect-your-code-and-its-timing-what-can-you-do-to-counterbalance-these-potential-costs\" aria-label=\"7 another issue that might arise relates to initialization if you dont initialize the array a above before accessing it the first time you access it will be very expensive due to initial access costs such as demand zeroing will this affect your code and its timing what can you do to counterbalance these potential costs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. Another issue that might arise relates to initialization. If you donâ€™t initialize the array a above before accessing it, the first time you access it will be very expensive, due to initial access costs such as demand zeroing. Will this affect your code and its timing? What can you do to counterbalance these potential costs?</h4>\n<p>2ë²ˆì˜ ì½”ë“œì—ì„œ ë§Œì•½ <code class=\"language-text\">calloc()</code> ëŒ€ì‹  <code class=\"language-text\">malloc()</code>ì„ ì‚¬ìš©í•˜ì—¬ ì´ˆê¸°í™”ê°€ ë˜ì§€ ì•Šì€ ê²½ìš°ë©´, trial ê°’ì´ ì‘ì„ ë•Œ ex.100 ë‹¤ìŒ ê²°ê³¼ì™€ ê°™ì´ ê·¸ ì‹œê°„ì´ ë§ì´ ë‹¬ë¼ì§„ë‹¤. ì´ëŸ¬í•œ ì¼ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œëŠ” <code class=\"language-text\">calloc()</code>ê³¼ ê°™ì´ ì²˜ìŒë¶€í„° ì´ˆê¸°í™”ë¥¼ í•´ì£¼ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ <code class=\"language-text\">memset()</code> í•¨ìˆ˜ë¥¼ í†µí•´ ë”°ë¡œ ì´ˆê¸°í™”ë¥¼ í•´ì£¼ì–´ì•¼ í•œë‹¤.\r\ncalloc ì‚¬ìš©</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token number\">2019312219</span>@swji<span class=\"token operator\">:</span><span class=\"token operator\">~</span><span class=\"token operator\">/</span>hw<span class=\"token operator\">/</span><span class=\"token number\">3</span>$ test<span class=\"token punctuation\">.</span>sh\r\n<span class=\"token number\">20.900000</span>\r\n<span class=\"token number\">11.915000</span>\r\n<span class=\"token number\">7.730000</span>\r\n<span class=\"token number\">5.923750</span>\r\n<span class=\"token number\">14.147500</span>\r\n<span class=\"token number\">14.945625</span>\r\n<span class=\"token number\">18.063437</span>\r\n<span class=\"token number\">15.753750</span>\r\n<span class=\"token number\">15.848750</span>\r\n<span class=\"token number\">15.969219</span>\r\n<span class=\"token number\">15.754199</span>\r\n<span class=\"token number\">11.706255</span>\r\n<span class=\"token number\">13.535962</span>\r\n<span class=\"token number\">19.845601</span></code></pre></div>\n<p>malloc ì‚¬ìš©</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token number\">2019312219</span>@swji<span class=\"token operator\">:</span><span class=\"token operator\">~</span><span class=\"token operator\">/</span>hw<span class=\"token operator\">/</span><span class=\"token number\">3</span>$ test<span class=\"token punctuation\">.</span>sh\r\n<span class=\"token number\">19.460000</span>\r\n<span class=\"token number\">31.505000</span>\r\n<span class=\"token number\">30.497500</span>\r\n<span class=\"token number\">38.478750</span>\r\n<span class=\"token number\">47.331250</span>\r\n<span class=\"token number\">52.620312</span>\r\n<span class=\"token number\">48.623438</span>\r\n<span class=\"token number\">47.123125</span>\r\n<span class=\"token number\">52.791680</span>\r\n<span class=\"token number\">49.632383</span>\r\n<span class=\"token number\">49.840996</span>\r\n<span class=\"token number\">48.362427</span>\r\n<span class=\"token number\">47.301116</span>\r\n<span class=\"token number\">55.190599</span></code></pre></div>\n<h2 id=\"source\" style=\"position:relative;\"><a href=\"#source\" aria-label=\"source permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source</h2>\n<ul>\n<li>ã€Operating Systems: Three Easy Piecesã€ <em>-Remzi H. Arpaci-Dusseau ì§€ìŒ</em><br>\n<a href=\"https://pages.cs.wisc.edu/~remzi/OSTEP/\" target=\"_blank\" rel=\"nofollow\">https://pages.cs.wisc.edu/~remzi/OSTEP/</a></li>\n</ul>","id":"fec1b40f-0e6c-54ce-a978-ceca032539c4","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%AC%B8%EC%A0%9C-%EB%B0%8F-%ED%92%80%EC%9D%B4\">ë¬¸ì œ ë° í’€ì´</a></p>\n<ul>\n<li>\n<ul>\n<li><a href=\"#1-for-timing-youll-need-to-use-a-timer-eg-gettimeofday-how-precise-is-such-a-timer-how-long-does-an-operation-have-to-take-in-order-for-you-to-time-it-precisely-this-will-help-determine-how-many-times-in-a-loop-youll-have-to-repeat-a-page-access-in-order-to-time-it-successfully\">1. For timing, youâ€™ll need to use a timer (e.g., gettimeofday()). How precise is such a timer? How long does an operation have to take in order for you to time it precisely? (this will help determine how many times, in a loop, youâ€™ll have to repeat a page access in order to time it successfully)</a></li>\n<li><a href=\"#2-write-the-program-called-tlbc-that-can-roughly-measure-the-cost-of-accessing-each-page-inputs-to-the-program-should-be-the-number-of-pages-to-touch-and-the-number-of-trials\">2. Write the program, called tlb.c, that can roughly measure the cost of accessing each page. Inputs to the program should be: the number of pages to touch and the number of trials.</a></li>\n<li><a href=\"#3-now-write-a-script-in-your-favorite-scripting-language-bash-to-run-this-program-while-varying-the-number-of-pages-accessed-from-1-up-to-a-few-thousand-perhaps-incrementing-by-a-factor-of-two-per-iteration-run-the-script-on-different-machines-and-gather-some-data\">3. Now write a script in your favorite scripting language (bash?) to run this program, while varying the number of pages accessed from 1 up to a few thousand, perhaps incrementing by a factor of two per iteration. Run the script on different machines and gather some data.</a></li>\n<li><a href=\"#4-next-graph-the-results-making-a-graph-that-looks-similar-to-the-one-above-use-a-good-tool-like-ploticus-or-even-zplot-visualization-usually-makes-the-data-much-easier-to-digest-why-do-you-think-that-is\">4. Next, graph the results, making a graph that looks similar to the one above. Use a good tool like ploticus or even zplot. Visualization usually makes the data much easier to digest; why do you think that is?</a></li>\n<li><a href=\"#5-one-thing-to-watch-out-for-is-compiler-optimization-compilers-do-all-sorts-of-clever-things-including-removing-loops-which-increment-values-that-no-other-part-of-the-program-subsequently-uses-how-can-you-ensure-the-compiler-does-not-remove-the-main-loop-above-from-your-tlb-size-estimator\">5. One thing to watch out for is compiler optimization. Compilers do all sorts of clever things, including removing loops which increment values that no other part of the program subsequently uses. How can you ensure the compiler does not remove the main loop above from your TLB size estimator?</a></li>\n<li><a href=\"#6-another-thing-to-watch-out-for-is-the-fact-that-most-systems-today-ship-with-multiple-cpus-and-each-cpu-of-course-has-its-own-tlb-hierarchy-to-really-get-good-measurements-you-have-to-run-your-code-on-just-one-cpu-instead-of-letting-the-scheduler-bounce-it-from-one-cpu-to-the-next\">6. Another thing to watch out for is the fact that most systems today ship with multiple CPUs, and each CPU, of course, has its own TLB hierarchy. To really get good measurements, you have to run your code on just one CPU, instead of letting the scheduler bounce it from one CPU to the next.</a></li>\n<li><a href=\"#7-another-issue-that-might-arise-relates-to-initialization-if-you-dont-initialize-the-array-a-above-before-accessing-it-the-first-time-you-access-it-will-be-very-expensive-due-to-initial-access-costs-such-as-demand-zeroing-will-this-affect-your-code-and-its-timing-what-can-you-do-to-counterbalance-these-potential-costs\">7. Another issue that might arise relates to initialization. If you donâ€™t initialize the array a above before accessing it, the first time you access it will be very expensive, due to initial access costs such as demand zeroing. Will this affect your code and its timing? What can you do to counterbalance these potential costs?</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#source\">Source</a></p>\n</li>\n</ul>","frontmatter":{"title":"OS: Three Easy Pieces [Remzi] <19.TLB Measurement> í’€ì´","summary":"êµì¬ Operating Systems: Three Easy Pieces [Remzi] ì† Homework ë¬¸ì œ í’€ì´","date":"2023.08.22.","categories":["OS"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABESAAAREgEAwpvaAAABrklEQVQozzWSPa/qMAyG08RN4iRNvxADGwL1qiBoqaAduiAhMfADGEAV450Y2BD8+atTn/sMUeTYsvO+ZlEUOeeUUgCgtZZSGmMQ0VqrlPLex3EMAFEUAQAiAoBSii5MSqlG4ji21mZZhohJkiBilmXWWmNMFEVCCMr03mutAUBKyYQQnPMgCIQQv6ERzrmUEgAoQY4EQcAYU0pxzn87c86ttcfjcbvdFkWxXq/7vu+6bj6fV1V1Op2apun7vqqqpmkWiwVNEYYhc85xzrMsu9/v7/d7GIbb7fZ6vYZh+H6/5/P58/n8HXk+n4/H43q9MsZghGmtnXPee6VUnueHw6Esy9Vqtd/v+74vy7Jt2z8jk8lECEFyIqIQgiEi1ZPaZVnWdb3ZbOq67rpuvV4XRbHb7dq2nc1mxhgSIk1T5xwjqYMgoAt9hoQVQmithRD0pLXO89w5J6X8LQYAspROmsI5lyQJ+a+1NsZQkAy31iKiMebHKkQk6eM4FiNku9Y6DEP/H5rZWhtFUZqmy+XypzNV0pIBQBiGAOC9R0SayHtP24KI0+m0LMumaS6Xyz8ykDVBPPlfZQAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/5e3e112afb9c9c7bd4c291006dba33a4/3739d/book2.png","srcSet":"/static/5e3e112afb9c9c7bd4c291006dba33a4/da853/book2.png 141w,\n/static/5e3e112afb9c9c7bd4c291006dba33a4/9f0de/book2.png 283w,\n/static/5e3e112afb9c9c7bd4c291006dba33a4/3739d/book2.png 565w","sizes":"(min-width: 565px) 565px, 100vw"},"sources":[{"srcSet":"/static/5e3e112afb9c9c7bd4c291006dba33a4/cdf2b/book2.webp 141w,\n/static/5e3e112afb9c9c7bd4c291006dba33a4/d9fe4/book2.webp 283w,\n/static/5e3e112afb9c9c7bd4c291006dba33a4/8b8b9/book2.webp 565w","type":"image/webp","sizes":"(min-width: 565px) 565px, 100vw"}]},"width":565,"height":306}},"publicURL":"/static/5e3e112afb9c9c7bd4c291006dba33a4/book2.png"}}}}]}},"pageContext":{"slug":"/os_hw_3/"}},"staticQueryHashes":[]}