{"componentChunkName":"component---src-templates-post-template-tsx","path":"/k8s_prac_3_2/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p><em>해당 포스트는 교재 『쿠버네티스 교과서』를 활용하며,</em><br>\n<em>환경은 Kubernetes v1.28. Docker Desktop으로 진행합니다.</em></p>\n<h2 id=\"개념-요약\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EB%85%90-%EC%9A%94%EC%95%BD\" aria-label=\"개념 요약 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개념 요약</h2>\n<h3 id=\"클러스터-외부-트래픽\" style=\"position:relative;\"><a href=\"#%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%99%B8%EB%B6%80-%ED%8A%B8%EB%9E%98%ED%94%BD\" aria-label=\"클러스터 외부 트래픽 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>클러스터 외부 트래픽</h3>\n<p>데이터베이스와 같은 스토리지 컴포넌트는 k8s 외부에서 동작할수도 있다.<br>\n클러스터 외부를 가리키는 도메인 네임을 통해 이를 해결한다.</p>\n<h3 id=\"익스터널네임\" style=\"position:relative;\"><a href=\"#%EC%9D%B5%EC%8A%A4%ED%84%B0%EB%84%90%EB%84%A4%EC%9E%84\" aria-label=\"익스터널네임 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>익스터널네임</h3>\n<p>애플리케이션 파드에서 로켈 네임을 사용하고, k8s DNS서버에 이 로컬 네임을 조외하여 외부 도메인으로 해소해준다.<br>\n단, HTTP 서비스의 경우 헤더의 호스트명이 익스터널네임 서비스와 다르다면 오류가 발생한다.</p>\n<h3 id=\"헤드리스-서비스\" style=\"position:relative;\"><a href=\"#%ED%97%A4%EB%93%9C%EB%A6%AC%EC%8A%A4-%EC%84%9C%EB%B9%84%EC%8A%A4\" aria-label=\"헤드리스 서비스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>헤드리스 서비스</h3>\n<p>클러스터 IP 형태로 정의가 되지만, 레이블 셀렉터가 없어 대응하는 파드도 없다. IP 주소의 목록이 담긴 엔드포인트와 함께 배포된다.</p>\n<h3 id=\"엔드포인트\" style=\"position:relative;\"><a href=\"#%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8\" aria-label=\"엔드포인트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>엔드포인트</h3>\n<p>모바일 디바이스, 데스크톱 컴퓨터, 가상 머신, 임베디드 디바이스, 서버 등 네트워크 시스템에 연결하는 물리적 디바이스. 단, k8s에서는 서비스가 트래픽을 전달하고자 하는 Pod의 집합. 즉, 각 pod로 트래픽을 연결해주는 k8s 서비스의 일부분.</p>\n<ul>\n<li>서비스에도 컨트롤러가 존재하여, 파드가 변경되면 엔드포인트의 목록을 최신으로 업데이트한다!</li>\n</ul>\n<h3 id=\"k8s-네트워크-프록시\" style=\"position:relative;\"><a href=\"#k8s-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%ED%94%84%EB%A1%9D%EC%8B%9C\" aria-label=\"k8s 네트워크 프록시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>k8s 네트워크 프록시</h3>\n<p>파드에서 나온 통신의 라우팅을 담당한다. 각각의 노드에서 모든 서비스의 엔드포인트에 대한 최신 정보를 유지하고, 운영체제가 제공하는 네트워크 패킷 필터를 사용하여 트래픽을 라우팅한다.</p>\n<ul>\n<li>파드는 각 노드마다 네트워크 프록시를 경유하여 네트워크에 접근한다.</li>\n<li>프록시는 패킷 필터링을 적용하여 가상 IP 주소를 실제 엔드포인트로 연결한다.</li>\n</ul>\n<h3 id=\"네임스페이스\" style=\"position:relative;\"><a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4\" aria-label=\"네임스페이스 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네임스페이스</h3>\n<p>여러 k8s 리소스를 하나로 묶기 위한 리소스. k8s 클러스터를 논리적 파티션으로 나누는 역할.\r\n기본적으로 default 네임스페이스가 있고, DNS 서버나 API 같은 내장 컴포넌트가 쓰는 kube-system 네임스페이스가 있다.</p>\n<h2 id=\"실습\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5\" aria-label=\"실습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습</h2>\n<h3 id=\"주요-요점들\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9A%94-%EC%9A%94%EC%A0%90%EB%93%A4\" aria-label=\"주요 요점들 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주요 요점들</h3>\n<ul>\n<li>서비스는 k8s 가상네트워크의 일부로, 모든 파드가 제한없이 접근할 수 있다.</li>\n<li>각 파드에서는 도메인 네임을 조회하여 k8s DNS를 거쳐 서비스의 도메인 네임과 IP를 확인할 수 있다.</li>\n<li>로컬 도메인 네임은 네임스페이스를 포함하는 완전한 도메인 네임의 별명이다.</li>\n</ul>\n<h3 id=\"매니페스트-파일\" style=\"position:relative;\"><a href=\"#%EB%A7%A4%EB%8B%88%ED%8E%98%EC%8A%A4%ED%8A%B8-%ED%8C%8C%EC%9D%BC\" aria-label=\"매니페스트 파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>매니페스트 파일</h3>\n<p>api-service-externalName.yaml</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\r\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service\r\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> numbers<span class=\"token punctuation\">-</span>api\r\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> ExternalName\r\n  <span class=\"token key atrule\">externalName</span><span class=\"token punctuation\">:</span> raw.githubusercontent.com</code></pre></div>\n<h3 id=\"\" style=\"position:relative;\"><a href=\"#\" aria-label=\" permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h3>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># 현재 배포된 클러스터IP 서비스를 삭제한다</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl delete svc numbers-api\r\nservice <span class=\"token string\">\"numbers-api\"</span> deleted\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># 익스터널네임 서비스를 새로 배포한다</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl apply <span class=\"token operator\">-</span>f numbers-services/api-service-externalName<span class=\"token punctuation\">.</span>yaml\r\nservice/numbers-api created\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> \r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># 서비스의 상세 정보를 확인한다</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl get svc numbers-api\r\nNAME          <span class=\"token function\">TYPE</span>           CLUSTER-IP   EXTERNAL-IP                 PORT<span class=\"token punctuation\">(</span>S<span class=\"token punctuation\">)</span>   AGE\r\nnumbers-api   ExternalName   &lt;none>       raw<span class=\"token punctuation\">.</span>githubusercontent<span class=\"token punctuation\">.</span>com   &lt;none>    2s\r\n\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl exec deploy/numbers-api <span class=\"token operator\">--</span> sh <span class=\"token operator\">-</span>c <span class=\"token string\">'nslookup numbers-api'</span>            \r\nServer:         10<span class=\"token punctuation\">.</span>96<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>10\r\nAddress:        10<span class=\"token punctuation\">.</span>96<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>10:53\r\n\r\nserver cant find numbers-api<span class=\"token punctuation\">.</span>cluster<span class=\"token punctuation\">.</span>local: NXDOMAIN\r\n\r\nserver cant find numbers-api<span class=\"token punctuation\">.</span>cluster<span class=\"token punctuation\">.</span>local: NXDOMAIN\r\n\r\nserver cant find numbers-api<span class=\"token punctuation\">.</span>svc<span class=\"token punctuation\">.</span>cluster<span class=\"token punctuation\">.</span>local: NXDOMAIN\r\n\r\nserver cant find numbers-api<span class=\"token punctuation\">.</span>svc<span class=\"token punctuation\">.</span>cluster<span class=\"token punctuation\">.</span>local: NXDOMAIN\r\n\r\nnumbers-api<span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">.</span>svc<span class=\"token punctuation\">.</span>cluster<span class=\"token punctuation\">.</span>local   canonical name = raw<span class=\"token punctuation\">.</span>githubusercontent<span class=\"token punctuation\">.</span>com\r\nName:   raw<span class=\"token punctuation\">.</span>githubusercontent<span class=\"token punctuation\">.</span>com\r\nAddress: 185<span class=\"token punctuation\">.</span>199<span class=\"token punctuation\">.</span>108<span class=\"token punctuation\">.</span>133\r\nName:   raw<span class=\"token punctuation\">.</span>githubusercontent<span class=\"token punctuation\">.</span>com\r\nAddress: 185<span class=\"token punctuation\">.</span>199<span class=\"token punctuation\">.</span>111<span class=\"token punctuation\">.</span>133\r\nName:   raw<span class=\"token punctuation\">.</span>githubusercontent<span class=\"token punctuation\">.</span>com\r\nAddress: 185<span class=\"token punctuation\">.</span>199<span class=\"token punctuation\">.</span>109<span class=\"token punctuation\">.</span>133\r\nName:   raw<span class=\"token punctuation\">.</span>githubusercontent<span class=\"token punctuation\">.</span>com\r\nAddress: 185<span class=\"token punctuation\">.</span>199<span class=\"token punctuation\">.</span>110<span class=\"token punctuation\">.</span>133\r\n\r\nnumbers-api<span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">.</span>svc<span class=\"token punctuation\">.</span>cluster<span class=\"token punctuation\">.</span>local   canonical name = raw<span class=\"token punctuation\">.</span>githubusercontent<span class=\"token punctuation\">.</span>com\r\nName:   raw<span class=\"token punctuation\">.</span>githubusercontent<span class=\"token punctuation\">.</span>com\r\nAddress: 2606:50c0:8001::154\r\nName:   raw<span class=\"token punctuation\">.</span>githubusercontent<span class=\"token punctuation\">.</span>com\r\nAddress: 2606:50c0:8003::154\r\nName:   raw<span class=\"token punctuation\">.</span>githubusercontent<span class=\"token punctuation\">.</span>com\r\nAddress: 2606:50c0:8000::154\r\nName:   raw<span class=\"token punctuation\">.</span>githubusercontent<span class=\"token punctuation\">.</span>com\r\nAddress: 2606:50c0:8002::154</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># 헤드리스 서비스를 배포한다</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl apply <span class=\"token operator\">-</span>f numbers-services/api-service-headless<span class=\"token punctuation\">.</span>yaml\r\nservice/numbers-api created\r\nendpoints/numbers-api created\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># 서비스의 상세 정보를 확인한다</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl get svc numbers-api\r\nNAME          <span class=\"token function\">TYPE</span>        CLUSTER-IP       EXTERNAL-IP   PORT<span class=\"token punctuation\">(</span>S<span class=\"token punctuation\">)</span>   AGE\r\nnumbers-api   ClusterIP   10<span class=\"token punctuation\">.</span>106<span class=\"token punctuation\">.</span>142<span class=\"token punctuation\">.</span>227   &lt;none>        80/TCP    0s\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># 엔드포인트의 상세 정보를 확인한다</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl get endpoints numbers-api\r\nNAME          ENDPOINTS            AGE\r\nnumbers-api   192<span class=\"token punctuation\">.</span>168<span class=\"token punctuation\">.</span>123<span class=\"token punctuation\">.</span>234:80   0s</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># sleep-2 서비스의 엔드포인트 목록 출력</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl get endpoints <span class=\"token function\">sleep</span><span class=\"token operator\">-</span>2\r\nNAME      ENDPOINTS       AGE\r\n<span class=\"token function\">sleep</span><span class=\"token operator\">-</span>2   10<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>102:80   59m\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># 파드 삭제</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl delete pods <span class=\"token operator\">-</span>l app=<span class=\"token function\">sleep</span><span class=\"token operator\">-</span>2\r\npod <span class=\"token string\">\"sleep-2-7f69798f94-9mn2v\"</span> deleted\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># 엔드포인트가 새로운 파드의 주소로 업데이트되었는지 확인 </span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl get endpoints <span class=\"token function\">sleep</span><span class=\"token operator\">-</span>2\r\nNAME      ENDPOINTS   AGE\r\n<span class=\"token function\">sleep</span><span class=\"token operator\">-</span>2   &lt;none>      59m\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># 디플로이먼트 채로 삭제</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl delete deploy <span class=\"token function\">sleep</span><span class=\"token operator\">-</span>2\r\ndeployment<span class=\"token punctuation\">.</span>apps <span class=\"token string\">\"sleep-2\"</span> deleted\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># 엔드포인트는 여전히 있지만, 가리키는 IP 주소가 없음     </span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl get endpoints <span class=\"token function\">sleep</span><span class=\"token operator\">-</span>2\r\n\r\n\r\n\r\nNAME      ENDPOINTS   AGE\r\n<span class=\"token function\">sleep</span><span class=\"token operator\">-</span>2   &lt;none>      60m</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># default 네임스페이스의 서비스 리소스 목록 확인</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl get svc <span class=\"token operator\">--</span>namespace default\r\nNAME          <span class=\"token function\">TYPE</span>           CLUSTER-IP       EXTERNAL-IP   PORT<span class=\"token punctuation\">(</span>S<span class=\"token punctuation\">)</span>          AGE\r\nkubernetes    ClusterIP      10<span class=\"token punctuation\">.</span>96<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>1        &lt;none>        443/TCP          4h53m\r\nnumbers-api   ClusterIP      10<span class=\"token punctuation\">.</span>106<span class=\"token punctuation\">.</span>142<span class=\"token punctuation\">.</span>227   &lt;none>        80/TCP           4h46m\r\nnumbers-web   LoadBalancer   10<span class=\"token punctuation\">.</span>108<span class=\"token punctuation\">.</span>149<span class=\"token punctuation\">.</span>146   localhost     8080:31104/TCP   4h52m\r\n<span class=\"token function\">sleep</span><span class=\"token operator\">-</span>2       ClusterIP      10<span class=\"token punctuation\">.</span>111<span class=\"token punctuation\">.</span>245<span class=\"token punctuation\">.</span>96    &lt;none>        80/TCP           74m\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># 쿠버네티스 시스템 네임스페이스의 서비스 리소스 목록 확인</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl get svc <span class=\"token operator\">-</span>n kube-system\r\nNAME       <span class=\"token function\">TYPE</span>        CLUSTER-IP   EXTERNAL-IP   PORT<span class=\"token punctuation\">(</span>S<span class=\"token punctuation\">)</span>                  AGE\r\nkube-dns   ClusterIP   10<span class=\"token punctuation\">.</span>96<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>10   &lt;none>        53/UDP<span class=\"token punctuation\">,</span>53/TCP<span class=\"token punctuation\">,</span>9153/TCP   4h53m\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># 완전한 도메인 네임으로 DNS 조회하기</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl exec deploy/<span class=\"token function\">sleep</span><span class=\"token operator\">-</span>1 <span class=\"token operator\">--</span> sh <span class=\"token operator\">-</span>c <span class=\"token string\">'nslookup numbers-api.default.svc.cluster.local | grep \"^[^*]\"'</span>   \r\nServer:       10<span class=\"token punctuation\">.</span>96<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>10\r\nAddress:      10<span class=\"token punctuation\">.</span>96<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>10:53\r\nName:   numbers-api<span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">.</span>svc<span class=\"token punctuation\">.</span>cluster<span class=\"token punctuation\">.</span>local\r\nAddress: 10<span class=\"token punctuation\">.</span>106<span class=\"token punctuation\">.</span>142<span class=\"token punctuation\">.</span>227\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> <span class=\"token comment\"># 쿠버네티스 시스템 네임스페이스의 완전한 도메인 네임으로 DNS 조회하기</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch03> kubectl exec deploy/<span class=\"token function\">sleep</span><span class=\"token operator\">-</span>1 <span class=\"token operator\">--</span> sh <span class=\"token operator\">-</span>c <span class=\"token string\">'nslookup kube-dns.kube-system.svc.cluster.local | grep \"^[^*]\"'</span>  \r\nServer:       10<span class=\"token punctuation\">.</span>96<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>10\r\nAddress:      10<span class=\"token punctuation\">.</span>96<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>10:53\r\nName:   kube-dns<span class=\"token punctuation\">.</span>kube-system<span class=\"token punctuation\">.</span>svc<span class=\"token punctuation\">.</span>cluster<span class=\"token punctuation\">.</span>local\r\nAddress: 10<span class=\"token punctuation\">.</span>96<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>10</code></pre></div>\n<h2 id=\"source\" style=\"position:relative;\"><a href=\"#source\" aria-label=\"source permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source</h2>\n<ul>\n<li>『쿠버네티스 교과서』- 엘튼 스톤맨, 길벗<br>\n<a href=\"https://github.com/gilbutITbook/kiamol\" target=\"_blank\" rel=\"nofollow\">https://github.com/gilbutITbook/kiamol</a></li>\n</ul>","id":"b4091423-3c79-51bd-8f22-fd3a7ec389ed","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EA%B0%9C%EB%85%90-%EC%9A%94%EC%95%BD\">개념 요약</a></p>\n<ul>\n<li><a href=\"#%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EC%99%B8%EB%B6%80-%ED%8A%B8%EB%9E%98%ED%94%BD\">클러스터 외부 트래픽</a></li>\n<li><a href=\"#%EC%9D%B5%EC%8A%A4%ED%84%B0%EB%84%90%EB%84%A4%EC%9E%84\">익스터널네임</a></li>\n<li><a href=\"#%ED%97%A4%EB%93%9C%EB%A6%AC%EC%8A%A4-%EC%84%9C%EB%B9%84%EC%8A%A4\">헤드리스 서비스</a></li>\n<li><a href=\"#%EC%97%94%EB%93%9C%ED%8F%AC%EC%9D%B8%ED%8A%B8\">엔드포인트</a></li>\n<li><a href=\"#k8s-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%ED%94%84%EB%A1%9D%EC%8B%9C\">k8s 네트워크 프록시</a></li>\n<li><a href=\"#%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4\">네임스페이스</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%8B%A4%EC%8A%B5\">실습</a></p>\n<ul>\n<li><a href=\"#%EC%A3%BC%EC%9A%94-%EC%9A%94%EC%A0%90%EB%93%A4\">주요 요점들</a></li>\n<li><a href=\"#%EB%A7%A4%EB%8B%88%ED%8E%98%EC%8A%A4%ED%8A%B8-%ED%8C%8C%EC%9D%BC\">매니페스트 파일</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#source\">Source</a></p>\n</li>\n</ul>","frontmatter":{"title":"『쿠버네티스 교과서』실습 3장 part 2","summary":"엘튼 스톤맨의 『쿠버네티스 교과서』를 바탕으로 k8s 실습을 진행합니다.","date":"2024.01.18.","categories":["K8s","Docker","DevOps"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAcCBQj/xAAWAQEBAQAAAAAAAAAAAAAAAAAJAgX/2gAMAwEAAhADEAAAAUQ68/wQe68DIU3/xAAbEAABBAMAAAAAAAAAAAAAAAACAAMEBQEGEP/aAAgBAQABBQKG209L3Oloq2GsozMuf//EACERAAICAQIHAAAAAAAAAAAAAAECAwQSABEFBxM0QXOy/9oACAEDAQE/AeQ9V7DcFaOxNWNW1FO/SZgLEWKg1pV3CNG3nIMQC2OzYstDsqvoi+Rr/8QAHhEAAQMFAQEAAAAAAAAAAAAAAwECEgAEESFhBTL/2gAIAQIBAT8B9S3IS4AZpyDYGUxNxA0sfes64qdkmqWv/8QAIxAAAgEDBAEFAAAAAAAAAAAAAQIRAxIiBBAhMQAFEzJBUf/aAAgBAQAGPwLT067W0nqAOTcOPzHLkwMcj0uUeaOr6ZUT3nsVlV5vWADwoCFvkzNIbDhFU75OzRMXMWie+ye/vb//xAAaEAEBAAMBAQAAAAAAAAAAAAABEQAhMUFx/9oACAEBAAE/ITqO+CxlF14nd15QbYYQsJzV+IXNc9YyfLHAxqUGnYXhjn//2gAMAwEAAgADAAAAEFv/AP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPxBFpaYiyxm1CBz+v//EABoRAQEAAgMAAAAAAAAAAAAAAAERADFBcbH/2gAIAQIBAT8Qs1GoBEKWhnNcjZ7fc//EABoQAQACAwEAAAAAAAAAAAAAAAEAESExwXH/2gAIAQEAAT8QuLX5IofsSCd43ADOLxb1Xx453POs5cjI3Qk8gWXBUWtsG551n//Z"},"images":{"fallback":{"src":"/static/582542484766a1b4ac3c5f037914dd69/bc134/k8s.jpg","srcSet":"/static/582542484766a1b4ac3c5f037914dd69/2278c/k8s.jpg 320w,\n/static/582542484766a1b4ac3c5f037914dd69/0f1c0/k8s.jpg 640w,\n/static/582542484766a1b4ac3c5f037914dd69/bc134/k8s.jpg 1280w","sizes":"(min-width: 1280px) 1280px, 100vw"},"sources":[{"srcSet":"/static/582542484766a1b4ac3c5f037914dd69/378b7/k8s.webp 320w,\n/static/582542484766a1b4ac3c5f037914dd69/3c3fb/k8s.webp 640w,\n/static/582542484766a1b4ac3c5f037914dd69/c2dd8/k8s.webp 1280w","type":"image/webp","sizes":"(min-width: 1280px) 1280px, 100vw"}]},"width":1280,"height":720}},"publicURL":"/static/582542484766a1b4ac3c5f037914dd69/k8s.jpg"}}}}]}},"pageContext":{"slug":"/k8s_prac_3_2/"}},"staticQueryHashes":[]}