<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="naver-site-verification" content="7727e68f404d4c7be584f2b673b9943ab5c6b9ab"/><meta data-react-helmet="true" name="google-site-verification" content="fygLmB3YoAnXWkSTMHoemYurOt8ZBEdT2K5M1qZQL5E"/><meta data-react-helmet="true" name="twitter:image" content="/static/fd598b498e9c397c447258464db7e128/common1.jpg"/><meta data-react-helmet="true" name="twitter:description" content="Edward Sciore의 Java 기반 SimpleDB 개선 과제를 수행합니다."/><meta data-react-helmet="true" name="twitter:title" content="Boston College SimpleDB 개선 과제 part 2"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" property="og:site_name" content="Boston College SimpleDB 개선 과제 part 2"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:image" content="/static/fd598b498e9c397c447258464db7e128/common1.jpg"/><meta data-react-helmet="true" property="og:description" content="Edward Sciore의 Java 기반 SimpleDB 개선 과제를 수행합니다."/><meta data-react-helmet="true" property="og:title" content="Boston College SimpleDB 개선 과제 part 2"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" name="description" content="Edward Sciore의 Java 기반 SimpleDB 개선 과제를 수행합니다."/><meta name="generator" content="Gatsby 4.19.2"/><style data-href="/styles.69a4e1e9c4403d061256.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:#2f2f2f;color:#eee;font-family:Roboto Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5em;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#363636}:not(pre)>code[class*=language-]{border-radius:.2em;padding:.1em;white-space:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1.25em 1em;position:relative}.language-css>code,.language-sass>code,.language-scss>code{color:#fd9170}[class*=language-] .namespace{opacity:.7}.token.atrule{color:#c792ea}.token.attr-name{color:#ffcb6b}.token.attr-value,.token.attribute{color:#a5e844}.token.boolean{color:#c792ea}.token.builtin{color:#ffcb6b}.token.cdata,.token.char{color:#80cbc4}.token.class{color:#ffcb6b}.token.class-name{color:#f2ff00}.token.comment{color:#616161}.token.constant{color:#c792ea}.token.deleted{color:#f66}.token.doctype{color:#616161}.token.entity{color:#f66}.token.function{color:#c792ea}.token.hexcode{color:#f2ff00}.token.id,.token.important{color:#c792ea;font-weight:700}.token.inserted{color:#80cbc4}.token.keyword{color:#c792ea}.token.number{color:#fd9170}.token.operator{color:#89ddff}.token.prolog{color:#616161}.token.property{color:#80cbc4}.token.pseudo-class,.token.pseudo-element{color:#a5e844}.token.punctuation{color:#89ddff}.token.regex{color:#f2ff00}.token.selector{color:#f66}.token.string{color:#a5e844}.token.symbol{color:#c792ea}.token.tag{color:#f66}.token.unit{color:#fd9170}.token.url,.token.variable{color:#f66}:host,:root{--fa-font-solid:normal 900 1em/1 "Font Awesome 6 Solid";--fa-font-regular:normal 400 1em/1 "Font Awesome 6 Regular";--fa-font-light:normal 300 1em/1 "Font Awesome 6 Light";--fa-font-thin:normal 100 1em/1 "Font Awesome 6 Thin";--fa-font-duotone:normal 900 1em/1 "Font Awesome 6 Duotone";--fa-font-brands:normal 400 1em/1 "Font Awesome 6 Brands"}svg:not(:host).svg-inline--fa,svg:not(:root).svg-inline--fa{box-sizing:content-box;overflow:visible}.svg-inline--fa{display:var(--fa-display,inline-block);height:1em;overflow:visible;vertical-align:-.125em}.svg-inline--fa.fa-2xs{vertical-align:.1em}.svg-inline--fa.fa-xs{vertical-align:0}.svg-inline--fa.fa-sm{vertical-align:-.07143em}.svg-inline--fa.fa-lg{vertical-align:-.2em}.svg-inline--fa.fa-xl{vertical-align:-.25em}.svg-inline--fa.fa-2xl{vertical-align:-.3125em}.svg-inline--fa.fa-pull-left{margin-right:var(--fa-pull-margin,.3em);width:auto}.svg-inline--fa.fa-pull-right{margin-left:var(--fa-pull-margin,.3em);width:auto}.svg-inline--fa.fa-li{top:.25em;width:var(--fa-li-width,2em)}.svg-inline--fa.fa-fw{width:var(--fa-fw-width,1.25em)}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-text{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter{background-color:var(--fa-counter-background-color,#ff253a);border-radius:var(--fa-counter-border-radius,1em);box-sizing:border-box;color:var(--fa-inverse,#fff);line-height:var(--fa-counter-line-height,1);max-width:var(--fa-counter-max-width,5em);min-width:var(--fa-counter-min-width,1.5em);overflow:hidden;padding:var(--fa-counter-padding,.25em .5em);right:var(--fa-right,0);text-overflow:ellipsis;top:var(--fa-top,0);-webkit-transform:scale(var(--fa-counter-scale,.25));transform:scale(var(--fa-counter-scale,.25));-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-bottom-right{bottom:var(--fa-bottom,0);right:var(--fa-right,0);top:auto;-webkit-transform:scale(var(--fa-layers-scale,.25));transform:scale(var(--fa-layers-scale,.25));-webkit-transform-origin:bottom right;transform-origin:bottom right}.fa-layers-bottom-left{bottom:var(--fa-bottom,0);left:var(--fa-left,0);right:auto;top:auto;-webkit-transform:scale(var(--fa-layers-scale,.25));transform:scale(var(--fa-layers-scale,.25));-webkit-transform-origin:bottom left;transform-origin:bottom left}.fa-layers-top-right{right:var(--fa-right,0);top:var(--fa-top,0);-webkit-transform:scale(var(--fa-layers-scale,.25));transform:scale(var(--fa-layers-scale,.25));-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-top-left{left:var(--fa-left,0);right:auto;top:var(--fa-top,0);-webkit-transform:scale(var(--fa-layers-scale,.25));transform:scale(var(--fa-layers-scale,.25));-webkit-transform-origin:top left;transform-origin:top left}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-2xs{font-size:.625em;line-height:.1em;vertical-align:.225em}.fa-xs{font-size:.75em;line-height:.08333em;vertical-align:.125em}.fa-sm{font-size:.875em;line-height:.07143em;vertical-align:.05357em}.fa-lg{font-size:1.25em;line-height:.05em;vertical-align:-.075em}.fa-xl{font-size:1.5em;line-height:.04167em;vertical-align:-.125em}.fa-2xl{font-size:2em;line-height:.03125em;vertical-align:-.1875em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:var(--fa-li-margin,2.5em);padding-left:0}.fa-ul>li{position:relative}.fa-li{left:calc(var(--fa-li-width, 2em)*-1);line-height:inherit;position:absolute;text-align:center;width:var(--fa-li-width,2em)}.fa-border{border-color:var(--fa-border-color,#eee);border-radius:var(--fa-border-radius,.1em);border-style:var(--fa-border-style,solid);border-width:var(--fa-border-width,.08em);padding:var(--fa-border-padding,.2em .25em .15em)}.fa-pull-left{float:left;margin-right:var(--fa-pull-margin,.3em)}.fa-pull-right{float:right;margin-left:var(--fa-pull-margin,.3em)}.fa-beat{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-beat;animation-name:fa-beat;-webkit-animation-timing-function:var(--fa-animation-timing,ease-in-out);animation-timing-function:var(--fa-animation-timing,ease-in-out)}.fa-bounce{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-bounce;animation-name:fa-bounce;-webkit-animation-timing-function:var(--fa-animation-timing,cubic-bezier(.28,.84,.42,1));animation-timing-function:var(--fa-animation-timing,cubic-bezier(.28,.84,.42,1))}.fa-fade{-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-fade;animation-name:fa-fade;-webkit-animation-timing-function:var(--fa-animation-timing,cubic-bezier(.4,0,.6,1));animation-timing-function:var(--fa-animation-timing,cubic-bezier(.4,0,.6,1))}.fa-beat-fade,.fa-fade{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s)}.fa-beat-fade{-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-beat-fade;animation-name:fa-beat-fade;-webkit-animation-timing-function:var(--fa-animation-timing,cubic-bezier(.4,0,.6,1));animation-timing-function:var(--fa-animation-timing,cubic-bezier(.4,0,.6,1))}.fa-flip{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-flip;animation-name:fa-flip;-webkit-animation-timing-function:var(--fa-animation-timing,ease-in-out);animation-timing-function:var(--fa-animation-timing,ease-in-out)}.fa-shake{-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-shake;animation-name:fa-shake;-webkit-animation-timing-function:var(--fa-animation-timing,linear);animation-timing-function:var(--fa-animation-timing,linear)}.fa-shake,.fa-spin{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal)}.fa-spin{-webkit-animation-duration:var(--fa-animation-duration,2s);animation-duration:var(--fa-animation-duration,2s);-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-spin;animation-name:fa-spin;-webkit-animation-timing-function:var(--fa-animation-timing,linear);animation-timing-function:var(--fa-animation-timing,linear)}.fa-spin-reverse{--fa-animation-direction:reverse}.fa-pulse,.fa-spin-pulse{-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-spin;animation-name:fa-spin;-webkit-animation-timing-function:var(--fa-animation-timing,steps(8));animation-timing-function:var(--fa-animation-timing,steps(8))}@media (prefers-reduced-motion:reduce){.fa-beat,.fa-beat-fade,.fa-bounce,.fa-fade,.fa-flip,.fa-pulse,.fa-shake,.fa-spin,.fa-spin-pulse{-webkit-animation-delay:-1ms;animation-delay:-1ms;-webkit-animation-duration:1ms;animation-duration:1ms;-webkit-animation-iteration-count:1;animation-iteration-count:1;transition-delay:0s;transition-duration:0s}}@-webkit-keyframes fa-beat{0%,90%{-webkit-transform:scale(1);transform:scale(1)}45%{-webkit-transform:scale(var(--fa-beat-scale,1.25));transform:scale(var(--fa-beat-scale,1.25))}}@keyframes fa-beat{0%,90%{-webkit-transform:scale(1);transform:scale(1)}45%{-webkit-transform:scale(var(--fa-beat-scale,1.25));transform:scale(var(--fa-beat-scale,1.25))}}@-webkit-keyframes fa-bounce{0%{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}10%{-webkit-transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0);transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0)}30%{-webkit-transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em));transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em))}50%{-webkit-transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0);transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0)}57%{-webkit-transform:scale(1) translateY(var(--fa-bounce-rebound,-.125em));transform:scale(1) translateY(var(--fa-bounce-rebound,-.125em))}64%{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}to{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}}@keyframes fa-bounce{0%{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}10%{-webkit-transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0);transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0)}30%{-webkit-transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em));transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em))}50%{-webkit-transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0);transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0)}57%{-webkit-transform:scale(1) translateY(var(--fa-bounce-rebound,-.125em));transform:scale(1) translateY(var(--fa-bounce-rebound,-.125em))}64%{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}to{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}}@-webkit-keyframes fa-fade{50%{opacity:var(--fa-fade-opacity,.4)}}@keyframes fa-fade{50%{opacity:var(--fa-fade-opacity,.4)}}@-webkit-keyframes fa-beat-fade{0%,to{opacity:var(--fa-beat-fade-opacity,.4);-webkit-transform:scale(1);transform:scale(1)}50%{opacity:1;-webkit-transform:scale(var(--fa-beat-fade-scale,1.125));transform:scale(var(--fa-beat-fade-scale,1.125))}}@keyframes fa-beat-fade{0%,to{opacity:var(--fa-beat-fade-opacity,.4);-webkit-transform:scale(1);transform:scale(1)}50%{opacity:1;-webkit-transform:scale(var(--fa-beat-fade-scale,1.125));transform:scale(var(--fa-beat-fade-scale,1.125))}}@-webkit-keyframes fa-flip{50%{-webkit-transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg));transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg))}}@keyframes fa-flip{50%{-webkit-transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg));transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg))}}@-webkit-keyframes fa-shake{0%{-webkit-transform:rotate(-15deg);transform:rotate(-15deg)}4%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}24%,8%{-webkit-transform:rotate(-18deg);transform:rotate(-18deg)}12%,28%{-webkit-transform:rotate(18deg);transform:rotate(18deg)}16%{-webkit-transform:rotate(-22deg);transform:rotate(-22deg)}20%{-webkit-transform:rotate(22deg);transform:rotate(22deg)}32%{-webkit-transform:rotate(-12deg);transform:rotate(-12deg)}36%{-webkit-transform:rotate(12deg);transform:rotate(12deg)}40%,to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}@keyframes fa-shake{0%{-webkit-transform:rotate(-15deg);transform:rotate(-15deg)}4%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}24%,8%{-webkit-transform:rotate(-18deg);transform:rotate(-18deg)}12%,28%{-webkit-transform:rotate(18deg);transform:rotate(18deg)}16%{-webkit-transform:rotate(-22deg);transform:rotate(-22deg)}20%{-webkit-transform:rotate(22deg);transform:rotate(22deg)}32%{-webkit-transform:rotate(-12deg);transform:rotate(-12deg)}36%{-webkit-transform:rotate(12deg);transform:rotate(12deg)}40%,to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.fa-rotate-90{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.fa-flip-vertical{-webkit-transform:scaleY(-1);transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{-webkit-transform:scale(-1);transform:scale(-1)}.fa-rotate-by{-webkit-transform:rotate(var(--fa-rotate-angle,none));transform:rotate(var(--fa-rotate-angle,none))}.fa-stack{display:inline-block;height:2em;position:relative;vertical-align:middle;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;z-index:var(--fa-stack-z-index,auto)}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:var(--fa-inverse,#fff)}.fa-sr-only,.fa-sr-only-focusable:not(:focus),.sr-only,.sr-only-focusable:not(:focus){clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.svg-inline--fa .fa-primary{fill:var(--fa-primary-color,currentColor);opacity:var(--fa-primary-opacity,1)}.svg-inline--fa .fa-secondary{fill:var(--fa-secondary-color,currentColor)}.svg-inline--fa .fa-secondary,.svg-inline--fa.fa-swap-opacity .fa-primary{opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-secondary{opacity:var(--fa-primary-opacity,1)}.svg-inline--fa mask .fa-primary,.svg-inline--fa mask .fa-secondary{fill:#000}.fa-duotone.fa-inverse,.fad.fa-inverse{color:var(--fa-inverse,#fff)}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="icon" href="/favicon-32x32.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="canonical" href="https://yangdongs.web.app/db_hw2/" data-baseprotocol="https:" data-basehost="yangdongs.web.app"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">Boston College SimpleDB 개선 과제 part 2</title><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="Yangdongs RSS Feed" href="/rss.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css vbubbu">.css-vbubbu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100vh;overflow-x:hidden;width:100%;}</style><main class="css-vbubbu e1strnqo0"><style data-emotion="css 1pe8cy1">.css-1pe8cy1{position:fixed;margin:10px 10px;z-index:5;}</style><div class="css-1pe8cy1 e1md2nih0"><style data-emotion="css 1qhl3ja">.css-1qhl3ja{display:grid;place-items:center;width:60px;height:60px;border-radius:20px;background-color:#4ccd97;color:#ffffff;font-size:40px;cursor:pointer;box-shadow:0 0 5px rgba(0, 0, 0, 0.2);-webkit-transition:background-color 0.6s,color 0.6s;transition:background-color 0.6s,color 0.6s;}.css-1qhl3ja:hover{background-color:#ffffff;color:#4ccd97;}@media (max-width: 768px){.css-1qhl3ja{width:45px;height:45px;font-size:30px;border-radius:15px;}}</style><div class="css-1qhl3ja e1md2nih1"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="compass" class="svg-inline--fa fa-compass " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M288 256C288 273.7 273.7 288 256 288C238.3 288 224 273.7 224 256C224 238.3 238.3 224 256 224C273.7 224 288 238.3 288 256zM0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM325.1 306.7L380.6 162.4C388.1 142.1 369 123.9 349.6 131.4L205.3 186.9C196.8 190.1 190.1 196.8 186.9 205.3L131.4 349.6C123.9 369 142.1 388.1 162.4 380.6L306.7 325.1C315.2 321.9 321.9 315.2 325.1 306.7V306.7z"></path></svg></div><style data-emotion="css 12ua5r7">.css-12ua5r7{margin:10px 10px;border-radius:20px;z-index:4;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:fixed;-webkit-transition:500ms;transition:500ms;left:-600px;box-shadow:0 0 5px rgba(0, 0, 0, 0.2);background-color:white;}</style><div class="css-12ua5r7 ee3oskm2"><style data-emotion="css x68nae">.css-x68nae{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;text-align:center;margin-top:5%;margin-bottom:10%;margin:10px;}</style><div class="css-x68nae ee3oskm1"><style data-emotion="css 58nrwj">.css-58nrwj{font-size:20px;margin:15px;}.css-58nrwj:hover{border-bottom:3px solid #4ccd97;}</style><a class="css-58nrwj ee3oskm0" href="/">Home</a><a class="css-58nrwj ee3oskm0" href="/post/">Post</a><a href="https://github.com/Yanghyeondong/tech_blog#readme" class="css-58nrwj ee3oskm0">About</a></div></div></div><style data-emotion="css-global gyifnl">@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');*{padding:0;margin:0;box-sizing:border-box;font-family:'Noto Sans KR',sans-serif;}html,body,#___gatsby{height:100%;}a,a:hover{color:inherit;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}</style><style data-emotion="css 16cz9yp">.css-16cz9yp{position:relative;width:100%;height:400px;}@media (max-width: 768px){.css-16cz9yp{height:300px;}}</style><div class="css-16cz9yp e1opi4mu1"><style data-emotion="css 1bjn9yo">.css-1bjn9yo{z-index:-1;width:100%;height:400px;object-fit:cover;-webkit-filter:brightness(0.25);filter:brightness(0.25);}@media (max-width: 768px){.css-1bjn9yo{height:300px;}}</style><div data-gatsby-image-wrapper="" style="position:absolute" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-1bjn9yo e1opi4mu0"><div style="max-width:5616px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;3744&#x27; width=&#x27;5616&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUCBAn/xAAXAQADAQAAAAAAAAAAAAAAAAADBAUH/9oADAMBAAIQAxAAAAHCmDVCKfXGgnoP/8QAGxAAAgIDAQAAAAAAAAAAAAAAAQMCBAUTFCL/2gAIAQEAAQUCNB0Q6tzlqfSMxri+3NzRMkf/xAAhEQADAAICAAcAAAAAAAAAAAABAgMEEQAhBRITFCJhgf/aAAgBAwEBPwHBXPfPm2WntsRKFmYUSjWPqHQmEZiJCfSGoFGbt5L3ynheDV2qr0VafMKsxoebR0NuD+a+hz//xAAfEQEAAQQCAwEAAAAAAAAAAAABEQIDEiEAURMxceH/2gAIAQIBAT8BxveLJKXbR1L7NT0639hI4XrtICDGpy/Of//EACMQAAECBQQDAQAAAAAAAAAAAAECEQADEiJRBCExQRNhccH/2gAIAQEABj8Cl2krmvS29tVKVHvosOcs0Jl03cKyTg78+hx7i3holk6ZC9TLQJSZ5mK6elZlEEeRKbHBALVFNZKj5FuVfc74gfMA/kf/xAAdEAEBAQACAgMAAAAAAAAAAAABESEAMUFxUYHh/9oACAEBAAE/IQG0cexFFhUE10C4lRDr5OuIMfEcarxjIoO3NSEuZ+ScdhntEVsLSLqHAd0Db6kQGVX2r6V8OjUMUqtWQ+uf/9oADAMBAAIAAwAAABD/AN//xAAYEQEBAQEBAAAAAAAAAAAAAAABESEAMf/aAAgBAwEBPxDXoyjODPN4BTjcwIniQAFfANwj3//EABkRAQEBAQEBAAAAAAAAAAAAAAERITEAQf/aAAgBAgEBPxB4MK2ICTwUULiCJ4saSqmV1uH15ff/xAAZEAEBAQEBAQAAAAAAAAAAAAABESEAMUH/2gAIAQEAAT8QiwJpIF+mcAPRyjUBhgAivpEi1hWLoHdSaiEVKqgVc5UrFHvA5OsSug3J8A9QCezU5OLQiSRaIotrWWH/2Q==" alt=""/><picture><source type="image/webp" data-srcset="/static/fd598b498e9c397c447258464db7e128/75a72/common1.webp 1404w,/static/fd598b498e9c397c447258464db7e128/79cd7/common1.webp 2808w,/static/fd598b498e9c397c447258464db7e128/5e37e/common1.webp 5616w" sizes="(min-width: 5616px) 5616px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 5616px) 5616px, 100vw" decoding="async" loading="lazy" data-src="/static/fd598b498e9c397c447258464db7e128/45aa4/common1.jpg" data-srcset="/static/fd598b498e9c397c447258464db7e128/5ecfb/common1.jpg 1404w,/static/fd598b498e9c397c447258464db7e128/028a7/common1.jpg 2808w,/static/fd598b498e9c397c447258464db7e128/45aa4/common1.jpg 5616w" alt="thumbnail"/></picture><noscript><picture><source type="image/webp" srcSet="/static/fd598b498e9c397c447258464db7e128/75a72/common1.webp 1404w,/static/fd598b498e9c397c447258464db7e128/79cd7/common1.webp 2808w,/static/fd598b498e9c397c447258464db7e128/5e37e/common1.webp 5616w" sizes="(min-width: 5616px) 5616px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 5616px) 5616px, 100vw" decoding="async" loading="lazy" src="/static/fd598b498e9c397c447258464db7e128/45aa4/common1.jpg" srcSet="/static/fd598b498e9c397c447258464db7e128/5ecfb/common1.jpg 1404w,/static/fd598b498e9c397c447258464db7e128/028a7/common1.jpg 2808w,/static/fd598b498e9c397c447258464db7e128/45aa4/common1.jpg 5616w" alt="thumbnail"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><style data-emotion="css lzjgtp">.css-lzjgtp{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;height:400px;margin:0 auto;padding:60px 0;color:#ffffff;}@media (max-width: 768px){.css-lzjgtp{height:330px;width:100%;padding:40px 20px;}}</style><div class="css-lzjgtp e1st1jau7"><style data-emotion="css 10qqw1">.css-10qqw1{display:-webkit-box;overflow:hidden;overflow-wrap:break-word;margin:auto 0;text-overflow:ellipsis;white-space:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;font-size:42px;font-weight:800;}@media (max-width: 768px){.css-10qqw1{font-size:30px;}}</style><div class="css-10qqw1 e1st1jau5">Boston College SimpleDB 개선 과제 part 2</div><style data-emotion="css 3gcnt2">.css-3gcnt2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;font-size:18px;font-weight:700;}@media (max-width: 768px){.css-3gcnt2{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:15px;font-weight:400;}}</style><div class="css-3gcnt2 e1st1jau4"><style data-emotion="css 5yjeco">.css-5yjeco{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:start;justify-content:start;}@media (max-width: 768px){.css-5yjeco{-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}</style><div class="css-5yjeco e1st1jau3"><style data-emotion="css 1b9df66">.css-1b9df66{margin:2px 5px;padding:1px 7px 4px 7px;border-radius:6px;background-color:#49ae8e;font-size:16px;font-weight:800;color:white;}@media (max-width: 768px){.css-1b9df66{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}</style><div class="css-1b9df66 e1st1jau2">DB</div><div class="css-1b9df66 e1st1jau2">Java</div><div class="css-1b9df66 e1st1jau2">Choice</div></div><style data-emotion="css 14b4j72">.css-14b4j72{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media (max-width: 768px){.css-14b4j72{margin:7px 7px;}}</style><div class="css-14b4j72 e1st1jau1"><style data-emotion="css nkt64x">.css-nkt64x{margin-right:10px;}</style><div class="css-nkt64x e1st1jau0"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="calendar-days" class="svg-inline--fa fa-calendar-days " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M160 32V64H288V32C288 14.33 302.3 0 320 0C337.7 0 352 14.33 352 32V64H400C426.5 64 448 85.49 448 112V160H0V112C0 85.49 21.49 64 48 64H96V32C96 14.33 110.3 0 128 0C145.7 0 160 14.33 160 32zM0 192H448V464C448 490.5 426.5 512 400 512H48C21.49 512 0 490.5 0 464V192zM64 304C64 312.8 71.16 320 80 320H112C120.8 320 128 312.8 128 304V272C128 263.2 120.8 256 112 256H80C71.16 256 64 263.2 64 272V304zM192 304C192 312.8 199.2 320 208 320H240C248.8 320 256 312.8 256 304V272C256 263.2 248.8 256 240 256H208C199.2 256 192 263.2 192 272V304zM336 256C327.2 256 320 263.2 320 272V304C320 312.8 327.2 320 336 320H368C376.8 320 384 312.8 384 304V272C384 263.2 376.8 256 368 256H336zM64 432C64 440.8 71.16 448 80 448H112C120.8 448 128 440.8 128 432V400C128 391.2 120.8 384 112 384H80C71.16 384 64 391.2 64 400V432zM208 384C199.2 384 192 391.2 192 400V432C192 440.8 199.2 448 208 448H240C248.8 448 256 440.8 256 432V400C256 391.2 248.8 384 240 384H208zM320 432C320 440.8 327.2 448 336 448H368C376.8 448 384 440.8 384 432V400C384 391.2 376.8 384 368 384H336C327.2 384 320 391.2 320 400V432z"></path></svg></div>2024.04.20.</div></div></div></div><style data-emotion="css hn6e83">.css-hn6e83{margin:auto auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}@media (min-width: 1200px){.css-hn6e83{margin-left:calc( 50% - 384px );}}@media (max-width: 768px){.css-hn6e83{width:100%;}}</style><div class="css-hn6e83 e6b6ljm0"><style data-emotion="css aco8as">.css-aco8as{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;margin:0 auto;padding:100px 0;word-break:break-all;line-height:2.5;font-size:18px;font-weight:400;}.css-aco8as p{padding:3px 0;}.css-aco8as strong{margin:0px 1px;font-size:18.3px;font-weight:800;}.css-aco8as h1,.css-aco8as h2{font-weight:800;margin-bottom:20px;}.css-aco8as h3{margin-bottom:0px;}.css-aco8as *+h1,.css-aco8as *+h2,.css-aco8as *+h3{margin-top:50px;}.css-aco8as *+h4{margin-top:25px;}.css-aco8as hr+h1,.css-aco8as hr+h2,.css-aco8as hr+h3{margin-top:0;}.css-aco8as hr+h4{margin-top:25px;}.css-aco8as h1{font-size:40px;}.css-aco8as h2{font-size:35px;}.css-aco8as h3{font-size:23px;color:#49ae8e;}.css-aco8as blockquote{margin:30px 10px;padding:5px 15px;border-left:2px solid #49ae8e;background-color:#f9f9f9;font-weight:400;}.css-aco8as blockquote li{font-size:18px;margin:0px 15px;padding:0px 10px 0px 5px;background-color:#f9f9f9;}.css-aco8as blockquote ol li::Marker{font-weight:800;color:#000;}.css-aco8as em{padding-right:8px;padding-left:3px;}.css-aco8as ol{margin-left:20px;padding:5px 0;}.css-aco8as ol li::Marker{font-weight:800;font-size:19px;color:#49ae8e;}.css-aco8as ul{margin:20px;margin-right:0px;}.css-aco8as ul li::Marker{content:"▶ ";font-weight:800;color:#49ae8e;}.css-aco8as li{font-size:17px;margin:10px 20px;padding-left:10px;padding-right:10px;background-color:#f9f9f9;border-radius:10px;}.css-aco8as li strong{font-size:17.5px;}.css-aco8as del{-webkit-text-decoration:line-through 3px solid rgba(0, 0, 0, .4);text-decoration:line-through 3px solid rgba(0, 0, 0, .4);}.css-aco8as hr{border:1px solid #000000;margin:100px 0;}.css-aco8as a{font-weight:800;color:#49ae8e;-webkit-text-decoration:underline 1px;text-decoration:underline 1px;text-underline-position:under;}.css-aco8as a:hover{color:#ffffff;background-color:#49ae8e;}.css-aco8as pre[class*='language-']{font-weight:300;padding:20px 30px;margin-bottom:15px;font-size:20px;border-radius:10px;border:1px solid #dddddd;}.css-aco8as pre[class*='language-']::-webkit-scrollbar-thumb{background:rgba(255, 255, 255, 0.5);}.css-aco8as pre[class*='language-'] *{font-family:'Roboto Mono',monospace;font-weight:400;}.css-aco8as code[class*='language-']{font-size:16px;margin-right:4px;}.css-aco8as :not(pre)>code[class*="language-"]{font-size:15px;margin-right:4px;margin-left:4px;color:#000000;background-color:#fafafa;border:1px solid #dddddd;padding:1px 4px 3px 4px;border-radius:5px;}.css-aco8as :not(pre)>code[class*="language-"]::selection{background-color:#dadada;}@media (max-width: 768px){.css-aco8as{width:100%;padding:80px 20px;line-height:2.0;font-size:16px;}.css-aco8as h1{font-size:26px;}.css-aco8as h2{font-size:23px;}.css-aco8as h3{font-size:20px;}.css-aco8as strong{margin:0px 3px;font-size:17px;font-weight:800;}.css-aco8as img{width:100%;}.css-aco8as hr{margin:50px 0;}.css-aco8as li{font-size:16px;}}</style><div class="css-aco8as e1ijh0y10"><p>이전 포스트 Boston College SimpleDB 개선 과제 part 1에서 이어집니다!</p>
<h3 id="simpledb란-주의-aws-simpledb아님" style="position:relative;"><a href="#simpledb%EB%9E%80-%EC%A3%BC%EC%9D%98-aws-simpledb%EC%95%84%EB%8B%98" aria-label="simpledb란 주의 aws simpledb아님 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SimpleDB란? (주의! AWS SimpleDB아님)</h3>
<p>Boston College의 Edward Sciore 교수님이 논문으로 발표한 Java 기반의 다중 사용자 DB입니다.<br>
관련 논문은 다음과 같습니다. <a href="https://dl.acm.org/doi/10.1145/1227504.1227498" target="_blank" rel="nofollow">SimpleDB: a simple java-based multiuser syst</a></p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 302px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/3f2e40f33f45999ea7c4f4d548074380/83034/001.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 180.20833333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAIAAAAGkY33AAAACXBIWXMAAAsTAAALEwEAmpwYAAADfUlEQVRIx31V69KiOBT0/Z/QKlQMuYfcJSj4qbOk2Yw7u7X9gzqEAOfS3TmUUqy1McYQgq8IFa4ihBArEGAPnpZSDiklpRRjzDl3u92GYRBC5Jz7vldK5ZwJIQiEEEop55xSylqbUjrknEMIwzDEGD+fz/v9/vwTr9fr34vP5zPGeAghXK9XIQRjbBgGVkErWvy9iNvr9RpC2P5sjBFCOOdSSoyxcRydc+M4cs6FEN57zrmU0jlnKzjnxpgt7ZSSc45SKoQIITDGlFLYja9orYdhoJRKKSmlWmvGWAhhexkFc86RM/IHpJSc8xZwzgkhSAfvb39GG1NK2GStRT8JId57pVTf99ZaxhiywCf2tFFVjFFrzTl3zqEEQggoME3Tz8/PPM/LskwVpZS926ICOWutpZRIVQhBKTXGlFJSSrfbLeeMN0GnQ4wRTULPUZKsQDn4RBsYmkcI2f6MUXHO53lGb0E1cPB+v2NCzrm5AiPYu42GnU4nIcRS8Xg8vq8IvrGuayll6zYYhpEgpf/BUEEp/c0wcF1rHWNUSkkprbUYgTFmHEfowVoLzRhjnHM55y1trXXf98MwgGHon5SSEMIY45yD/BiklPJ6vd5ut61h3nu8SQhBSt/J/7HYbvu+39MGE7z3psJaa4yRUmqtvfdIG4ttz97tnDO4XkpZlmWe5/v9Ps/zNE3zPK/r+ng8SsU8z4jvFXu3z+fz6XSSUuKr4xfayh/rnPONYSkldK89UBXjOOoK8ze01iAi4p0kIQStdduNhjvnwFAMTGsN2oIOcI6N21AiuD0MA/iM/3POz+czKAQnhPLHcdxGFWOEGWAHgqZ+6KQ9bW6xCwMkge6xA9pgjLVsY4zWWhgTtIBgr7k1yRiDYBxHxti6rp//wm69MUaYW9MwGoPKEXwDK7sNhRDa/el0gsKEEDCqbxmB7bBBSules/ceQwJP8PNSCo6Lhvf73YJlWX43DEV67621iHGypQoEMcacM+J9zqAndNN1HWPscrlQSruuI4Qcj0fU0nXd5XI5Ho993xNCuq7bfTuEgFMPZwqMdlmW5/MJu30+n8uyvF6vdjtN095tCBBDYoxBTwAE1KTWrnDIA6qH9NYKmN79C7htTojF1+u16zmEAHNCIjgNUQ7cC+cJqArrfTweB5z92ArroJSCD9ApynHOtYMO1v3Xy78AeAjEUDGghV0AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/3f2e40f33f45999ea7c4f4d548074380/a59e9/001.webp 192w,
/static/3f2e40f33f45999ea7c4f4d548074380/794ea/001.webp 302w"
              sizes="(max-width: 302px) 100vw, 302px"
              type="image/webp"
            />
          <source
            srcset="/static/3f2e40f33f45999ea7c4f4d548074380/3b721/001.png 192w,
/static/3f2e40f33f45999ea7c4f4d548074380/83034/001.png 302w"
            sizes="(max-width: 302px) 100vw, 302px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/3f2e40f33f45999ea7c4f4d548074380/83034/001.png"
            alt="."
            title="."
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span><br>
SimpleDB 컴포넌트 구조</p>
<h2 id="목표-midpoint-insertion-policy를-simpledb에-적용해-보자" style="position:relative;"><a href="#%EB%AA%A9%ED%91%9C-midpoint-insertion-policy%EB%A5%BC-simpledb%EC%97%90-%EC%A0%81%EC%9A%A9%ED%95%B4-%EB%B3%B4%EC%9E%90" aria-label="목표 midpoint insertion policy를 simpledb에 적용해 보자 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>목표: midpoint-insertion policy를 SimpleDB에 적용해 보자.</h2>
<ul>
<li>midpoint insertion은 MySQL InnoDB에 적용되어 있는 버퍼 정책입니다.</li>
<li>디스크에서 페이지를 읽어 버퍼 풀로 들여올 때, 리스트의 중간 부분(midpoint)에 페이지를 삽입하는 방식입니다.</li>
<li>read-ahead page, large scan(full table/index scan) 등으로 읽혀진 page들이 빨리 aged out 된다는 장점이 있습니다.</li>
</ul>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 347px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/63ba38717acd3551956626f112b356d9/c8500/001.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 161.97916666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAIAAACdAM/hAAAACXBIWXMAAAsTAAALEwEAmpwYAAADIElEQVQ4y52VTY/bNhCG9/9fc+kvKNBFgva0LdAeckgC7LapY1v+jO2VZFmyJFIih+TwQ1o5kLQxNo433nYwEAiCDzmceUe8qqrq4VtrmsZ0Vjlnjanr6nA4VFXlupnKOSFEXdfW2qvKucN3pqQsAAZJOqXlh9Xm5vbuzg89UkwzIlEVlFprlVLnYY0ISnlptqDFv0H49tNwGEUzQpeEoNFGa2PMs7BSymhUwFBwg6KyWiuBwLQE22EXYI2K81IILoABLwFYOxbcaK0QL8PASyn4iRujX3Sy+AorCT+C+9Rba7XWdV0/PRmAlQURwJ6FpVKz2SwIAm8yybIMhMAORiX2ye7vu1tW0v78/xz2yZ31Samapum19fDw8H3CjjF3sGGc/59sKwGIKggCQkgcxy+o8xOXEpSSq/U6TdNot2vhpgu7aZoObI4KQ9FKSkswSvQDLdtE+r6fpunuzMndDqgUKDmKo3GyG0bhP+vVKI5GcbTMUxCwXC79ILj3/Stn7WQyGY5G976vpMjTJM/3KNW+LF5PvV8Xs2tv9NNff76Zeq/n0z9WS5ByF0UgRFEULTyfzweDwWq9FsB3Wz+JQyVlCdxLs2lOBlF0u94M43iS5QtCtDXWWuec1vo07L5giKqUcrDPpiX/sNr89u79XbD1CjYhVCKeEUmP9Wlrs62RsZLxkgsQSnLgJStAcGsvtiRirzAlOEpoFdkWufVOnt+2ZFVV2yiK4zgIQ4UIAEdtU5JNvDFnxbParus67yxOEmOMlO3VOC+lBErz1WrZCkZ2P4PLjdGFLYGhBK2EM4gSen9hVyEpC8Jap8AIK3JGS2CXE6YRc+C/TMZvFvOfPw1e/X5z7Y2vZ9Obz0up21r9CEZEJmCcxN4+GSe7j/ebcRKP98kiS40xzjkAYIydh4+N3da/rrSAx7Z5bJ5DX6Dz8HGLw+EgBPj3K2tM89g1L4O/Pj2wCzfO2ZP5y3CSJNtoG4ZhEAS0KE5h51z/OB7jfGqMsTzPKaXRdss5f7qmhY9v6n6/70WWZRkhpP8SQiileZ4DAKW0X0MISZIEAL4Ai2ElWlkjtrIAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/63ba38717acd3551956626f112b356d9/a59e9/001.webp 192w,
/static/63ba38717acd3551956626f112b356d9/8f955/001.webp 347w"
              sizes="(max-width: 347px) 100vw, 347px"
              type="image/webp"
            />
          <source
            srcset="/static/63ba38717acd3551956626f112b356d9/3b721/001.png 192w,
/static/63ba38717acd3551956626f112b356d9/c8500/001.png 347w"
            sizes="(max-width: 347px) 100vw, 347px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/63ba38717acd3551956626f112b356d9/c8500/001.png"
            alt="."
            title="."
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
<h2 id="구현-및-테스트" style="position:relative;"><a href="#%EA%B5%AC%ED%98%84-%EB%B0%8F-%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-label="구현 및 테스트 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>구현 및 테스트</h2>
<h4 id="free-buffer-list-allocated-buffer-lru-list-기타-변수-선언-및-초기화" style="position:relative;"><a href="#free-buffer-list-allocated-buffer-lru-list-%EA%B8%B0%ED%83%80-%EB%B3%80%EC%88%98-%EC%84%A0%EC%96%B8-%EB%B0%8F-%EC%B4%88%EA%B8%B0%ED%99%94" aria-label="free buffer list allocated buffer lru list 기타 변수 선언 및 초기화 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Free buffer list, Allocated Buffer, LRU list, 기타 변수 선언 및 초기화</h4>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MidInsBufferMgr</span> <span class="token keyword">implements</span> <span class="token class-name">BufferMgr</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Buffer</span><span class="token punctuation">></span></span> free_list<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Buffer</span><span class="token punctuation">></span></span> lru_list<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BlockId</span><span class="token punctuation">,</span><span class="token class-name">Buffer</span><span class="token punctuation">></span></span> alloc_buffer<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">int</span> buff_size<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">int</span> hit_cnt<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">int</span> reference_cnt<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">long</span> <span class="token constant">MAX_TIME</span> <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token class-name">MidInsBufferMgr</span><span class="token punctuation">(</span><span class="token class-name">FileMgr</span> fm<span class="token punctuation">,</span> <span class="token class-name">LogMgr</span> lm<span class="token punctuation">,</span> <span class="token keyword">int</span> numbuffs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      buff_size <span class="token operator">=</span> numbuffs<span class="token punctuation">;</span>
      hit_cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      reference_cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      free_list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Buffer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      lru_list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Buffer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      alloc_buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BlockId</span><span class="token punctuation">,</span><span class="token class-name">Buffer</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>buff_size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
         free_list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Buffer</span><span class="token punctuation">(</span>fm<span class="token punctuation">,</span> lm<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      
   <span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">lru_list</code> 는 java의 <code class="language-text">LinkedList</code>로 구현하였다. 자바 공식홈페이지에 “Doubly-linked list implementation…” 로 설명되어있는 클래스이다. <code class="language-text">free_list</code>의 경우에도 편의를 위해 LinkedList로 구현하였다. 버퍼풀 초기화 시  버퍼들을 <code class="language-text">numbuff</code>만큼 생성, <code class="language-text">free list</code>에 삽입하기 위해 <code class="language-text">free_list.add </code>를 진행하였다. <code class="language-text">alloc_buffer</code>는 이전 과제와 동일하게 <code class="language-text">HashMap</code>으로 구현하였다. <code class="language-text">hit_cnt</code>, <code class="language-text">reference_cnt</code>은 hit ratio를 구하기위해 사용하며 <code class="language-text">MAX_TIME</code>은 pin에서 시간 초과를 확인하기위해 사용한다.</p>
<h4 id="lru-midpoint-insertion-기능-구현" style="position:relative;"><a href="#lru-midpoint-insertion-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84" aria-label="lru midpoint insertion 기능 구현 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>LRU MidPoint Insertion 기능 구현</h4>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">midIns</span><span class="token punctuation">(</span><span class="token class-name">Buffer</span> buff<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">int</span> size <span class="token operator">=</span> lru_list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         lru_list<span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span><span class="token punctuation">{</span>
         <span class="token keyword">int</span> pos <span class="token operator">=</span> <span class="token punctuation">(</span>size <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">/</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
         lru_list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pos<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> buff<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span></code></pre></div>
<p>LRU list 길이가 3이하면 LRU head로 삽입하고, 아닌 경우에는 LRU list의 head에서 5/8 지점에 페이지를 삽입하도록 하였다. ”<code class="language-text">(현재 LRU list 길이 * 5/8)</code> 의 다음 노드로 삽입” 공식 에따라 <code class="language-text">pos = (size * 5 / 8) + 1</code> 을 하였다. 소숫점일 경우 나누기에 의해 int 부분이 절사 된다. 리스트에 집어넣을때는 <code class="language-text">lru_list.add(pos-1, buff)</code> 를 하는데, pos-1인 이유는 리스트에서 첫번째를 0이 아닌 1로봐야 하기때문이다.</p>
<h4 id="available-기능-구현" style="position:relative;"><a href="#available-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84" aria-label="available 기능 구현 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>available() 기능 구현</h4>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">int</span> <span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">int</span> freenum <span class="token operator">=</span> free_list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">int</span> unpinnum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Buffer</span> buff <span class="token operator">:</span> lru_list<span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>buff<span class="token punctuation">.</span><span class="token function">isPinned</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> unpinnum <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> freenum <span class="token operator">+</span> unpinnum<span class="token punctuation">;</span>
   <span class="token punctuation">}</span></code></pre></div>
<p>Free list의 버퍼 개수와 unpin된 버퍼 개수를 합한 값을 구하기 위해 <code class="language-text">free_list.size()</code> 값을 구하고 lru_list 내 <code class="language-text">!buff.isPinned()</code> 인 경우의 개수를 누적하여 합을 리턴한다.</p>
<h4 id="touch-함수-구현" style="position:relative;"><a href="#touch-%ED%95%A8%EC%88%98-%EA%B5%AC%ED%98%84" aria-label="touch 함수 구현 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>touch() 함수 구현</h4>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">touch</span><span class="token punctuation">(</span><span class="token class-name">Buffer</span> buff<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token class-name">Boolean</span> valid <span class="token operator">=</span> lru_list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>valid<span class="token punctuation">)</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"touch error!!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      lru_list<span class="token punctuation">.</span><span class="token function">addFirst</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span></code></pre></div>
<p>LRU list에 있는 buffer가 hit되었을 때 (= hash map에 해당 buffer가 존재할 때) buffer를 new sublist의 head로 보낸다. 즉, pin이 되면 맨 앞으로 옮겨진다. 따라서 해당 동작을 touch라는 함수로 따로 구현하였다. <code class="language-text">lru_list.remove(buff)</code>을 통해 요청 받은 버퍼를 지우고, <code class="language-text">lru_list.addFirst(buff)</code>을 통해 맨앞에 넣게된다. 만약 없을경우 에러 메세지를 출력한다.</p>
<h4 id="waitingtoolong-설정" style="position:relative;"><a href="#waitingtoolong-%EC%84%A4%EC%A0%95" aria-label="waitingtoolong 설정 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>waitingTooLong() 설정</h4>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">waitingTooLong</span><span class="token punctuation">(</span><span class="token keyword">long</span> starttime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> starttime <span class="token operator">></span> <span class="token constant">MAX_TIME</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span></code></pre></div>
<p>exception 관련 코드는 vanilla의 코드를 그대로 가져왔다.</p>
<h4 id="pin-구현" style="position:relative;"><a href="#pin-%EA%B5%AC%ED%98%84" aria-label="pin 구현 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>pin() 구현</h4>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token class-name">Buffer</span> <span class="token function">pin</span><span class="token punctuation">(</span><span class="token class-name">BlockId</span> blk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
         <span class="token keyword">long</span> timestamp <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Buffer</span> buff <span class="token operator">=</span> <span class="token function">tryToPin</span><span class="token punctuation">(</span>blk<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">while</span> <span class="token punctuation">(</span>buff <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">waitingTooLong</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">wait</span><span class="token punctuation">(</span><span class="token constant">MAX_TIME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            buff <span class="token operator">=</span> <span class="token function">tryToPin</span><span class="token punctuation">(</span>blk<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>buff <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BufferAbortException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">else</span> <span class="token punctuation">{</span>reference_cnt<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
         <span class="token keyword">return</span> buff<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BufferAbortException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span></code></pre></div>
<p>pin()함수의 경우 이전 과제와 크게다르지 않다. 대부분다 동일하며, reference_cnt를 늘려주는 부분이 따로 존재한다.</p>
<h4 id="trytopin-구현" style="position:relative;"><a href="#trytopin-%EA%B5%AC%ED%98%84" aria-label="trytopin 구현 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>tryToPin() 구현</h4>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">Buffer</span> <span class="token function">tryToPin</span><span class="token punctuation">(</span><span class="token class-name">BlockId</span> blk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">Buffer</span> buff <span class="token operator">=</span> <span class="token function">findExistingBuffer</span><span class="token punctuation">(</span>blk<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>buff <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// not find in lru list(alloc_buffer)</span>
         buff <span class="token operator">=</span> <span class="token function">chooseFreeBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>buff <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
         alloc_buffer<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>buff<span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         buff<span class="token punctuation">.</span><span class="token function">assignToBlock</span><span class="token punctuation">(</span>blk<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token function">midIns</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">;</span>
         alloc_buffer<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>blk<span class="token punctuation">,</span>buff<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// find in lru list(alloc_buffer)</span>
         hit_cnt<span class="token operator">++</span><span class="token punctuation">;</span>
         <span class="token function">touch</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">;</span> 
      <span class="token punctuation">}</span>
      buff<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> buff<span class="token punctuation">;</span>
   <span class="token punctuation">}</span></code></pre></div>
<p>trypin()의 경우, 이전과 달라진 점이 있다. <code class="language-text">findExistingBuffer()</code>에 실패해서 새로운 버퍼를 <code class="language-text">chooseFreeBuffer()</code>로 할당받을 경우, (첫번째로 reference되는 페이지일 경우) block id를 해당 버퍼에 할당, LRU list에 삽입한다. 그리고 midpoint Insertion 로직에 따라 LRU list내 위치 조정 과정을 수행한다. 우선 <code class="language-text">alloc_buffer.remove</code>를 통해 현재 할당된 맵에서 해당 버퍼를 지우고, <code class="language-text">buff.assignToBlock(blk)</code>를 통해 주어진 blk로 초기화하게 된다. 이후 앞서 소개한 <code class="language-text">midIns()</code>를 통해서 해당 버퍼를 집어넣게된다. 또한,  <code class="language-text">findExistingBuffer(blk)</code>에 성공했을때는 buffer가 hit되었을 때를 의미하므로 hit_cnt를 증가시켜주고 앞서 설명한 <code class="language-text">touch()</code>를 수행하게 된다. <code class="language-text">buff.pin()</code>을 통해 pin 값도 늘려준다.</p>
<h4 id="findexistingbuffer-구현" style="position:relative;"><a href="#findexistingbuffer-%EA%B5%AC%ED%98%84" aria-label="findexistingbuffer 구현 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>findExistingBuffer() 구현</h4>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">Buffer</span> <span class="token function">findExistingBuffer</span><span class="token punctuation">(</span><span class="token class-name">BlockId</span> blk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>alloc_buffer<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>blk<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">Buffer</span> buff <span class="token operator">=</span> alloc_buffer<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>blk<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">return</span> buff<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span></code></pre></div>
<p>해당 함수의 경우에는 크게 달라진점이 없다. 버퍼에 대해 “Must keyed on the block” 를 만족하는 alloc_buffer를 항상 유지하면서, <code class="language-text">alloc_buffer.containsKey</code>를 통해 Map으로 블럭이 버퍼 안에 있는지 판별한다. 만약 있을경우, 해당 버퍼를 찾아서 리턴한다.</p>
<h4 id="choosefreebuffer" style="position:relative;"><a href="#choosefreebuffer" aria-label="choosefreebuffer permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>chooseFreeBuffer()</h4>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">Buffer</span> <span class="token function">chooseFreeBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token keyword">int</span> size <span class="token operator">=</span> free_list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token class-name">Buffer</span> buff <span class="token operator">=</span> free_list<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">return</span> buff<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span><span class="token punctuation">{</span>
         <span class="token keyword">int</span> lru_size <span class="token operator">=</span> lru_list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>lru_size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
         <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span> lru_size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">>=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">Buffer</span> buff <span class="token operator">=</span> lru_list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>buff<span class="token punctuation">.</span><span class="token function">isPinned</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
               buff<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               lru_list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token keyword">return</span> buff<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">chooseFreeBuffer()</code>의 경우 새롭게 추가된 부분이다. pin 메소드 호출 시 버퍼를 free list로부터 할당받고, 버퍼가 필요할 때 free buffer list의 head에서 버퍼를 제거 후 사용한다.<br>
우선 <code class="language-text">free_list</code>의 크기가 0 이상이라면 제일 앞 버퍼를 <code class="language-text">poll()</code>을 통해 뽑아낸다. 혹시 free list에 없다면, LRU list의 tail부터 탐색하여 첫번째 unpin된 버퍼를 flush 후, 해당 버퍼를 그대로 사용한다.<br>
즉, <code class="language-text">lru_list</code>를 뒤에서부터 순회하며 <code class="language-text">!buff.isPinned()</code> 을 만족하는 버퍼를 찾는순간 리스트에서 지워주고 flush한 다음 리턴해주게 된다.</p>
<h4 id="unpin" style="position:relative;"><a href="#unpin" aria-label="unpin permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>unpin()</h4>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">unpin</span><span class="token punctuation">(</span><span class="token class-name">Buffer</span> buff<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      buff<span class="token punctuation">.</span><span class="token function">unpin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>buff<span class="token punctuation">.</span><span class="token function">isPinned</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span></code></pre></div>
<p>unpin()함수의 경우 기존과 달라진 부분이 따로 없다. Buffer의 pin count 감소하고, Pin count가 0이면 기다리는 스레드들에게 알림을 보낸다.</p>
<h4 id="flushallint-txnum-함수-구현" style="position:relative;"><a href="#flushallint-txnum-%ED%95%A8%EC%88%98-%EA%B5%AC%ED%98%84" aria-label="flushallint txnum 함수 구현 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>flushAll(int txnum) 함수 구현</h4>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">flushAll</span><span class="token punctuation">(</span><span class="token keyword">int</span> txnum<span class="token punctuation">)</span><span class="token punctuation">{</span>

      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Buffer</span> buff <span class="token operator">:</span> lru_list<span class="token punctuation">)</span><span class="token punctuation">{</span>
         buff<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">while</span><span class="token punctuation">(</span>buff<span class="token punctuation">.</span><span class="token function">isPinned</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            buff<span class="token punctuation">.</span><span class="token function">unpin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         free_list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      lru_list<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      alloc_buffer<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span></code></pre></div>
<p>LRU list에 있는 버퍼들을 모두 flush하고, <code class="language-text">free list</code>에 빈 버퍼들을 추가하기 위해 lru 리스트의 모든 버퍼들에 대해 flush를 진행하고 <code class="language-text">free_list</code>에 추가했다. 그리고 pin되어있는 모든 버퍼들도 강제로 unpin시키고 flush 수행”을 위해 각 버퍼마다 <code class="language-text">pin == 0</code> 이 될때까지 unpin을 진행해 주었다.</p>
<h4 id="printstatus-구현" style="position:relative;"><a href="#printstatus-%EA%B5%AC%ED%98%84" aria-label="printstatus 구현 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>printStatus() 구현</h4>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"LRU list:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Buffer</span> buff <span class="token operator">:</span> lru_list<span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token class-name">String</span> is_pin <span class="token operator">=</span> <span class="token string">"unpinned"</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>buff<span class="token punctuation">.</span><span class="token function">isPinned</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> is_pin <span class="token operator">=</span> <span class="token string">"pinned"</span><span class="token punctuation">;</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Buffer "</span> <span class="token operator">+</span> buff<span class="token punctuation">.</span><span class="token function">getID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">": "</span> <span class="token operator">+</span> buff<span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> is_pin<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

   <span class="token punctuation">}</span></code></pre></div>
<p>저번 <code class="language-text">printStatus()</code> 와는 조금 다르게 <code class="language-text">alloc_buffer</code>가 아닌 LRU 리스트에 대해 정보를 출력하도록 하였다.
각 버퍼의 ID, block, pinnedStatus 를 출력하며, BlockId의 <code class="language-text">toString()</code> 메소드를 활용하였다. 자바의 반복문을 사용하면 자동으로 LRU list head부터 버퍼를 순차적으로 출력한다.</p>
<h4 id="gethitratio-구현" style="position:relative;"><a href="#gethitratio-%EA%B5%AC%ED%98%84" aria-label="gethitratio 구현 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>getHitRatio() 구현</h4>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getHitRatio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">float</span> hit_ratio <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>hit_cnt <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>reference_cnt<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>
      <span class="token class-name">BigDecimal</span> hit_ratio_bd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span>hit_ratio<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">BigDecimal</span> hit_ratio_bd_r2 <span class="token operator">=</span> hit_ratio_bd<span class="token punctuation">.</span><span class="token function">setScale</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">RoundingMode</span><span class="token punctuation">.</span><span class="token constant">HALF_UP</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> hit_ratio_bd_r2<span class="token punctuation">.</span><span class="token function">floatValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">getHitRatio()</code> 함수는 이전 과제와 크게 다르지 않다. 똑같이 <code class="language-text">tryToPin(blk)</code> 를 했을때 반환되는 buff가 널이 아닌경우, 즉 성공했을 경우에만(에러가 아닌 경우) <code class="language-text">reference_cnt++;</code>가 되고, <code class="language-text">findExistingBuffer(blk)</code> 의 결과값이 널이 아닐때, 즉 원하는 블럭을 찾았을 때만 hit_cnt++가 된다. 최종적으로는 <code class="language-text">cnt/reference cnt * 100 (%)</code> 공식과 <code class="language-text">BigDecimal</code>과 <code class="language-text">RoundingMode</code>를 사용해 소숫점 2자리까지 반올림하여 리턴한다.</p>
<h3 id="테스트" style="position:relative;"><a href="#%ED%85%8C%EC%8A%A4%ED%8A%B8" aria-label="테스트 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>테스트</h3>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferMgrTest</span> <span class="token punctuation">{</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
      <span class="token class-name">SimpleDB</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDB</span><span class="token punctuation">(</span><span class="token string">"buffermgrtest"</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"midIns"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// only 3 buffers</span>
      <span class="token class-name">BufferMgr</span> bm <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">bufferMgr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span>생략<span class="token punctuation">)</span>

      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Final Buffer Allocation:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>buff<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">Buffer</span> b <span class="token operator">=</span> buff<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> 
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"buff["</span><span class="token operator">+</span>i<span class="token operator">+</span><span class="token string">"] pinned to block "</span> <span class="token operator">+</span> b<span class="token punctuation">.</span><span class="token function">block</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

결과
<span class="token class-name">Available</span> buffers<span class="token operator">:</span> <span class="token number">0</span>
<span class="token class-name">Attempting</span> <span class="token keyword">to</span> <span class="token namespace">pin</span> block <span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token class-name">Exception</span><span class="token operator">:</span> <span class="token class-name">No</span> available buffers

<span class="token class-name">Final</span> <span class="token class-name">Buffer</span> <span class="token class-name">Allocation</span><span class="token operator">:</span>
buff<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> pinned <span class="token keyword">to</span> <span class="token namespace">block</span> <span class="token punctuation">[</span>file testfile<span class="token punctuation">,</span> block <span class="token number">0</span><span class="token punctuation">]</span>
buff<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> pinned <span class="token keyword">to</span> <span class="token namespace">block</span> <span class="token punctuation">[</span>file testfile<span class="token punctuation">,</span> block <span class="token number">0</span><span class="token punctuation">]</span>
buff<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> pinned <span class="token keyword">to</span> <span class="token namespace">block</span> <span class="token punctuation">[</span>file testfile<span class="token punctuation">,</span> block <span class="token number">1</span><span class="token punctuation">]</span>
buff<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> pinned <span class="token keyword">to</span> <span class="token namespace">block</span> <span class="token punctuation">[</span>file testfile<span class="token punctuation">,</span> block <span class="token number">3</span><span class="token punctuation">]</span></code></pre></div>
<p>과제 명세에 기본으로 소개되어있는 코드다. block 3를 pin 할때는 이미 블록이 꽉 차있기 때문에 Available buffers 가 0가 되는것이 맞으며, Exception 관련 코드도 잘 작동함을 알 수 있다. Final Buffer Allocation 의 결과도 기존과 동일함을 알 수 있다.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferMgrTest</span> <span class="token punctuation">{</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
      <span class="token class-name">SimpleDB</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDB</span><span class="token punctuation">(</span><span class="token string">"buffermgrtest"</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">"midIns"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">BufferMgr</span> bm <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">bufferMgr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token class-name">Buffer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Buffer</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
      buff<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      bm<span class="token punctuation">.</span><span class="token function">unpin</span><span class="token punctuation">(</span>buff<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
      buff<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">unpin</span><span class="token punctuation">(</span>buff<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
      buff<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      buff<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

결과
<span class="token constant">LRU</span> list<span class="token operator">:</span>
<span class="token class-name">Buffer</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">3</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">2</span><span class="token punctuation">]</span> unpinned
<span class="token class-name">Buffer</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">1</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">0</span><span class="token punctuation">]</span> unpinned
<span class="token constant">LRU</span> list<span class="token operator">:</span>
<span class="token class-name">Buffer</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">3</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">2</span><span class="token punctuation">]</span> unpinned
<span class="token class-name">Buffer</span> <span class="token number">4</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">4</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">1</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">0</span><span class="token punctuation">]</span> unpinned</code></pre></div>
<p>과제 명세의 예제 &#x3C;4개의 버퍼, test file의 블럭 0번 ~ 3번이 차례로 reference(pin) 된 후, block 2번과 0번이 unpin 되었을 때> 와 동일한 결과가 잘 관찰된다.</p>
<p>hit ratio: 33.33
위의 경우에 대하여 hit ratio 도 정상적으로 잘 출력된다.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferMgrTest</span> <span class="token punctuation">{</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
      <span class="token class-name">SimpleDB</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDB</span><span class="token punctuation">(</span><span class="token string">"buffermgrtest"</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">"midIns"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">BufferMgr</span> bm <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">bufferMgr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token class-name">Buffer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Buffer</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      buff<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
마지막 결과
<span class="token constant">LRU</span> list<span class="token operator">:</span>
<span class="token class-name">Buffer</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">13</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">12</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">4</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">14</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">6</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">16</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">7</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">17</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">5</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">15</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">11</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">10</span><span class="token punctuation">]</span> pinned
<span class="token constant">LRU</span> list<span class="token operator">:</span>
<span class="token class-name">Buffer</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">13</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">12</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">4</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">14</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">6</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">16</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">7</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">17</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">8</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">18</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">5</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">15</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">11</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">10</span><span class="token punctuation">]</span> pinned</code></pre></div>
<p>위의 코드는 총 8개의 버퍼를 pin 해본 것이다. 과제 명세의 그림</p>
<p>처럼 8개의 리스트에서 9번째 블록(block 18)이 들어가는 위치는 앞에서 6번째로 잘 들어가는 모습을 보인다.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferMgrTest</span> <span class="token punctuation">{</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
      <span class="token class-name">SimpleDB</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDB</span><span class="token punctuation">(</span><span class="token string">"buffermgrtest"</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">"midIns"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">BufferMgr</span> bm <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">bufferMgr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token class-name">Buffer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Buffer</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      buff<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">unpin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">unpin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">flushAll</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      buff<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span> <span class="token operator">=</span> bm<span class="token punctuation">.</span><span class="token function">pin</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BlockId</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      bm<span class="token punctuation">.</span><span class="token function">printStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
결과
<span class="token constant">LRU</span> list<span class="token operator">:</span>
<span class="token constant">LRU</span> list<span class="token operator">:</span>
<span class="token class-name">Buffer</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">13</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">12</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">4</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">14</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">11</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">10</span><span class="token punctuation">]</span> pinned
<span class="token constant">LRU</span> list<span class="token operator">:</span>
<span class="token class-name">Buffer</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">10</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">13</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">12</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">4</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">14</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">11</span><span class="token punctuation">]</span> pinned
<span class="token constant">LRU</span> list<span class="token operator">:</span>
<span class="token class-name">Buffer</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">10</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">13</span><span class="token punctuation">]</span> unpinned
<span class="token class-name">Buffer</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">12</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">4</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">14</span><span class="token punctuation">]</span> unpinned
<span class="token class-name">Buffer</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">11</span><span class="token punctuation">]</span> pinned
<span class="token constant">LRU</span> list<span class="token operator">:</span>
<span class="token class-name">Buffer</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">10</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">13</span><span class="token punctuation">]</span> unpinned
<span class="token class-name">Buffer</span> <span class="token number">4</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">20</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">12</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">11</span><span class="token punctuation">]</span> pinned
<span class="token constant">LRU</span> list<span class="token operator">:</span>
<span class="token constant">LRU</span> list<span class="token operator">:</span>
<span class="token class-name">Buffer</span> <span class="token number">4</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">32</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">31</span><span class="token punctuation">]</span> pinned
<span class="token class-name">Buffer</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token punctuation">[</span>file test<span class="token punctuation">,</span> block <span class="token number">30</span><span class="token punctuation">]</span> pinned</code></pre></div>
<p>우선 제일 처음 pin 하기 전에는 LRU list 에 아무것도 없다가 그 다음부터 순차적으로 들어간다. 그리고 기존의 10을 새롭게 pin하자 정상적으로 LRU 리스트의 제일 앞으로 가는 모습을 보여준다. 그리고 free list가 없는 상태에서 새로 pin을 요구할 경우 가장 뒤에있는 unpin 버퍼인 buffer 4를 선택하여 flush하고 새로 블럭 20을 할당하여 중간에 mid insert를 하는 모습을 보여준다. 그리고 flush all을 하면 LRU와 해시 맵에서 모든 버퍼가 제거된다. 이후 새롭게 넣으면 다시 잘 출력되는 모습을 보여준다.</p>
<h2 id="source" style="position:relative;"><a href="#source" aria-label="source permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Source</h2>
<ul>
<li>『SimpleDB: a simple java-based multiuser syst for teaching database internals』<br>
<em>Edward Sciore - 지음</em><br>
<a href="https://dl.acm.org/doi/10.1145/1227504.1227498" target="_blank" rel="nofollow">https://dl.acm.org/doi/10.1145/1227504.1227498</a></li>
</ul></div><style data-emotion="css pit38s">.css-pit38s{height:auto;}</style><div class="css-pit38s etse75s1"><style data-emotion="css v7bn0g">.css-v7bn0g{position:-webkit-sticky;position:sticky;top:50px;display:inline-block;margin:120px 40px;margin-right:0px;height:auto;width:200px;font-size:14.5px;border-left:3px solid #4ccd97;}@media (max-width: 1200px){.css-v7bn0g{display:none;}}.css-v7bn0g li{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:5px;color:gray;}.css-v7bn0g ul{margin-left:10px;padding:7px 5px;list-style:none;}.css-v7bn0g a:hover{-webkit-transition:0.3s;transition:0.3s;font-size:15px;font-weight:700;color:#433E49;}</style><div class="css-v7bn0g etse75s0"><ul>
<li>
<ul>
<li><a href="#simpledb%EB%9E%80-%EC%A3%BC%EC%9D%98-aws-simpledb%EC%95%84%EB%8B%98">SimpleDB란? (주의! AWS SimpleDB아님)</a></li>
</ul>
</li>
<li>
<p><a href="#%EB%AA%A9%ED%91%9C-midpoint-insertion-policy%EB%A5%BC-simpledb%EC%97%90-%EC%A0%81%EC%9A%A9%ED%95%B4-%EB%B3%B4%EC%9E%90">목표: midpoint-insertion policy를 SimpleDB에 적용해 보자.</a></p>
</li>
<li>
<p><a href="#%EA%B5%AC%ED%98%84-%EB%B0%8F-%ED%85%8C%EC%8A%A4%ED%8A%B8">구현 및 테스트</a></p>
<ul>
<li>
<ul>
<li><a href="#free-buffer-list-allocated-buffer-lru-list-%EA%B8%B0%ED%83%80-%EB%B3%80%EC%88%98-%EC%84%A0%EC%96%B8-%EB%B0%8F-%EC%B4%88%EA%B8%B0%ED%99%94">Free buffer list, Allocated Buffer, LRU list, 기타 변수 선언 및 초기화</a></li>
<li><a href="#lru-midpoint-insertion-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84">LRU MidPoint Insertion 기능 구현</a></li>
<li><a href="#available-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84">available() 기능 구현</a></li>
<li><a href="#touch-%ED%95%A8%EC%88%98-%EA%B5%AC%ED%98%84">touch() 함수 구현</a></li>
<li><a href="#waitingtoolong-%EC%84%A4%EC%A0%95">waitingTooLong() 설정</a></li>
<li><a href="#pin-%EA%B5%AC%ED%98%84">pin() 구현</a></li>
<li><a href="#trytopin-%EA%B5%AC%ED%98%84">tryToPin() 구현</a></li>
<li><a href="#findexistingbuffer-%EA%B5%AC%ED%98%84">findExistingBuffer() 구현</a></li>
<li><a href="#choosefreebuffer">chooseFreeBuffer()</a></li>
<li><a href="#unpin">unpin()</a></li>
<li><a href="#flushallint-txnum-%ED%95%A8%EC%88%98-%EA%B5%AC%ED%98%84">flushAll(int txnum) 함수 구현</a></li>
<li><a href="#printstatus-%EA%B5%AC%ED%98%84">printStatus() 구현</a></li>
<li><a href="#gethitratio-%EA%B5%AC%ED%98%84">getHitRatio() 구현</a></li>
</ul>
</li>
<li>
<p><a href="#%ED%85%8C%EC%8A%A4%ED%8A%B8">테스트</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#source">Source</a></p>
</li>
</ul></div></div></div><style data-emotion="css qi68kj">.css-qi68kj{width:768px;margin:auto auto;padding:0 10px;}@media (max-width: 768px){.css-qi68kj{width:100%;padding:0 20px;}}</style><div class="css-qi68kj elyfc7a0"><div id="disqus_thread"></div></div><style data-emotion="css 9w9jmx">.css-9w9jmx{display:grid;place-items:center;margin-top:auto;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}@media (max-width: 768px){.css-9w9jmx{font-size:13px;}}</style><footer class="css-9w9jmx e1oae0v81"><style data-emotion="css chvw2h">.css-chvw2h{width:80px;height:80px;background-image:url('bartender.png');-webkit-background-size:contain;background-size:contain;margin:20px auto 0px auto;}</style><div class="css-chvw2h e1oae0v80"></div>Just an developer with drinks<br/>2022 HyeonDong, Powered By Gatsby.</footer></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/db_hw2/";window.___webpackCompilationHash="9f02d3577a10c9d74d66";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c9fa82aa5b1f9c65f078.js"],"app":["/app-e9f3f84a858e449c6845.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-c686bcb9fd021576da4f.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-2d1a635f9e34aa3c993c.js"],"component---src-pages-post-tsx":["/component---src-pages-post-tsx-66acd32db55f17007543.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-676c0d609cc6ccc353e7.js"]};/*]]>*/</script><script src="/polyfill-c9fa82aa5b1f9c65f078.js" nomodule=""></script><script src="/app-e9f3f84a858e449c6845.js" async=""></script><script src="/framework-c57a9454c0e3bef16c3b.js" async=""></script><script src="/webpack-runtime-809d137626842fa47dba.js" async=""></script></body></html>