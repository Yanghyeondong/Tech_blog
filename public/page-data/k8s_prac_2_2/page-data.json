{"componentChunkName":"component---src-templates-post-template-tsx","path":"/k8s_prac_2_2/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p><em>해당 포스트는 교재 『쿠버네티스 교과서』를 활용하며,</em><br>\n<em>환경은 Kubernetes v1.28. Docker Desktop으로 진행합니다.</em></p>\n<h2 id=\"개념-요약\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EB%85%90-%EC%9A%94%EC%95%BD\" aria-label=\"개념 요약 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개념 요약</h2>\n<h3 id=\"컨트롤러-객체\" style=\"position:relative;\"><a href=\"#%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC-%EA%B0%9D%EC%B2%B4\" aria-label=\"컨트롤러 객체 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>컨트롤러 객체</h3>\n<p>다른 리소스를 관리하는 k8s 리소스.<br>\nAPI와 연동하며, 시스템의 현재 상태를 바람직한 상태로 만들려고 한다.<br>\n레이블 셀렉터를 통해 자신이 관리하는 리소스를 식별한다.</p>\n<h3 id=\"디플로이먼트\" style=\"position:relative;\"><a href=\"#%EB%94%94%ED%94%8C%EB%A1%9C%EC%9D%B4%EB%A8%BC%ED%8A%B8\" aria-label=\"디플로이먼트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>디플로이먼트</h3>\n<p>파드를 관리하는 객체.<br>\n특정 노드에서 파드가 유실되면 다른 노드에서 실행한다.<br>\n디플로이먼트가 관리하는 파드는 서로 다른 노드에서 동작할수도 있다.<br>\n레이블 셀렉터를 통해 자신이 관리하는 파드를 식별한다.</p>\n<h3 id=\"애플리케이션-매니페스트\" style=\"position:relative;\"><a href=\"#%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%A7%A4%EB%8B%88%ED%8E%98%EC%8A%A4%ED%8A%B8\" aria-label=\"애플리케이션 매니페스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>애플리케이션 매니페스트</h3>\n<p>애플리케이션의 배포에 필요한 내용들이 기술되어있는 스크립트.<br>\n형상 관리 도구등을 통하여 애플리케이션을 관리하고, 다른 k8s 클러스터에서도 동일한 애플리케이션 배포가 가능하도록 해준다.</p>\n<h3 id=\"yaml\" style=\"position:relative;\"><a href=\"#yaml\" aria-label=\"yaml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>YAML</h3>\n<p>Json 포맷의 불편한점을 개선한 상위호환 확장자. 주석 사용가능, 쌍따옴표 생략 등…<br>\nk8s의 애플리케이션 매니페스트는 YAML로 저장이 가능하다.</p>\n<h2 id=\"실습\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%8A%B5\" aria-label=\"실습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실습</h2>\n<h3 id=\"주요-요점들\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9A%94-%EC%9A%94%EC%A0%90%EB%93%A4\" aria-label=\"주요 요점들 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주요 요점들</h3>\n<ul>\n<li>디버깅을 위해 원하는 파드를 컨트롤러 객체에서 분리하여(레이블 정보 변경) 직접 접속할 수 있다.</li>\n<li>디플로이먼트를 생성하면 디플로이먼트가 k8s api를 확인하고 자동으로 파드를 만든다.</li>\n<li>k8s에서는 key-value 쌍을 통해서 리소스끼리 연결하거나(디플로이먼트-파드) 레이블에 원하는 값을 담는다.</li>\n<li>디플로이먼트가 생성한 파드 이름은 객체 이름 뒤에 무작위 문자열이 붙는다.</li>\n<li>레이블 정보를 직접 수정하면 디플로이먼트가 해당 파드를 더이상 인식하지 못한다.</li>\n<li>exec와 레이블 정보로 pod에 접근이 가능하다.</li>\n<li>컨트롤러 객체는 해당 객체가 만든 리소스를 관리한다. 외부 간섭이 발생해도, 이를 다시 복구한다.</li>\n</ul>\n<h3 id=\"매니페스트-파일\" style=\"position:relative;\"><a href=\"#%EB%A7%A4%EB%8B%88%ED%8E%98%EC%8A%A4%ED%8A%B8-%ED%8C%8C%EC%9D%BC\" aria-label=\"매니페스트 파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>매니페스트 파일</h3>\n<p>pod.yaml</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\r\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\r\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> hello<span class=\"token punctuation\">-</span>kiamol<span class=\"token punctuation\">-</span><span class=\"token number\">3</span>\r\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> web\r\n      <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> kiamol/ch02<span class=\"token punctuation\">-</span>hello<span class=\"token punctuation\">-</span>kiamol</code></pre></div>\n<p>deployment.yaml</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1\r\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment\r\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> hello<span class=\"token punctuation\">-</span>kiamol<span class=\"token punctuation\">-</span><span class=\"token number\">4</span>\r\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\r\n      <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> hello<span class=\"token punctuation\">-</span>kiamol<span class=\"token punctuation\">-</span><span class=\"token number\">4</span>\r\n  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\r\n      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> hello<span class=\"token punctuation\">-</span>kiamol<span class=\"token punctuation\">-</span><span class=\"token number\">4</span>\r\n    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\r\n      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\r\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> web\r\n          <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> kiamol/ch02<span class=\"token punctuation\">-</span>hello<span class=\"token punctuation\">-</span>kiamol</code></pre></div>\n<h3 id=\"파드-생성-및-확인\" style=\"position:relative;\"><a href=\"#%ED%8C%8C%EB%93%9C-%EC%83%9D%EC%84%B1-%EB%B0%8F-%ED%99%95%EC%9D%B8\" aria-label=\"파드 생성 및 확인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>파드 생성 및 확인</h3>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> <span class=\"token comment\"># 조금 전과 같은 웹 애플리케이션을 실행하는 디플로이먼트</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> <span class=\"token comment\"># hello-kiamol-2를 생성</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> kubectl create deployment hello-kiamol-2 <span class=\"token operator\">--</span>image=kiamol/ch02-hello-kiamol\r\ndeployment<span class=\"token punctuation\">.</span>apps/hello-kiamol-2 created\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> <span class=\"token comment\"># 파드의 목록을 출력</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> kubectl get pods\r\nNAME                              READY   STATUS    RESTARTS   AGE \r\nhello-kiamol                      1/1     Running   1          102m\r\nhello-kiamol-2-787f8db75d-n9tzt   1/1     Running   0          4s</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> <span class=\"token comment\"># 디플로이먼트가 부여한 파드의 레이블 출력</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> kubectl get deploy hello-kiamol-2 <span class=\"token operator\">-</span>o jsonpath=<span class=\"token string\">'{.spec.template.metadata.labels}'</span>\r\n<span class=\"token punctuation\">{</span><span class=\"token string\">\"app\"</span>:<span class=\"token string\">\"hello-kiamol-2\"</span><span class=\"token punctuation\">}</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> <span class=\"token comment\"># 앞서 출력한 레이블을 가진 파드의 목록 출력</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> kubectl get pods <span class=\"token operator\">-</span>l app=hello-kiamol-2\r\nNAME                              READY   STATUS    RESTARTS   AGE\r\nhello-kiamol-2-787f8db75d-n9tzt   1/1     Running   0          23m\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> <span class=\"token comment\"># 모든 파드의 이름과 레이블 확인</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> kubectl get pods <span class=\"token operator\">-</span>o custom-columns=NAME:metadata<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>LABELS:metadata<span class=\"token punctuation\">.</span>labels\r\nNAME                              LABELS\r\nhello-kiamol                      map<span class=\"token namespace\">[run:hello-kiamol]</span>\r\nhello-kiamol-2-787f8db75d-n9tzt   map<span class=\"token namespace\">[app:hello-kiamol-2 pod-template-hash:787f8db75d]</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> <span class=\"token comment\"># 디플로이먼트가 생성한 파드의 app 레이블 수정</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> kubectl label pods <span class=\"token operator\">-</span>l app=hello-kiamol-2 <span class=\"token operator\">--</span>overwrite app=hello-kiamol-x\r\npod/hello-kiamol-2-787f8db75d-n9tzt labeled\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> <span class=\"token comment\"># 파드가 또 하나 생성됐다</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> kubectl get pods <span class=\"token operator\">-</span>o custom-columns=NAME:metadata<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>LABELS:metadata<span class=\"token punctuation\">.</span>labels\r\nNAME                              LABELS\r\nhello-kiamol                      map<span class=\"token namespace\">[run:hello-kiamol]</span>\r\nhello-kiamol-2-787f8db75d-n9tzt   map<span class=\"token namespace\">[app:hello-kiamol-x pod-template-hash:787f8db75d]</span>\r\nhello-kiamol-2-787f8db75d-tfshk   map<span class=\"token namespace\">[app:hello-kiamol-2 pod-template-hash:787f8db75d]</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> <span class=\"token comment\"># app이라는 레이블이 부여된 모든 파드의 이름과 레이블 출력</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> kubectl get pods <span class=\"token operator\">-</span>l app <span class=\"token operator\">-</span>o custom-columns=NAME:metadata<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>LABELS:metadata<span class=\"token punctuation\">.</span>labels\r\nNAME                              LABELS\r\nhello-kiamol-2-787f8db75d-n9tzt   map<span class=\"token namespace\">[app:hello-kiamol-x pod-template-hash:787f8db75d]</span>\r\nhello-kiamol-2-787f8db75d-tfshk   map<span class=\"token namespace\">[app:hello-kiamol-2 pod-template-hash:787f8db75d]</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> <span class=\"token comment\"># 디플로이먼트의 관리를 벗어난 파드의 app 레이블을 원래대로 수정</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> kubectl label pods <span class=\"token operator\">-</span>l app=hello-kiamol-x <span class=\"token operator\">--</span>overwrite app=hello-kiamol-2\r\npod/hello-kiamol-2-787f8db75d-n9tzt labeled\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> <span class=\"token comment\"># 파드의 목록을 다시 한 번 확인</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> kubectl get pods <span class=\"token operator\">-</span>l app <span class=\"token operator\">-</span>o custom-columns=NAME:metadata<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>LABELS:metadata<span class=\"token punctuation\">.</span>labels\r\nNAME                              LABELS\r\nhello-kiamol-2-787f8db75d-n9tzt   map<span class=\"token namespace\">[app:hello-kiamol-2 pod-template-hash:787f8db75d]</span>\r\nhello-kiamol-2-787f8db75d-tfshk   map<span class=\"token namespace\">[app:hello-kiamol-2 pod-template-hash:787f8db75d]</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> kubectl get pods <span class=\"token operator\">-</span>l app <span class=\"token operator\">-</span>o custom-columns=NAME:metadata<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>LABELS:metadata<span class=\"token punctuation\">.</span>labels\r\nNAME                              LABELS\r\nhello-kiamol-2-787f8db75d-n9tzt   map<span class=\"token namespace\">[app:hello-kiamol-2 pod-template-hash:787f8db75d]</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">hello-kiamol-2-787f8db75d-n9tzt   map<span class=\"token namespace\">[app:hello-kiamol-2 pod-template-hash:787f8db75d]</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice> kubectl port-forward deploy/hello-kiamol-2 8080:80\r\nForwarding <span class=\"token keyword\">from</span> 127<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>1:8080 <span class=\"token operator\">-</span>> 80\r\nForwarding <span class=\"token keyword\">from</span> <span class=\"token punctuation\">[</span>::1<span class=\"token punctuation\">]</span>:8080 <span class=\"token operator\">-</span>> 80\r\nHandling connection <span class=\"token keyword\">for</span> 8080\r\nHandling connection <span class=\"token keyword\">for</span> 8080</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\">C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> kubectl apply <span class=\"token operator\">-</span>f pod<span class=\"token punctuation\">.</span>yaml\r\npod/hello-kiamol-3 created\r\n\r\nC:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> kubectl get pods\r\nNAME             READY   STATUS    RESTARTS   AGE\r\nhello-kiamol-3   1/1     Running   0          8s\r\n\r\nC:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> kubectl apply <span class=\"token operator\">-</span>f https:<span class=\"token operator\">/</span><span class=\"token operator\">/</span>raw<span class=\"token punctuation\">.</span>githubusercontent<span class=\"token punctuation\">.</span>com/sixeyed/kiamol/master/ch02/pod<span class=\"token punctuation\">.</span>yaml\r\npod/hello-kiamol-3 unchanged\r\n\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> <span class=\"token comment\"># 디플로이먼트의 매니페스트로 애플리케이션 실행</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> kubectl apply <span class=\"token operator\">-</span>f deployment<span class=\"token punctuation\">.</span>yaml\r\ndeployment<span class=\"token punctuation\">.</span>apps/hello-kiamol-4 created\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> <span class=\"token comment\"># 새로운 디플로이 먼트가 만든 파드 찾기</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> kubectl get pods <span class=\"token operator\">-</span>l app=hello-kiamol-4\r\nNAME                              READY   STATUS    RESTARTS   AGE     \r\nhello-kiamol-4-568f7fbc88-d5g9g   1/1     Running   0          29s</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> <span class=\"token comment\"># 처음 실행한 파드의 내부 IP 주소 확인</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> kubectl get pod hello-kiamol <span class=\"token operator\">-</span>o custom-columns=NAME:metadata<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span>POD_IP:status<span class=\"token punctuation\">.</span>podIP   \r\nNAME           POD_IP\r\nhello-kiamol   10<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>43\r\n\r\n<span class=\"token comment\"># 파드 내부와 연결할 대화형 셸 실행</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> kubectl exec <span class=\"token operator\">-</span>it \r\nhello-kiamol sh\r\nkubectl exec <span class=\"token namespace\">[POD]</span> <span class=\"token namespace\">[COMMAND]</span> is DEPRECATED and will be removed in a future version<span class=\"token punctuation\">.</span> Use kubectl exec <span class=\"token namespace\">[POD]</span> <span class=\"token operator\">--</span> <span class=\"token namespace\">[COMMAND]</span> instead<span class=\"token punctuation\">.</span>\r\n<span class=\"token operator\">/</span> <span class=\"token comment\"># hostname -i</span>\r\n10<span class=\"token punctuation\">.</span>1<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>43\r\n<span class=\"token operator\">/</span> <span class=\"token comment\"># wget -O - http://localhost | head -n 4</span>\r\nConnecting to localhost <span class=\"token punctuation\">(</span>127<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>1:80<span class=\"token punctuation\">)</span>      \r\nwriting to stdout\r\n&lt;html>\r\n<span class=\"token operator\">-</span>                      &lt;body>\r\n100%     &lt;h1>\r\n      Hello <span class=\"token keyword\">from</span> Chapter 2!\r\n<span class=\"token punctuation\">|</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token punctuation\">|</span>   353  0:00:00 ETA\r\nwritten to stdout\r\n<span class=\"token operator\">/</span> <span class=\"token comment\"># ls</span>\r\nbin                   media                 srv\r\ndev                   mnt                   sys\r\ndocker-entrypoint<span class=\"token punctuation\">.</span>d   opt                   tmp\r\ndocker-entrypoint<span class=\"token punctuation\">.</span>sh  proc                  usr\r\netc                   root                  <span class=\"token keyword\">var</span>\r\nhome                  run\r\nlib                   sbin\r\n<span class=\"token operator\">/</span> <span class=\"token comment\"># exit</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> <span class=\"token comment\"># 실행 중인 모든 파드의 목록 출력</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> kubectl get pods\r\nNAME                              READY   STATUS    RESTARTS   AGE\r\nhello-kiamol                      1/1     Running   0          34m\r\nhello-kiamol-3                    1/1     Running   0          80m\r\nhello-kiamol-4-568f7fbc88-d5g9g   1/1     Running   0          59m\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> <span class=\"token comment\"># 모든 파드 삭제</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> kubectl delete pods <span class=\"token operator\">--</span>all\r\npod <span class=\"token string\">\"hello-kiamol\"</span> deleted\r\npod <span class=\"token string\">\"hello-kiamol-3\"</span> deleted\r\npod <span class=\"token string\">\"hello-kiamol-4-568f7fbc88-d5g9g\"</span> deleted\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> <span class=\"token comment\"># 모든 파드가 삭제되었는지 확인</span>\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> kubectl get pods\r\nNAME                              READY   STATUS    RESTARTS   AGE\r\nhello-kiamol-4-568f7fbc88-ckkqc   1/1     Running   0          30s\r\n<span class=\"token function\">PS</span> C:\\Users\\hdyang\\Desktop\\Project\\k8s-practice\\ch02> </code></pre></div>\n<h2 id=\"source\" style=\"position:relative;\"><a href=\"#source\" aria-label=\"source permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source</h2>\n<ul>\n<li>『쿠버네티스 교과서』- 엘튼 스톤맨, 길벗<br>\n<a href=\"https://github.com/gilbutITbook/kiamol\" target=\"_blank\" rel=\"nofollow\">https://github.com/gilbutITbook/kiamol</a></li>\n</ul>","id":"ace87fe1-f175-52fe-a5e4-5a815d3d46f7","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EA%B0%9C%EB%85%90-%EC%9A%94%EC%95%BD\">개념 요약</a></p>\n<ul>\n<li><a href=\"#%EC%BB%A8%ED%8A%B8%EB%A1%A4%EB%9F%AC-%EA%B0%9D%EC%B2%B4\">컨트롤러 객체</a></li>\n<li><a href=\"#%EB%94%94%ED%94%8C%EB%A1%9C%EC%9D%B4%EB%A8%BC%ED%8A%B8\">디플로이먼트</a></li>\n<li><a href=\"#%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EB%A7%A4%EB%8B%88%ED%8E%98%EC%8A%A4%ED%8A%B8\">애플리케이션 매니페스트</a></li>\n<li><a href=\"#yaml\">YAML</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%8B%A4%EC%8A%B5\">실습</a></p>\n<ul>\n<li><a href=\"#%EC%A3%BC%EC%9A%94-%EC%9A%94%EC%A0%90%EB%93%A4\">주요 요점들</a></li>\n<li><a href=\"#%EB%A7%A4%EB%8B%88%ED%8E%98%EC%8A%A4%ED%8A%B8-%ED%8C%8C%EC%9D%BC\">매니페스트 파일</a></li>\n<li><a href=\"#%ED%8C%8C%EB%93%9C-%EC%83%9D%EC%84%B1-%EB%B0%8F-%ED%99%95%EC%9D%B8\">파드 생성 및 확인</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#source\">Source</a></p>\n</li>\n</ul>","frontmatter":{"title":"『쿠버네티스 교과서』실습 2장 part 2","summary":"엘튼 스톤맨의 『쿠버네티스 교과서』를 바탕으로 k8s 실습을 진행합니다.","date":"2024.01.14.","categories":["K8s","Docker","DevOps"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAcCBQj/xAAWAQEBAQAAAAAAAAAAAAAAAAAJAgX/2gAMAwEAAhADEAAAAUQ68/wQe68DIU3/xAAbEAABBAMAAAAAAAAAAAAAAAACAAMEBQEGEP/aAAgBAQABBQKG209L3Oloq2GsozMuf//EACERAAICAQIHAAAAAAAAAAAAAAECAwQSABEFBxM0QXOy/9oACAEDAQE/AeQ9V7DcFaOxNWNW1FO/SZgLEWKg1pV3CNG3nIMQC2OzYstDsqvoi+Rr/8QAHhEAAQMFAQEAAAAAAAAAAAAAAwECEgAEESFhBTL/2gAIAQIBAT8B9S3IS4AZpyDYGUxNxA0sfes64qdkmqWv/8QAIxAAAgEDBAEFAAAAAAAAAAAAAQIRAxIiBBAhMQAFEzJBUf/aAAgBAQAGPwLT067W0nqAOTcOPzHLkwMcj0uUeaOr6ZUT3nsVlV5vWADwoCFvkzNIbDhFU75OzRMXMWie+ye/vb//xAAaEAEBAAMBAQAAAAAAAAAAAAABEQAhMUFx/9oACAEBAAE/ITqO+CxlF14nd15QbYYQsJzV+IXNc9YyfLHAxqUGnYXhjn//2gAMAwEAAgADAAAAEFv/AP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQIf/aAAgBAwEBPxBFpaYiyxm1CBz+v//EABoRAQEAAgMAAAAAAAAAAAAAAAERADFBcbH/2gAIAQIBAT8Qs1GoBEKWhnNcjZ7fc//EABoQAQACAwEAAAAAAAAAAAAAAAEAESExwXH/2gAIAQEAAT8QuLX5IofsSCd43ADOLxb1Xx453POs5cjI3Qk8gWXBUWtsG551n//Z"},"images":{"fallback":{"src":"/static/582542484766a1b4ac3c5f037914dd69/bc134/k8s.jpg","srcSet":"/static/582542484766a1b4ac3c5f037914dd69/2278c/k8s.jpg 320w,\n/static/582542484766a1b4ac3c5f037914dd69/0f1c0/k8s.jpg 640w,\n/static/582542484766a1b4ac3c5f037914dd69/bc134/k8s.jpg 1280w","sizes":"(min-width: 1280px) 1280px, 100vw"},"sources":[{"srcSet":"/static/582542484766a1b4ac3c5f037914dd69/378b7/k8s.webp 320w,\n/static/582542484766a1b4ac3c5f037914dd69/3c3fb/k8s.webp 640w,\n/static/582542484766a1b4ac3c5f037914dd69/c2dd8/k8s.webp 1280w","type":"image/webp","sizes":"(min-width: 1280px) 1280px, 100vw"}]},"width":1280,"height":720}},"publicURL":"/static/582542484766a1b4ac3c5f037914dd69/k8s.jpg"}}}}]}},"pageContext":{"slug":"/k8s_prac_2_2/"}},"staticQueryHashes":[]}