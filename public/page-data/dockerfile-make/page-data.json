{"componentChunkName":"component---src-templates-post-template-tsx","path":"/dockerfile-make/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2 id=\"1-목표-환경\" style=\"position:relative;\"><a href=\"#1-%EB%AA%A9%ED%91%9C-%ED%99%98%EA%B2%BD\" aria-label=\"1 목표 환경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 목표 환경</h2>\n<p>이번에 학교 <a href=\"https://github.com/skkuse/2023fall_41class_team2\" target=\"_blank\" rel=\"nofollow\">팀 프로젝트</a>를 진행하면서 FastAPI와 Jdk가 설치된 컨테이너가 필요해졌습니다. 해당 팀 프로젝트의 주제와 자세한 구현은 추후 다른 포스트에서 다시 다룰 예정입니다. 😏\r\ndockerfile을 어떻게 구성하면 되는지 한줄씩 살펴보도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre class=\"language-dockerfile\"><code class=\"language-dockerfile\"><span class=\"token instruction\"><span class=\"token keyword\">FROM</span> ubuntu:22.04</span>\r\n\r\n<span class=\"token comment\"># Install basic</span>\r\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> apt-get update -y &amp;&amp; \\ </span>\r\n    apt-get install -y \\\r\n    software-properties-common \\\r\n    git \\\r\n    time\r\n<span class=\"token comment\"># Install Python 3.10</span>\r\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> add-apt-repository ppa:deadsnakes/ppa -y &amp;&amp; <span class=\"token operator\">\\</span>\r\n    apt-get update -y &amp;&amp; <span class=\"token operator\">\\</span>\r\n    apt-get install -y python3.10 python3-pip</span>\r\n<span class=\"token comment\"># Install pipenv</span>\r\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> pip install pipenv</span>\r\n<span class=\"token comment\"># Install JDK 17</span>\r\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> apt-get install openjdk-17-jdk -y</span>\r\n<span class=\"token comment\"># Test version</span>\r\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> java -version &amp;&amp; python3 --version</span>\r\n<span class=\"token instruction\"><span class=\"token keyword\">CMD</span> [<span class=\"token string\">\"bash\"</span>]</span></code></pre></div>\n<ol>\n<li><code class=\"language-text\">FROM ubuntu:22.04</code> 기본 이미지를 우분투로 설정합니다.</li>\n<li><code class=\"language-text\">apt-get update -y</code> apt 목록을 업데이트 합니다.</li>\n<li><code class=\"language-text\">apt-get install -y software-properties-common git time</code> 개발환경에 있어 필요한 기초 패키지들을 설치합니다. time의 경우, java 런타임 리소스 사용량 측정에 필요합니다.</li>\n<li><code class=\"language-text\">add-apt-repository ppa:deadsnakes/ppa -y</code> Python 3.10 패키지를 가져올 repo를 등록합니다. 기본 apt에는 없기 때문입니다.</li>\n<li><code class=\"language-text\">apt-get update</code> 새로운 repo를 위해 업데이트를 해줍니다.</li>\n<li><code class=\"language-text\">apt-get install -y python3.10 python3-pip</code> python3.10와 pip 을 설치합니다.</li>\n<li><code class=\"language-text\">pip install pipenv</code> python 환경관리 패키지를 설치합니다.</li>\n<li><code class=\"language-text\">apt-get install openjdk-17-jdk -y</code> jdk 17을 설치합니다.</li>\n<li><code class=\"language-text\">java -version &amp;&amp; python3 --version</code> 설치후 간단히 버전을 확인합니다.</li>\n<li><code class=\"language-text\">CMD [\"bash\"]</code> 해당 컨테이너 실행시, bash가 동작하도록 합니다.</li>\n</ol>\n<h2 id=\"2-build-test\" style=\"position:relative;\"><a href=\"#2-build-test\" aria-label=\"2 build test permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. build test</h2>\n<p>만들어진 dockerfile을 <code class=\"language-text\">docker build -t</code>로 테스트해서 정상적으로 만들어지면 완성입니다!</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">C:<span class=\"token punctuation\">\\</span>Users<span class=\"token punctuation\">\\</span>hyeondong<span class=\"token punctuation\">\\</span>Desktop<span class=\"token punctuation\">\\</span>dockerfile_test<span class=\"token punctuation\">\\</span>swe202<span class=\"token operator\"><span class=\"token file-descriptor important\">3</span>></span>docker build <span class=\"token parameter variable\">-t</span> dev_test <span class=\"token builtin class-name\">.</span>\r\n<span class=\"token punctuation\">[</span>+<span class=\"token punctuation\">]</span> Building <span class=\"token number\">81</span>.4s <span class=\"token punctuation\">(</span><span class=\"token number\">5</span>/9<span class=\"token punctuation\">)</span>                                                              docker:default\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>internal<span class=\"token punctuation\">]</span> load build definition from Dockerfile                                            <span class=\"token number\">0</span>.0s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> transferring dockerfile: 496B                                                            <span class=\"token number\">0</span>.0s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>internal<span class=\"token punctuation\">]</span> load .dockerignore                                                               <span class=\"token number\">0</span>.0s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> transferring context: 2B                                                                 <span class=\"token number\">0</span>.0s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>internal<span class=\"token punctuation\">]</span> load metadata <span class=\"token keyword\">for</span> docker.io/library/ubuntu:22.04                                 <span class=\"token number\">0</span>.0s\r\n<span class=\"token punctuation\">[</span>+<span class=\"token punctuation\">]</span> Building <span class=\"token number\">388</span>.2s <span class=\"token punctuation\">(</span><span class=\"token number\">10</span>/10<span class=\"token punctuation\">)</span> FINISHED                                             docker:default\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>internal<span class=\"token punctuation\">]</span> load build definition from Dockerfile                                       <span class=\"token number\">0</span>.0s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> transferring dockerfile: 496B                                                       <span class=\"token number\">0</span>.0s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>internal<span class=\"token punctuation\">]</span> load .dockerignore                                                          <span class=\"token number\">0</span>.0s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> transferring context: 2B                                                            <span class=\"token number\">0</span>.0s8 <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span>internal<span class=\"token punctuation\">]</span> load metadata <span class=\"token keyword\">for</span> docker.io/library/ubuntu:22.04                            <span class=\"token number\">0</span>.0s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span>/6<span class=\"token punctuation\">]</span> FROM docker.io/library/ubuntu:22.04                                              <span class=\"token number\">0</span>.0s. <span class=\"token operator\">=</span><span class=\"token operator\">></span> CACHED <span class=\"token punctuation\">[</span><span class=\"token number\">2</span>/6<span class=\"token punctuation\">]</span> RUN <span class=\"token function\">apt-get</span> update <span class=\"token parameter variable\">-y</span> <span class=\"token operator\">&amp;&amp;</span>     <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span>     software-properties-  <span class=\"token number\">0</span>.0s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token number\">3</span>/6<span class=\"token punctuation\">]</span> RUN add-apt-repository ppa:deadsnakes/ppa <span class=\"token parameter variable\">-y</span> <span class=\"token operator\">&amp;&amp;</span>     <span class=\"token function\">apt-get</span> update <span class=\"token parameter variable\">-y</span> <span class=\"token operator\">&amp;&amp;</span>       <span class=\"token number\">230</span>.1s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token number\">4</span>/6<span class=\"token punctuation\">]</span> RUN pip <span class=\"token function\">install</span> pipenv                                                           <span class=\"token number\">2</span>.7s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token number\">5</span>/6<span class=\"token punctuation\">]</span> RUN <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> openjdk-17-jdk <span class=\"token parameter variable\">-y</span>                                          <span class=\"token number\">153</span>.1s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token number\">6</span>/6<span class=\"token punctuation\">]</span> RUN <span class=\"token function\">java</span> <span class=\"token parameter variable\">-version</span> <span class=\"token operator\">&amp;&amp;</span> python3 <span class=\"token parameter variable\">--version</span>                                           <span class=\"token number\">0</span>.5s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> exporting to image                                                                     <span class=\"token number\">1</span>.8s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> exporting layers                                                                    <span class=\"token number\">1</span>.8s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> writing image sha256:b0fab18a8b37fb9020a98ea3b79e19580162aef3fac4623dfe8ad74e3f88b  <span class=\"token number\">0</span>.0s\r\n <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> naming to docker.io/library/dev_test                                                <span class=\"token number\">0</span>.0s\r\n\r\nWhat's Next?\r\n  View a summary of image vulnerabilities and recommendations → <span class=\"token function\">docker</span> scout quickview</code></pre></div>\n<p>잘 작동하네요 🥂</p>\n<h2 id=\"source\" style=\"position:relative;\"><a href=\"#source\" aria-label=\"source permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Source</h2>\n<ul>\n<li>\n<p>/usr/bin/time: No such file or directory<br>\n<a href=\"https://stackoverflow.com/questions/20278064/usr-bin-time-no-such-file-or-directory\" target=\"_blank\" rel=\"nofollow\">https://stackoverflow.com/questions/20278064/usr-bin-time-no-such-file-or-directory</a></p>\n</li>\n<li>\n<p>Dockerfile 개념 및 작성법<br>\n<a href=\"https://wooono.tistory.com/123\" target=\"_blank\" rel=\"nofollow\">https://wooono.tistory.com/123</a></p>\n</li>\n</ul>","id":"8ef2d71c-560f-5275-a474-a6a2d068963b","tableOfContents":"<ul>\n<li><a href=\"#1-%EB%AA%A9%ED%91%9C-%ED%99%98%EA%B2%BD\">1. 목표 환경</a></li>\n<li><a href=\"#2-build-test\">2. build test</a></li>\n<li><a href=\"#source\">Source</a></li>\n</ul>","frontmatter":{"title":"FastAPI와 Jdk-17이 설치된 Dockerfile을 만들어보자","summary":"예시를 통해 원하는 환경의 Dockerfile을 만들어 봅니다.","date":"2023.09.27.","categories":["Docker","DevOps"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACd0lEQVQozzXQS08TURQH8DG95965M6UoxkQD8rKABSoPaelDTdRGG2wrlNJS2mlnpp1pS5FCsO1MS3lEBDU08kgEQ0zcuHKhKz+B7tzwBYwfwx2mGJOz+G9+5/xzGBdZdOKcAzIOyIxDxg6qHdQxUEZBGQFlGNKDIA+AbEFSLxLNKNmFEh1IaEPxayjGuMiyCy84cPa/V8dBtYE6hjOjoNxC0hBu+H6Q+5DUg8RulOxEwnUUb0Vxxs0W//nG/UaFxhY7ZEcM4hjOuXl9EIkDSBqAlAVJfUgyn/sOlGhDAnOH093scxcpuHDegefHz8dmyHhb9qWe79Otn2142cFrA5Dux0ofpHpBvgFyJ4jtKMm4uZqLak52xYkXnTjvJHkbUnxXjgpDv5Zu/85ZT1Xrz4j5mxWpFqzcBKUXUmaQu0BqB5Hx8ltebvMxrT4kxfuk4GGXHhiyie6vr+Wz7fif7eBZ3nZ6Dy/fbfx1wY7n7ZB3wKIdPxvGOSbWdBDl62FuZ4ZuBkklQEpPyMoElOf9XwqeH5HLn7xQ8pIVDyl6SPERKU8QzU+0ANF8pMRkmo8V06FkrM9xOyG6GWRXJ4nuY0tJ557s2Mt5jlPWvRlcnaK6j+h+UvGTRvCRcgNnm09U0zu1aV817or8yxBdm2Qrs7SW7a6rXfW0ZT9xdWcOV+NcLUqrIbb6lNUDrBZgNT8pM+lLH8Tm93HToWB8K/NvZH5L4NYTdD1sqE4bKsELlTBUo7QWo6tzdDVKqxFaCVN9mtUmSZnJtnxMXzyRTEdi04Fs3FWMr1T+hcRtCNxGjNsQ+PUkt5akNYHW4ud4llYiVA9RfYrV/gKyLLAQvHj5+QAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/24a1829822c3238c2b2095c75211000a/6b5dd/docker.png","srcSet":"/static/24a1829822c3238c2b2095c75211000a/6e8a2/docker.png 828w,\n/static/24a1829822c3238c2b2095c75211000a/cea6d/docker.png 1657w,\n/static/24a1829822c3238c2b2095c75211000a/6b5dd/docker.png 3313w","sizes":"(min-width: 3313px) 3313px, 100vw"},"sources":[{"srcSet":"/static/24a1829822c3238c2b2095c75211000a/59542/docker.webp 828w,\n/static/24a1829822c3238c2b2095c75211000a/d9ac6/docker.webp 1657w,\n/static/24a1829822c3238c2b2095c75211000a/11d54/docker.webp 3313w","type":"image/webp","sizes":"(min-width: 3313px) 3313px, 100vw"}]},"width":3313,"height":1864}},"publicURL":"/static/24a1829822c3238c2b2095c75211000a/docker.png"}}}}]}},"pageContext":{"slug":"/dockerfile-make/"}},"staticQueryHashes":[]}