{"componentChunkName":"component---src-templates-post-template-tsx","path":"/docker-start-error/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2 id=\"1-미리-보는-결론\" style=\"position:relative;\"><a href=\"#1-%EB%AF%B8%EB%A6%AC-%EB%B3%B4%EB%8A%94-%EA%B2%B0%EB%A1%A0\" aria-label=\"1 미리 보는 결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 미리 보는 결론</h2>\n<p>포그라운드 컨테이너는 <code class=\"language-text\">docker run -i</code> 혹은 <code class=\"language-text\">docker run -t</code> 명령어를 사용해서 만들자.<br>\n<code class=\"language-text\">-i</code>나 <code class=\"language-text\">-t</code> 옵션이 없는 상태로 만들어지면 추후 <code class=\"language-text\">docker start</code>해도 바로 종료된다(도커는 기본적으로 지정된 명령어만 실행하고 종료). 아니면, 추후 컨테이너의 <code class=\"language-text\">json</code> 설정 파일을 변경해야 한다.</p>\n<h2 id=\"2-문제-인식\" style=\"position:relative;\"><a href=\"#2-%EB%AC%B8%EC%A0%9C-%EC%9D%B8%EC%8B%9D\" aria-label=\"2 문제 인식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 문제 인식</h2>\n<p><code class=\"language-text\">docker run ubuntu:22.04</code> 으로 컨테이너를 만들면, 컨테이너를 다시 켜도 항상 바로 종료됩니다.<br>\n이는 기본적으로 도커가 설정된 명령어만 수행하고 바로 종료되기 때문입니다.<br>\n<br>\n그러나 <code class=\"language-text\">docker run -it ubuntu:22.04</code> 경우에는 컨테이너를 다시 켜도 바로 종료되지 않습니다.<br>\n<code class=\"language-text\">-it</code>가 정확히 어떤 차이점을 만들길래 바로 종료되지 않고 기다리는지 궁금증이 생겼습니다.</p>\n<h2 id=\"3-설명\" style=\"position:relative;\"><a href=\"#3-%EC%84%A4%EB%AA%85\" aria-label=\"3 설명 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 설명</h2>\n<p>우선 옵션의 가능한 모든 경우를 테스트해 보았습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">--name</span> <span class=\"token builtin class-name\">test</span> ubuntu:22.04\r\n// 바로 꺼짐\r\n<span class=\"token function\">docker</span> start <span class=\"token builtin class-name\">test</span>\r\n// 바로 꺼짐\r\n<span class=\"token function\">docker</span> start <span class=\"token parameter variable\">-i</span> <span class=\"token builtin class-name\">test</span>\r\n// 바로 꺼짐\r\n\r\n<span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-i</span> <span class=\"token parameter variable\">--name</span> <span class=\"token builtin class-name\">test</span> ubuntu:22.04\r\n// 바로 꺼지지 않음, 그러나 프롬프트 접근 불가\r\n<span class=\"token function\">docker</span> stop <span class=\"token builtin class-name\">test</span>\r\n<span class=\"token function\">docker</span> start <span class=\"token builtin class-name\">test</span>\r\n// 바로 꺼지지 않음\r\n<span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> <span class=\"token builtin class-name\">test</span> <span class=\"token function\">bash</span>\r\n// 프롬프트 접근 가능\r\n\r\n<span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-t</span> <span class=\"token parameter variable\">--name</span> <span class=\"token builtin class-name\">test</span> ubuntu:22.04\r\n// 바로 꺼지지 않음, 프롬프트 접근 가능. but 키보드 입력불가\r\n<span class=\"token function\">docker</span> start <span class=\"token builtin class-name\">test</span>\r\n// 바로 꺼지지 않음\r\n<span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> <span class=\"token builtin class-name\">test</span> <span class=\"token function\">bash</span>\r\n// 프롬프트 접근 가능\r\n\r\n<span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-it</span> <span class=\"token parameter variable\">--name</span> <span class=\"token builtin class-name\">test</span> ubuntu:22.04 \r\n// 바로 꺼지지 않음, 프롬프트 접근 가능\r\n<span class=\"token function\">docker</span> stop <span class=\"token builtin class-name\">test</span>\r\n<span class=\"token function\">docker</span> start <span class=\"token builtin class-name\">test</span>\r\n// 바로 꺼지지 않음\r\n<span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> <span class=\"token parameter variable\">-it</span> <span class=\"token builtin class-name\">test</span> <span class=\"token function\">bash</span>\r\n// 프롬프트 접근 가능</code></pre></div>\n<p>위의 경우를 보면 알 수 있듯이, <code class=\"language-text\">-i</code>나 <code class=\"language-text\">-t</code> 옵션을 주지 않고 <code class=\"language-text\">docker run</code>을 할 경우, 추후 아무리 다시 <code class=\"language-text\">docker start</code> 를 해도 컨테이너가 바로 종료됩니다.<br>\n좀 더 자세히 알아보기 위해 각 컨테이너의 <code class=\"language-text\">inspect</code> 설정 파일을 열어봅니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// no option\r\n\"AttachStdin\": false,\r\n\"AttachStdout\": true,\r\n\"AttachStderr\": true,\r\n\"Tty\": false,\r\n\"OpenStdin\": false,\r\n\"StdinOnce\": false,</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// with -it option\r\n\"AttachStdin\": true,\r\n\"AttachStdout\": true,\r\n\"AttachStderr\": true,\r\n\"Tty\": true,\r\n\"OpenStdin\": true,\r\n\"StdinOnce\": true,</code></pre></div>\n<p>위의 두 파일을 보면 알 수 있듯이 <code class=\"language-text\">-it</code> 옵션을 사용하지 않을 경우, 표준 입출력 및 tty 옵션 자체가 전부 false로 고정됩니다. 정확하지는 않지만, 이 두 옵션이 전부 꺼져있으면 추후 <code class=\"language-text\">docker start</code> 를 해도 사용자를 기다리지 않고 바로 종료되는 것 같습니다.<br>\n따라서, 추후 도커에 다시 <code class=\"language-text\">docker exec -it</code> 등으로 접근하기 위해서는 처음부터 <code class=\"language-text\">docker run -it</code> 옵션이 필요한 것으로 예상됩니다. 😫</p>","id":"6f949f4c-65d3-5a5e-b2a4-f362c59be1af","tableOfContents":"<ul>\n<li><a href=\"#1-%EB%AF%B8%EB%A6%AC-%EB%B3%B4%EB%8A%94-%EA%B2%B0%EB%A1%A0\">1. 미리 보는 결론</a></li>\n<li><a href=\"#2-%EB%AC%B8%EC%A0%9C-%EC%9D%B8%EC%8B%9D\">2. 문제 인식</a></li>\n<li><a href=\"#3-%EC%84%A4%EB%AA%85\">3. 설명</a></li>\n</ul>","frontmatter":{"title":"docker start 컨테이너 즉시 종료 상황","summary":"docker start후 컨테이너가 바로 종료되는 상황의 원인과 해결책을 알아봅니다.","date":"2023.09.28.","categories":["Docker","DevOps","Tip"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACd0lEQVQozzXQS08TURQH8DG95965M6UoxkQD8rKABSoPaelDTdRGG2wrlNJS2mlnpp1pS5FCsO1MS3lEBDU08kgEQ0zcuHKhKz+B7tzwBYwfwx2mGJOz+G9+5/xzGBdZdOKcAzIOyIxDxg6qHdQxUEZBGQFlGNKDIA+AbEFSLxLNKNmFEh1IaEPxayjGuMiyCy84cPa/V8dBtYE6hjOjoNxC0hBu+H6Q+5DUg8RulOxEwnUUb0Vxxs0W//nG/UaFxhY7ZEcM4hjOuXl9EIkDSBqAlAVJfUgyn/sOlGhDAnOH093scxcpuHDegefHz8dmyHhb9qWe79Otn2142cFrA5Dux0ofpHpBvgFyJ4jtKMm4uZqLak52xYkXnTjvJHkbUnxXjgpDv5Zu/85ZT1Xrz4j5mxWpFqzcBKUXUmaQu0BqB5Hx8ltebvMxrT4kxfuk4GGXHhiyie6vr+Wz7fif7eBZ3nZ6Dy/fbfx1wY7n7ZB3wKIdPxvGOSbWdBDl62FuZ4ZuBkklQEpPyMoElOf9XwqeH5HLn7xQ8pIVDyl6SPERKU8QzU+0ANF8pMRkmo8V06FkrM9xOyG6GWRXJ4nuY0tJ557s2Mt5jlPWvRlcnaK6j+h+UvGTRvCRcgNnm09U0zu1aV817or8yxBdm2Qrs7SW7a6rXfW0ZT9xdWcOV+NcLUqrIbb6lNUDrBZgNT8pM+lLH8Tm93HToWB8K/NvZH5L4NYTdD1sqE4bKsELlTBUo7QWo6tzdDVKqxFaCVN9mtUmSZnJtnxMXzyRTEdi04Fs3FWMr1T+hcRtCNxGjNsQ+PUkt5akNYHW4ud4llYiVA9RfYrV/gKyLLAQvHj5+QAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/24a1829822c3238c2b2095c75211000a/6b5dd/docker.png","srcSet":"/static/24a1829822c3238c2b2095c75211000a/6e8a2/docker.png 828w,\n/static/24a1829822c3238c2b2095c75211000a/cea6d/docker.png 1657w,\n/static/24a1829822c3238c2b2095c75211000a/6b5dd/docker.png 3313w","sizes":"(min-width: 3313px) 3313px, 100vw"},"sources":[{"srcSet":"/static/24a1829822c3238c2b2095c75211000a/59542/docker.webp 828w,\n/static/24a1829822c3238c2b2095c75211000a/d9ac6/docker.webp 1657w,\n/static/24a1829822c3238c2b2095c75211000a/11d54/docker.webp 3313w","type":"image/webp","sizes":"(min-width: 3313px) 3313px, 100vw"}]},"width":3313,"height":1864}},"publicURL":"/static/24a1829822c3238c2b2095c75211000a/docker.png"}}}}]}},"pageContext":{"slug":"/docker-start-error/"}},"staticQueryHashes":[]}