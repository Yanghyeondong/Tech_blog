<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta data-react-helmet="true" name="naver-site-verification" content="7727e68f404d4c7be584f2b673b9943ab5c6b9ab"/><meta data-react-helmet="true" name="google-site-verification" content="fygLmB3YoAnXWkSTMHoemYurOt8ZBEdT2K5M1qZQL5E"/><meta data-react-helmet="true" name="twitter:image" content="/static/5e3e112afb9c9c7bd4c291006dba33a4/book2.png"/><meta data-react-helmet="true" name="twitter:description" content="교재 Operating Systems: Three Easy Pieces [Remzi] 속 Homework 문제 풀이"/><meta data-react-helmet="true" name="twitter:title" content="OS: Three Easy Pieces [Remzi] &lt;14.Debugging Memory&gt; 풀이"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" property="og:site_name" content="OS: Three Easy Pieces [Remzi] &lt;14.Debugging Memory&gt; 풀이"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:image" content="/static/5e3e112afb9c9c7bd4c291006dba33a4/book2.png"/><meta data-react-helmet="true" property="og:description" content="교재 Operating Systems: Three Easy Pieces [Remzi] 속 Homework 문제 풀이"/><meta data-react-helmet="true" property="og:title" content="OS: Three Easy Pieces [Remzi] &lt;14.Debugging Memory&gt; 풀이"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" name="description" content="교재 Operating Systems: Three Easy Pieces [Remzi] 속 Homework 문제 풀이"/><meta name="generator" content="Gatsby 4.19.2"/><style data-href="/styles.69a4e1e9c4403d061256.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:#2f2f2f;color:#eee;font-family:Roboto Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5em;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#363636}:not(pre)>code[class*=language-]{border-radius:.2em;padding:.1em;white-space:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1.25em 1em;position:relative}.language-css>code,.language-sass>code,.language-scss>code{color:#fd9170}[class*=language-] .namespace{opacity:.7}.token.atrule{color:#c792ea}.token.attr-name{color:#ffcb6b}.token.attr-value,.token.attribute{color:#a5e844}.token.boolean{color:#c792ea}.token.builtin{color:#ffcb6b}.token.cdata,.token.char{color:#80cbc4}.token.class{color:#ffcb6b}.token.class-name{color:#f2ff00}.token.comment{color:#616161}.token.constant{color:#c792ea}.token.deleted{color:#f66}.token.doctype{color:#616161}.token.entity{color:#f66}.token.function{color:#c792ea}.token.hexcode{color:#f2ff00}.token.id,.token.important{color:#c792ea;font-weight:700}.token.inserted{color:#80cbc4}.token.keyword{color:#c792ea}.token.number{color:#fd9170}.token.operator{color:#89ddff}.token.prolog{color:#616161}.token.property{color:#80cbc4}.token.pseudo-class,.token.pseudo-element{color:#a5e844}.token.punctuation{color:#89ddff}.token.regex{color:#f2ff00}.token.selector{color:#f66}.token.string{color:#a5e844}.token.symbol{color:#c792ea}.token.tag{color:#f66}.token.unit{color:#fd9170}.token.url,.token.variable{color:#f66}:host,:root{--fa-font-solid:normal 900 1em/1 "Font Awesome 6 Solid";--fa-font-regular:normal 400 1em/1 "Font Awesome 6 Regular";--fa-font-light:normal 300 1em/1 "Font Awesome 6 Light";--fa-font-thin:normal 100 1em/1 "Font Awesome 6 Thin";--fa-font-duotone:normal 900 1em/1 "Font Awesome 6 Duotone";--fa-font-brands:normal 400 1em/1 "Font Awesome 6 Brands"}svg:not(:host).svg-inline--fa,svg:not(:root).svg-inline--fa{box-sizing:content-box;overflow:visible}.svg-inline--fa{display:var(--fa-display,inline-block);height:1em;overflow:visible;vertical-align:-.125em}.svg-inline--fa.fa-2xs{vertical-align:.1em}.svg-inline--fa.fa-xs{vertical-align:0}.svg-inline--fa.fa-sm{vertical-align:-.07143em}.svg-inline--fa.fa-lg{vertical-align:-.2em}.svg-inline--fa.fa-xl{vertical-align:-.25em}.svg-inline--fa.fa-2xl{vertical-align:-.3125em}.svg-inline--fa.fa-pull-left{margin-right:var(--fa-pull-margin,.3em);width:auto}.svg-inline--fa.fa-pull-right{margin-left:var(--fa-pull-margin,.3em);width:auto}.svg-inline--fa.fa-li{top:.25em;width:var(--fa-li-width,2em)}.svg-inline--fa.fa-fw{width:var(--fa-fw-width,1.25em)}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-text{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter{background-color:var(--fa-counter-background-color,#ff253a);border-radius:var(--fa-counter-border-radius,1em);box-sizing:border-box;color:var(--fa-inverse,#fff);line-height:var(--fa-counter-line-height,1);max-width:var(--fa-counter-max-width,5em);min-width:var(--fa-counter-min-width,1.5em);overflow:hidden;padding:var(--fa-counter-padding,.25em .5em);right:var(--fa-right,0);text-overflow:ellipsis;top:var(--fa-top,0);-webkit-transform:scale(var(--fa-counter-scale,.25));transform:scale(var(--fa-counter-scale,.25));-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-bottom-right{bottom:var(--fa-bottom,0);right:var(--fa-right,0);top:auto;-webkit-transform:scale(var(--fa-layers-scale,.25));transform:scale(var(--fa-layers-scale,.25));-webkit-transform-origin:bottom right;transform-origin:bottom right}.fa-layers-bottom-left{bottom:var(--fa-bottom,0);left:var(--fa-left,0);right:auto;top:auto;-webkit-transform:scale(var(--fa-layers-scale,.25));transform:scale(var(--fa-layers-scale,.25));-webkit-transform-origin:bottom left;transform-origin:bottom left}.fa-layers-top-right{right:var(--fa-right,0);top:var(--fa-top,0);-webkit-transform:scale(var(--fa-layers-scale,.25));transform:scale(var(--fa-layers-scale,.25));-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-top-left{left:var(--fa-left,0);right:auto;top:var(--fa-top,0);-webkit-transform:scale(var(--fa-layers-scale,.25));transform:scale(var(--fa-layers-scale,.25));-webkit-transform-origin:top left;transform-origin:top left}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-2xs{font-size:.625em;line-height:.1em;vertical-align:.225em}.fa-xs{font-size:.75em;line-height:.08333em;vertical-align:.125em}.fa-sm{font-size:.875em;line-height:.07143em;vertical-align:.05357em}.fa-lg{font-size:1.25em;line-height:.05em;vertical-align:-.075em}.fa-xl{font-size:1.5em;line-height:.04167em;vertical-align:-.125em}.fa-2xl{font-size:2em;line-height:.03125em;vertical-align:-.1875em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:var(--fa-li-margin,2.5em);padding-left:0}.fa-ul>li{position:relative}.fa-li{left:calc(var(--fa-li-width, 2em)*-1);line-height:inherit;position:absolute;text-align:center;width:var(--fa-li-width,2em)}.fa-border{border-color:var(--fa-border-color,#eee);border-radius:var(--fa-border-radius,.1em);border-style:var(--fa-border-style,solid);border-width:var(--fa-border-width,.08em);padding:var(--fa-border-padding,.2em .25em .15em)}.fa-pull-left{float:left;margin-right:var(--fa-pull-margin,.3em)}.fa-pull-right{float:right;margin-left:var(--fa-pull-margin,.3em)}.fa-beat{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-beat;animation-name:fa-beat;-webkit-animation-timing-function:var(--fa-animation-timing,ease-in-out);animation-timing-function:var(--fa-animation-timing,ease-in-out)}.fa-bounce{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-bounce;animation-name:fa-bounce;-webkit-animation-timing-function:var(--fa-animation-timing,cubic-bezier(.28,.84,.42,1));animation-timing-function:var(--fa-animation-timing,cubic-bezier(.28,.84,.42,1))}.fa-fade{-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-fade;animation-name:fa-fade;-webkit-animation-timing-function:var(--fa-animation-timing,cubic-bezier(.4,0,.6,1));animation-timing-function:var(--fa-animation-timing,cubic-bezier(.4,0,.6,1))}.fa-beat-fade,.fa-fade{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s)}.fa-beat-fade{-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-beat-fade;animation-name:fa-beat-fade;-webkit-animation-timing-function:var(--fa-animation-timing,cubic-bezier(.4,0,.6,1));animation-timing-function:var(--fa-animation-timing,cubic-bezier(.4,0,.6,1))}.fa-flip{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-flip;animation-name:fa-flip;-webkit-animation-timing-function:var(--fa-animation-timing,ease-in-out);animation-timing-function:var(--fa-animation-timing,ease-in-out)}.fa-shake{-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-shake;animation-name:fa-shake;-webkit-animation-timing-function:var(--fa-animation-timing,linear);animation-timing-function:var(--fa-animation-timing,linear)}.fa-shake,.fa-spin{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal)}.fa-spin{-webkit-animation-duration:var(--fa-animation-duration,2s);animation-duration:var(--fa-animation-duration,2s);-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-spin;animation-name:fa-spin;-webkit-animation-timing-function:var(--fa-animation-timing,linear);animation-timing-function:var(--fa-animation-timing,linear)}.fa-spin-reverse{--fa-animation-direction:reverse}.fa-pulse,.fa-spin-pulse{-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(--fa-animation-iteration-count,infinite);animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-spin;animation-name:fa-spin;-webkit-animation-timing-function:var(--fa-animation-timing,steps(8));animation-timing-function:var(--fa-animation-timing,steps(8))}@media (prefers-reduced-motion:reduce){.fa-beat,.fa-beat-fade,.fa-bounce,.fa-fade,.fa-flip,.fa-pulse,.fa-shake,.fa-spin,.fa-spin-pulse{-webkit-animation-delay:-1ms;animation-delay:-1ms;-webkit-animation-duration:1ms;animation-duration:1ms;-webkit-animation-iteration-count:1;animation-iteration-count:1;transition-delay:0s;transition-duration:0s}}@-webkit-keyframes fa-beat{0%,90%{-webkit-transform:scale(1);transform:scale(1)}45%{-webkit-transform:scale(var(--fa-beat-scale,1.25));transform:scale(var(--fa-beat-scale,1.25))}}@keyframes fa-beat{0%,90%{-webkit-transform:scale(1);transform:scale(1)}45%{-webkit-transform:scale(var(--fa-beat-scale,1.25));transform:scale(var(--fa-beat-scale,1.25))}}@-webkit-keyframes fa-bounce{0%{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}10%{-webkit-transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0);transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0)}30%{-webkit-transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em));transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em))}50%{-webkit-transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0);transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0)}57%{-webkit-transform:scale(1) translateY(var(--fa-bounce-rebound,-.125em));transform:scale(1) translateY(var(--fa-bounce-rebound,-.125em))}64%{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}to{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}}@keyframes fa-bounce{0%{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}10%{-webkit-transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0);transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0)}30%{-webkit-transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em));transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em))}50%{-webkit-transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0);transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0)}57%{-webkit-transform:scale(1) translateY(var(--fa-bounce-rebound,-.125em));transform:scale(1) translateY(var(--fa-bounce-rebound,-.125em))}64%{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}to{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}}@-webkit-keyframes fa-fade{50%{opacity:var(--fa-fade-opacity,.4)}}@keyframes fa-fade{50%{opacity:var(--fa-fade-opacity,.4)}}@-webkit-keyframes fa-beat-fade{0%,to{opacity:var(--fa-beat-fade-opacity,.4);-webkit-transform:scale(1);transform:scale(1)}50%{opacity:1;-webkit-transform:scale(var(--fa-beat-fade-scale,1.125));transform:scale(var(--fa-beat-fade-scale,1.125))}}@keyframes fa-beat-fade{0%,to{opacity:var(--fa-beat-fade-opacity,.4);-webkit-transform:scale(1);transform:scale(1)}50%{opacity:1;-webkit-transform:scale(var(--fa-beat-fade-scale,1.125));transform:scale(var(--fa-beat-fade-scale,1.125))}}@-webkit-keyframes fa-flip{50%{-webkit-transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg));transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg))}}@keyframes fa-flip{50%{-webkit-transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg));transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg))}}@-webkit-keyframes fa-shake{0%{-webkit-transform:rotate(-15deg);transform:rotate(-15deg)}4%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}24%,8%{-webkit-transform:rotate(-18deg);transform:rotate(-18deg)}12%,28%{-webkit-transform:rotate(18deg);transform:rotate(18deg)}16%{-webkit-transform:rotate(-22deg);transform:rotate(-22deg)}20%{-webkit-transform:rotate(22deg);transform:rotate(22deg)}32%{-webkit-transform:rotate(-12deg);transform:rotate(-12deg)}36%{-webkit-transform:rotate(12deg);transform:rotate(12deg)}40%,to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}@keyframes fa-shake{0%{-webkit-transform:rotate(-15deg);transform:rotate(-15deg)}4%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}24%,8%{-webkit-transform:rotate(-18deg);transform:rotate(-18deg)}12%,28%{-webkit-transform:rotate(18deg);transform:rotate(18deg)}16%{-webkit-transform:rotate(-22deg);transform:rotate(-22deg)}20%{-webkit-transform:rotate(22deg);transform:rotate(22deg)}32%{-webkit-transform:rotate(-12deg);transform:rotate(-12deg)}36%{-webkit-transform:rotate(12deg);transform:rotate(12deg)}40%,to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.fa-rotate-90{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.fa-flip-vertical{-webkit-transform:scaleY(-1);transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{-webkit-transform:scale(-1);transform:scale(-1)}.fa-rotate-by{-webkit-transform:rotate(var(--fa-rotate-angle,none));transform:rotate(var(--fa-rotate-angle,none))}.fa-stack{display:inline-block;height:2em;position:relative;vertical-align:middle;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;z-index:var(--fa-stack-z-index,auto)}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:var(--fa-inverse,#fff)}.fa-sr-only,.fa-sr-only-focusable:not(:focus),.sr-only,.sr-only-focusable:not(:focus){clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.svg-inline--fa .fa-primary{fill:var(--fa-primary-color,currentColor);opacity:var(--fa-primary-opacity,1)}.svg-inline--fa .fa-secondary{fill:var(--fa-secondary-color,currentColor)}.svg-inline--fa .fa-secondary,.svg-inline--fa.fa-swap-opacity .fa-primary{opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-secondary{opacity:var(--fa-primary-opacity,1)}.svg-inline--fa mask .fa-primary,.svg-inline--fa mask .fa-secondary{fill:#000}.fa-duotone.fa-inverse,.fad.fa-inverse{color:var(--fa-inverse,#fff)}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="icon" href="/favicon-32x32.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=fe1cfd1d0f30f87b6d8f1bf6bea4c1e4"/><link rel="canonical" href="https://hyeondong.com/os_hw_2/" data-baseprotocol="https:" data-basehost="hyeondong.com"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">OS: Three Easy Pieces [Remzi] &lt;14.Debugging Memory&gt; 풀이</title><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="Yangdongs RSS Feed" href="/rss.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css vbubbu">.css-vbubbu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100vh;overflow-x:hidden;width:100%;}</style><main class="css-vbubbu e1strnqo0"><style data-emotion="css 1pe8cy1">.css-1pe8cy1{position:fixed;margin:10px 10px;z-index:5;}</style><div class="css-1pe8cy1 e1md2nih0"><style data-emotion="css 1qhl3ja">.css-1qhl3ja{display:grid;place-items:center;width:60px;height:60px;border-radius:20px;background-color:#4ccd97;color:#ffffff;font-size:40px;cursor:pointer;box-shadow:0 0 5px rgba(0, 0, 0, 0.2);-webkit-transition:background-color 0.6s,color 0.6s;transition:background-color 0.6s,color 0.6s;}.css-1qhl3ja:hover{background-color:#ffffff;color:#4ccd97;}@media (max-width: 768px){.css-1qhl3ja{width:45px;height:45px;font-size:30px;border-radius:15px;}}</style><div class="css-1qhl3ja e1md2nih1"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="compass" class="svg-inline--fa fa-compass " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M288 256C288 273.7 273.7 288 256 288C238.3 288 224 273.7 224 256C224 238.3 238.3 224 256 224C273.7 224 288 238.3 288 256zM0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM325.1 306.7L380.6 162.4C388.1 142.1 369 123.9 349.6 131.4L205.3 186.9C196.8 190.1 190.1 196.8 186.9 205.3L131.4 349.6C123.9 369 142.1 388.1 162.4 380.6L306.7 325.1C315.2 321.9 321.9 315.2 325.1 306.7V306.7z"></path></svg></div><style data-emotion="css 12ua5r7">.css-12ua5r7{margin:10px 10px;border-radius:20px;z-index:4;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:fixed;-webkit-transition:500ms;transition:500ms;left:-600px;box-shadow:0 0 5px rgba(0, 0, 0, 0.2);background-color:white;}</style><div class="css-12ua5r7 ee3oskm2"><style data-emotion="css x68nae">.css-x68nae{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;text-align:center;margin-top:5%;margin-bottom:10%;margin:10px;}</style><div class="css-x68nae ee3oskm1"><style data-emotion="css 58nrwj">.css-58nrwj{font-size:20px;margin:15px;}.css-58nrwj:hover{border-bottom:3px solid #4ccd97;}</style><a class="css-58nrwj ee3oskm0" href="/">Home</a><a class="css-58nrwj ee3oskm0" href="/post/">Post</a><a href="https://github.com/Yanghyeondong/tech_blog#readme" class="css-58nrwj ee3oskm0">About</a></div></div></div><style data-emotion="css-global gyifnl">@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');*{padding:0;margin:0;box-sizing:border-box;font-family:'Noto Sans KR',sans-serif;}html,body,#___gatsby{height:100%;}a,a:hover{color:inherit;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}</style><style data-emotion="css 16cz9yp">.css-16cz9yp{position:relative;width:100%;height:400px;}@media (max-width: 768px){.css-16cz9yp{height:300px;}}</style><div class="css-16cz9yp e1opi4mu1"><style data-emotion="css 1bjn9yo">.css-1bjn9yo{z-index:-1;width:100%;height:400px;object-fit:cover;-webkit-filter:brightness(0.25);filter:brightness(0.25);}@media (max-width: 768px){.css-1bjn9yo{height:300px;}}</style><div data-gatsby-image-wrapper="" style="position:absolute" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-1bjn9yo e1opi4mu0"><div style="max-width:565px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;306&#x27; width=&#x27;565&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABESAAAREgEAwpvaAAABrklEQVQozzWSPa/qMAyG08RN4iRNvxADGwL1qiBoqaAduiAhMfADGEAV450Y2BD8+atTn/sMUeTYsvO+ZlEUOeeUUgCgtZZSGmMQ0VqrlPLex3EMAFEUAQAiAoBSii5MSqlG4ji21mZZhohJkiBilmXWWmNMFEVCCMr03mutAUBKyYQQnPMgCIQQv6ERzrmUEgAoQY4EQcAYU0pxzn87c86ttcfjcbvdFkWxXq/7vu+6bj6fV1V1Op2apun7vqqqpmkWiwVNEYYhc85xzrMsu9/v7/d7GIbb7fZ6vYZh+H6/5/P58/n8HXk+n4/H43q9MsZghGmtnXPee6VUnueHw6Esy9Vqtd/v+74vy7Jt2z8jk8lECEFyIqIQgiEi1ZPaZVnWdb3ZbOq67rpuvV4XRbHb7dq2nc1mxhgSIk1T5xwjqYMgoAt9hoQVQmithRD0pLXO89w5J6X8LQYAspROmsI5lyQJ+a+1NsZQkAy31iKiMebHKkQk6eM4FiNku9Y6DEP/H5rZWhtFUZqmy+XypzNV0pIBQBiGAOC9R0SayHtP24KI0+m0LMumaS6Xyz8ykDVBPPlfZQAAAABJRU5ErkJggg==" alt=""/><picture><source type="image/webp" data-srcset="/static/5e3e112afb9c9c7bd4c291006dba33a4/cdf2b/book2.webp 141w,/static/5e3e112afb9c9c7bd4c291006dba33a4/d9fe4/book2.webp 283w,/static/5e3e112afb9c9c7bd4c291006dba33a4/8b8b9/book2.webp 565w" sizes="(min-width: 565px) 565px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 565px) 565px, 100vw" decoding="async" loading="lazy" data-src="/static/5e3e112afb9c9c7bd4c291006dba33a4/3739d/book2.png" data-srcset="/static/5e3e112afb9c9c7bd4c291006dba33a4/da853/book2.png 141w,/static/5e3e112afb9c9c7bd4c291006dba33a4/9f0de/book2.png 283w,/static/5e3e112afb9c9c7bd4c291006dba33a4/3739d/book2.png 565w" alt="thumbnail"/></picture><noscript><picture><source type="image/webp" srcSet="/static/5e3e112afb9c9c7bd4c291006dba33a4/cdf2b/book2.webp 141w,/static/5e3e112afb9c9c7bd4c291006dba33a4/d9fe4/book2.webp 283w,/static/5e3e112afb9c9c7bd4c291006dba33a4/8b8b9/book2.webp 565w" sizes="(min-width: 565px) 565px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 565px) 565px, 100vw" decoding="async" loading="lazy" src="/static/5e3e112afb9c9c7bd4c291006dba33a4/3739d/book2.png" srcSet="/static/5e3e112afb9c9c7bd4c291006dba33a4/da853/book2.png 141w,/static/5e3e112afb9c9c7bd4c291006dba33a4/9f0de/book2.png 283w,/static/5e3e112afb9c9c7bd4c291006dba33a4/3739d/book2.png 565w" alt="thumbnail"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><style data-emotion="css lzjgtp">.css-lzjgtp{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;height:400px;margin:0 auto;padding:60px 0;color:#ffffff;}@media (max-width: 768px){.css-lzjgtp{height:330px;width:100%;padding:40px 20px;}}</style><div class="css-lzjgtp e1st1jau7"><style data-emotion="css 10qqw1">.css-10qqw1{display:-webkit-box;overflow:hidden;overflow-wrap:break-word;margin:auto 0;text-overflow:ellipsis;white-space:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;font-size:42px;font-weight:800;}@media (max-width: 768px){.css-10qqw1{font-size:30px;}}</style><div class="css-10qqw1 e1st1jau5">OS: Three Easy Pieces [Remzi] &lt;14.Debugging Memory&gt; 풀이</div><style data-emotion="css 3gcnt2">.css-3gcnt2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;font-size:18px;font-weight:700;}@media (max-width: 768px){.css-3gcnt2{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:15px;font-weight:400;}}</style><div class="css-3gcnt2 e1st1jau4"><style data-emotion="css 5yjeco">.css-5yjeco{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:start;justify-content:start;}@media (max-width: 768px){.css-5yjeco{-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}</style><div class="css-5yjeco e1st1jau3"><style data-emotion="css 1b9df66">.css-1b9df66{margin:2px 5px;padding:1px 7px 4px 7px;border-radius:6px;background-color:#49ae8e;font-size:16px;font-weight:800;color:white;}@media (max-width: 768px){.css-1b9df66{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}</style><div class="css-1b9df66 e1st1jau2">OS</div></div><style data-emotion="css 14b4j72">.css-14b4j72{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media (max-width: 768px){.css-14b4j72{margin:7px 7px;}}</style><div class="css-14b4j72 e1st1jau1"><style data-emotion="css nkt64x">.css-nkt64x{margin-right:10px;}</style><div class="css-nkt64x e1st1jau0"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="calendar-days" class="svg-inline--fa fa-calendar-days " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M160 32V64H288V32C288 14.33 302.3 0 320 0C337.7 0 352 14.33 352 32V64H400C426.5 64 448 85.49 448 112V160H0V112C0 85.49 21.49 64 48 64H96V32C96 14.33 110.3 0 128 0C145.7 0 160 14.33 160 32zM0 192H448V464C448 490.5 426.5 512 400 512H48C21.49 512 0 490.5 0 464V192zM64 304C64 312.8 71.16 320 80 320H112C120.8 320 128 312.8 128 304V272C128 263.2 120.8 256 112 256H80C71.16 256 64 263.2 64 272V304zM192 304C192 312.8 199.2 320 208 320H240C248.8 320 256 312.8 256 304V272C256 263.2 248.8 256 240 256H208C199.2 256 192 263.2 192 272V304zM336 256C327.2 256 320 263.2 320 272V304C320 312.8 327.2 320 336 320H368C376.8 320 384 312.8 384 304V272C384 263.2 376.8 256 368 256H336zM64 432C64 440.8 71.16 448 80 448H112C120.8 448 128 440.8 128 432V400C128 391.2 120.8 384 112 384H80C71.16 384 64 391.2 64 400V432zM208 384C199.2 384 192 391.2 192 400V432C192 440.8 199.2 448 208 448H240C248.8 448 256 440.8 256 432V400C256 391.2 248.8 384 240 384H208zM320 432C320 440.8 327.2 448 336 448H368C376.8 448 384 440.8 384 432V400C384 391.2 376.8 384 368 384H336C327.2 384 320 391.2 320 400V432z"></path></svg></div>2023.08.21.</div></div></div></div><style data-emotion="css hn6e83">.css-hn6e83{margin:auto auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}@media (min-width: 1200px){.css-hn6e83{margin-left:calc( 50% - 384px );}}@media (max-width: 768px){.css-hn6e83{width:100%;}}</style><div class="css-hn6e83 e6b6ljm0"><style data-emotion="css aco8as">.css-aco8as{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;margin:0 auto;padding:100px 0;word-break:break-all;line-height:2.5;font-size:18px;font-weight:400;}.css-aco8as p{padding:3px 0;}.css-aco8as strong{margin:0px 1px;font-size:18.3px;font-weight:800;}.css-aco8as h1,.css-aco8as h2{font-weight:800;margin-bottom:20px;}.css-aco8as h3{margin-bottom:0px;}.css-aco8as *+h1,.css-aco8as *+h2,.css-aco8as *+h3{margin-top:50px;}.css-aco8as *+h4{margin-top:25px;}.css-aco8as hr+h1,.css-aco8as hr+h2,.css-aco8as hr+h3{margin-top:0;}.css-aco8as hr+h4{margin-top:25px;}.css-aco8as h1{font-size:40px;}.css-aco8as h2{font-size:35px;}.css-aco8as h3{font-size:23px;color:#49ae8e;}.css-aco8as blockquote{margin:30px 10px;padding:5px 15px;border-left:2px solid #49ae8e;background-color:#f9f9f9;font-weight:400;}.css-aco8as blockquote li{font-size:18px;margin:0px 15px;padding:0px 10px 0px 5px;background-color:#f9f9f9;}.css-aco8as blockquote ol li::Marker{font-weight:800;color:#000;}.css-aco8as em{padding-right:8px;padding-left:3px;}.css-aco8as ol{margin-left:20px;padding:5px 0;}.css-aco8as ol li::Marker{font-weight:800;font-size:19px;color:#49ae8e;}.css-aco8as ul{margin:20px;margin-right:0px;}.css-aco8as ul li::Marker{content:"▶ ";font-weight:800;color:#49ae8e;}.css-aco8as li{font-size:17px;margin:10px 20px;padding-left:10px;padding-right:10px;background-color:#f9f9f9;border-radius:10px;}.css-aco8as li strong{font-size:17.5px;}.css-aco8as del{-webkit-text-decoration:line-through 3px solid rgba(0, 0, 0, .4);text-decoration:line-through 3px solid rgba(0, 0, 0, .4);}.css-aco8as hr{border:1px solid #000000;margin:100px 0;}.css-aco8as a{font-weight:800;color:#49ae8e;-webkit-text-decoration:underline 1px;text-decoration:underline 1px;text-underline-position:under;}.css-aco8as a:hover{color:#ffffff;background-color:#49ae8e;}.css-aco8as pre[class*='language-']{font-weight:300;padding:20px 30px;margin-bottom:15px;font-size:20px;border-radius:10px;border:1px solid #dddddd;}.css-aco8as pre[class*='language-']::-webkit-scrollbar-thumb{background:rgba(255, 255, 255, 0.5);}.css-aco8as pre[class*='language-'] *{font-family:'Roboto Mono',monospace;font-weight:400;}.css-aco8as code[class*='language-']{font-size:16px;margin-right:4px;}.css-aco8as :not(pre)>code[class*="language-"]{font-size:15px;margin-right:4px;margin-left:4px;color:#000000;background-color:#fafafa;border:1px solid #dddddd;padding:1px 4px 3px 4px;border-radius:5px;}.css-aco8as :not(pre)>code[class*="language-"]::selection{background-color:#dadada;}@media (max-width: 768px){.css-aco8as{width:100%;padding:80px 20px;line-height:2.0;font-size:16px;}.css-aco8as h1{font-size:26px;}.css-aco8as h2{font-size:23px;}.css-aco8as h3{font-size:20px;}.css-aco8as strong{margin:0px 3px;font-size:17px;font-weight:800;}.css-aco8as img{width:100%;}.css-aco8as hr{margin:50px 0;}.css-aco8as li{font-size:16px;}}</style><div class="css-aco8as e1ijh0y10"><p><em>해당 포스트는 필자가 직접 풀이한 것으로 오답이나 잘못된 해석이 있을 수도 있습니다.</em><br>
<em>혹시나 지적할 부분이 있다면 항상 환영입니다!</em> 😏</p>
<h2 id="문제-및-풀이" style="position:relative;"><a href="#%EB%AC%B8%EC%A0%9C-%EB%B0%8F-%ED%92%80%EC%9D%B4" aria-label="문제 및 풀이 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>문제 및 풀이</h2>
<h4 id="1-first-write-a-simple-program-called-nullc-that-creates-a-pointer-to-an-integer-sets-it-to-null-and-then-tries-to-dereference-it-compile-this-into-an-executable-called-null" style="position:relative;"><a href="#1-first-write-a-simple-program-called-nullc-that-creates-a-pointer-to-an-integer-sets-it-to-null-and-then-tries-to-dereference-it-compile-this-into-an-executable-called-null" aria-label="1 first write a simple program called nullc that creates a pointer to an integer sets it to null and then tries to dereference it compile this into an executable called null permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. First, write a simple program called null.c that creates a pointer to an integer, sets it to NULL, and then tries to dereference it. Compile this into an executable called null.</h4>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token operator">*</span> x<span class="token punctuation">;</span>
    x <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token operator">*</span>x<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ gcc <span class="token operator">-</span>o null null<span class="token punctuation">.</span>c</code></pre></div>
<p>What happens when you run this program?<br>
프로그램 실행 시 아래와 같이 Segmentation fault가 발생한다.</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ null
Segmentation <span class="token function">fault</span> <span class="token punctuation">(</span>core dumped<span class="token punctuation">)</span></code></pre></div>
<h4 id="2-next-compile-this-program-with-symbol-information-included-with-the--g-flag-doing-so-lets-put-more-information-into-the-executable-enabling-the-debugger-to-access-more-useful-information-about-variable-names-and-the-like-run-the-program-under-the-debugger-by-typing-gdb-null-and-then-once-gdb-is-running-typing-run" style="position:relative;"><a href="#2-next-compile-this-program-with-symbol-information-included-with-the--g-flag-doing-so-lets-put-more-information-into-the-executable-enabling-the-debugger-to-access-more-useful-information-about-variable-names-and-the-like-run-the-program-under-the-debugger-by-typing-gdb-null-and-then-once-gdb-is-running-typing-run" aria-label="2 next compile this program with symbol information included with the  g flag doing so lets put more information into the executable enabling the debugger to access more useful information about variable names and the like run the program under the debugger by typing gdb null and then once gdb is running typing run permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Next, compile this program with symbol information included (with the -g flag). Doing so let’s put more information into the executable, enabling the debugger to access more useful information about variable names and the like. Run the program under the debugger by typing gdb null and then, once gdb is running, typing run.</h4>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ gcc <span class="token operator">-</span>g <span class="token operator">-</span>o null null<span class="token punctuation">.</span>c
<span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ gdb null
GNU <span class="token function">gdb</span> <span class="token punctuation">(</span>Ubuntu <span class="token number">8.1</span><span class="token number">.1</span><span class="token operator">-</span><span class="token number">0u</span>buntu1<span class="token punctuation">)</span> <span class="token number">8.1</span><span class="token number">.1</span>
<span class="token function">Copyright</span> <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">2018</span> Free Software Foundation<span class="token punctuation">,</span> Inc<span class="token punctuation">.</span>
<span class="token punctuation">(</span>생략<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
Reading symbols from null<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>done<span class="token punctuation">.</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> run
Starting program<span class="token operator">:</span> <span class="token operator">/</span>home<span class="token operator">/</span><span class="token number">2019312219</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span><span class="token operator">/</span>null 

Program received signal SIGSEGV<span class="token punctuation">,</span> Segmentation fault<span class="token punctuation">.</span>
<span class="token number">0x000055555555460a</span> in <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> at null<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">7</span>
<span class="token number">7</span>           <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token operator">*</span>x<span class="token punctuation">;</span></code></pre></div>
<p>What does gdb show you?<br>
dereference한 x를 사용하는 코드에서 SIGSEGV signal과 함께 Segmentation fault 가 발생함을 알려주고 있다</p>
<h4 id="3-finally-use-the-valgrind-tool-on-this-program-well-use-the-memcheck-tool-that-is-a-part-of-valgrind-to-analyze-what-happens-run-this-by-typing-in-the-following-valgrind---leak-checkyes-null" style="position:relative;"><a href="#3-finally-use-the-valgrind-tool-on-this-program-well-use-the-memcheck-tool-that-is-a-part-of-valgrind-to-analyze-what-happens-run-this-by-typing-in-the-following-valgrind---leak-checkyes-null" aria-label="3 finally use the valgrind tool on this program well use the memcheck tool that is a part of valgrind to analyze what happens run this by typing in the following valgrind   leak checkyes null permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Finally, use the valgrind tool on this program. We’ll use the memcheck tool that is a part of valgrind to analyze what happens. Run this by typing in the following: valgrind –leak-check=yes null.</h4>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ valgrind <span class="token operator">--</span>leak<span class="token operator">-</span>check<span class="token operator">=</span>yes null
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> Memcheck<span class="token punctuation">,</span> a memory error detector
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> <span class="token function">Copyright</span> <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">2002</span><span class="token operator">-</span><span class="token number">2017</span><span class="token punctuation">,</span> and GNU GPL'd<span class="token punctuation">,</span> by Julian Seward et al<span class="token punctuation">.</span>
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> Using Valgrind<span class="token operator">-</span><span class="token number">3.13</span><span class="token number">.0</span> and LibVEX<span class="token punctuation">;</span> rerun with <span class="token operator">-</span>h <span class="token keyword">for</span> copyright info
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> Command<span class="token operator">:</span> null
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> Invalid read of size <span class="token number">4</span>
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span>    at <span class="token number">0x10860A</span><span class="token operator">:</span> <span class="token function">main</span> <span class="token punctuation">(</span>null<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span>  Address <span class="token number">0x0</span> is not stack<span class="token char">'d, malloc'</span>d <span class="token function">or</span> <span class="token punctuation">(</span>recently<span class="token punctuation">)</span> free'd
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> Process terminating with <span class="token keyword">default</span> action of signal <span class="token number">11</span> <span class="token punctuation">(</span>SIGSEGV<span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span>  Access not within mapped region at address <span class="token number">0x0</span>
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span>    at <span class="token number">0x10860A</span><span class="token operator">:</span> <span class="token function">main</span> <span class="token punctuation">(</span>null<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span>  If you believe this happened as a result of a stack
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span>  overflow in your program's main <span class="token function">thread</span> <span class="token punctuation">(</span>unlikely but
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span>  possible<span class="token punctuation">)</span><span class="token punctuation">,</span> you can try to increase the size of the
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span>  main thread stack using the <span class="token operator">--</span>main<span class="token operator">-</span>stacksize<span class="token operator">=</span> flag<span class="token punctuation">.</span>
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span>  The main thread stack size used in this run was <span class="token number">8388608.</span>
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> HEAP SUMMARY<span class="token operator">:</span>
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span>     in use at exit<span class="token operator">:</span> <span class="token number">0</span> bytes in <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span>   total heap usage<span class="token operator">:</span> <span class="token number">0</span> allocs<span class="token punctuation">,</span> <span class="token number">0</span> frees<span class="token punctuation">,</span> <span class="token number">0</span> bytes allocated
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> All heap blocks were freed <span class="token operator">--</span> no leaks are possible
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> For counts of detected and suppressed errors<span class="token punctuation">,</span> rerun with<span class="token operator">:</span> <span class="token operator">-</span>v
<span class="token operator">==</span><span class="token number">10900</span><span class="token operator">==</span> ERROR SUMMARY<span class="token operator">:</span> <span class="token number">1</span> errors from <span class="token number">1</span> <span class="token function">contexts</span> <span class="token punctuation">(</span>suppressed<span class="token operator">:</span> <span class="token number">0</span> from <span class="token number">0</span><span class="token punctuation">)</span>
Segmentation <span class="token function">fault</span> <span class="token punctuation">(</span>core dumped<span class="token punctuation">)</span></code></pre></div>
<p>What happens when you run this? Can you interpret the output from the tool?<br>
<code class="language-text">int y = *x;</code> 를 통해 포인터x에 해당하는 값을 불러오려 하니 <code class="language-text">Invalid read of size 4, Address 0x0 is not stack'd, malloc'd or (recently) free'd</code> 오류가 발생한다. 이는 x가 null이기 때문에 dereference를 할 때 해당 주소의 값을 찾을 수 없기 때문이다.<br>
추가로 <code class="language-text">Process terminating with default action of signal 11 (SIGSEGV), Access not within mapped region at address 0x0</code> 등 SIGSEGV signal 과 address 참조 오류도 출력된다.</p>
<h4 id="4-write-a-simple-program--that-allocates-memory-using-malloc-but-forgets-to-free-it-before-exiting" style="position:relative;"><a href="#4-write-a-simple-program--that-allocates-memory-using-malloc-but-forgets-to-free-it-before-exiting" aria-label="4 write a simple program  that allocates memory using malloc but forgets to free it before exiting permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Write a simple program  that allocates memory using malloc() but forgets to free it before exiting.</h4>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token operator">*</span> x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">*</span>x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"x: %d\n"</span><span class="token punctuation">,</span><span class="token operator">*</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>What happens when this program runs?<br>
아래 출력과 같이 아무 이상 없이 실행된다.</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ gcc <span class="token operator">-</span>g <span class="token operator">-</span>o q4 q4<span class="token punctuation">.</span>c
<span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ q4
x<span class="token operator">:</span> <span class="token number">1</span></code></pre></div>
<p>Can you use gdb to find any problems with it?<br>
아래의 출력과 같이 아무 문제가 없음을 확인할 수 있다.</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ gdb q4
GNU <span class="token function">gdb</span> <span class="token punctuation">(</span>Ubuntu <span class="token number">8.1</span><span class="token number">.1</span><span class="token operator">-</span><span class="token number">0u</span>buntu1<span class="token punctuation">)</span> <span class="token number">8.1</span><span class="token number">.1</span>
<span class="token function">Copyright</span> <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">2018</span> Free Software Foundation<span class="token punctuation">,</span> Inc<span class="token punctuation">.</span>
<span class="token punctuation">(</span>생략<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Reading symbols from q4<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>done<span class="token punctuation">.</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> run
Starting program<span class="token operator">:</span> <span class="token operator">/</span>home<span class="token operator">/</span><span class="token number">2019312219</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span><span class="token operator">/</span>q4 
x<span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">[</span>Inferior <span class="token number">1</span> <span class="token punctuation">(</span>process <span class="token number">21774</span><span class="token punctuation">)</span> exited normally<span class="token punctuation">]</span>
<span class="token punctuation">(</span>gdb<span class="token punctuation">)</span></code></pre></div>
<p>How about valgrind (again with the –leak-check=yes flag)?<br>
valgrind로 확인해보면 아래 출력과 같이 오류가 출력된다. 4 bytes in 1 blocks are definitely lost in loss record 1 of 1 부분을 통해 malloc으로 할당한 메모리를 <code class="language-text">free()</code> 해주지 않아서 발생하는 오류임을 알 수 있다.</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ valgrind <span class="token operator">--</span>leak<span class="token operator">-</span>check<span class="token operator">=</span>yes q4
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span> Memcheck<span class="token punctuation">,</span> a memory error detector
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span> <span class="token function">Copyright</span> <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">2002</span><span class="token operator">-</span><span class="token number">2017</span><span class="token punctuation">,</span> and GNU GPL'd<span class="token punctuation">,</span> by Julian Seward et al<span class="token punctuation">.</span>
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span> Using Valgrind<span class="token operator">-</span><span class="token number">3.13</span><span class="token number">.0</span> and LibVEX<span class="token punctuation">;</span> rerun with <span class="token operator">-</span>h <span class="token keyword">for</span> copyright info
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span> Command<span class="token operator">:</span> q4
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span> 
x<span class="token operator">:</span> <span class="token number">1</span>
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span> HEAP SUMMARY<span class="token operator">:</span>
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span>     in use at exit<span class="token operator">:</span> <span class="token number">4</span> bytes in <span class="token number">1</span> blocks
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span>   total heap usage<span class="token operator">:</span> <span class="token number">2</span> allocs<span class="token punctuation">,</span> <span class="token number">1</span> frees<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">028</span> bytes allocated
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span> <span class="token number">4</span> bytes in <span class="token number">1</span> blocks are definitely lost in loss record <span class="token number">1</span> of <span class="token number">1</span>
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span>    at <span class="token number">0x4C31B0F</span><span class="token operator">:</span> <span class="token function">malloc</span> <span class="token punctuation">(</span>in <span class="token operator">/</span>usr<span class="token operator">/</span>lib<span class="token operator">/</span>valgrind<span class="token operator">/</span>vgpreload_memcheck<span class="token operator">-</span>amd64<span class="token operator">-</span>linux<span class="token punctuation">.</span>so<span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span>    by <span class="token number">0x10869B</span><span class="token operator">:</span> <span class="token function">main</span> <span class="token punctuation">(</span>q4<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span> LEAK SUMMARY<span class="token operator">:</span>
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span>    definitely lost<span class="token operator">:</span> <span class="token number">4</span> bytes in <span class="token number">1</span> blocks
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span>    indirectly lost<span class="token operator">:</span> <span class="token number">0</span> bytes in <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span>      possibly lost<span class="token operator">:</span> <span class="token number">0</span> bytes in <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span>    still reachable<span class="token operator">:</span> <span class="token number">0</span> bytes in <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span>         suppressed<span class="token operator">:</span> <span class="token number">0</span> bytes in <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span> For counts of detected and suppressed errors<span class="token punctuation">,</span> rerun with<span class="token operator">:</span> <span class="token operator">-</span>v
<span class="token operator">==</span><span class="token number">22300</span><span class="token operator">==</span> ERROR SUMMARY<span class="token operator">:</span> <span class="token number">1</span> errors from <span class="token number">1</span> <span class="token function">contexts</span> <span class="token punctuation">(</span>suppressed<span class="token operator">:</span> <span class="token number">0</span> from <span class="token number">0</span><span class="token punctuation">)</span></code></pre></div>
<h4 id="5-write-a-program-that-creates-an-array-of-integers-called-data-of-size-100-using-malloc-then-set-data100-to-zero" style="position:relative;"><a href="#5-write-a-program-that-creates-an-array-of-integers-called-data-of-size-100-using-malloc-then-set-data100-to-zero" aria-label="5 write a program that creates an array of integers called data of size 100 using malloc then set data100 to zero permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. Write a program that creates an array of integers called data of size 100 using malloc; then, set data[100] to zero.</h4>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">int</span><span class="token operator">*</span> data <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    data<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">free</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    
<span class="token punctuation">}</span></code></pre></div>
<p>What happens when you run this program?<br>
아래 출력과 같이 아무 이상 없이 실행된다.</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ gcc <span class="token operator">-</span>g <span class="token operator">-</span>o q5 q5<span class="token punctuation">.</span>c
<span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ q5
<span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$</code></pre></div>
<p>What happens when you run this program using valgrind? Is the program correct?<br>
valgrind로 확인해보면 아래 같이 오류가 출력된다. Invalid write of size 4 출력을 통해 <code class="language-text">data[100] = 0;</code> 부분에서 올바르지 않은(범위를 벗어나는) write 를 했음을 알려준다. 그 이유는 int형의 크기가 4이므로 data[100]이 가르키는 위치는 기존의 malloc(100) 범위를 벗어나기 때문이다.</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ valgrind <span class="token operator">--</span>leak<span class="token operator">-</span>check<span class="token operator">=</span>yes q5
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span> Memcheck<span class="token punctuation">,</span> a memory error detector
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span> <span class="token function">Copyright</span> <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">2002</span><span class="token operator">-</span><span class="token number">2017</span><span class="token punctuation">,</span> and GNU GPL'd<span class="token punctuation">,</span> by Julian Seward et al<span class="token punctuation">.</span>
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span> Using Valgrind<span class="token operator">-</span><span class="token number">3.13</span><span class="token number">.0</span> and LibVEX<span class="token punctuation">;</span> rerun with <span class="token operator">-</span>h <span class="token keyword">for</span> copyright info
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span> Command<span class="token operator">:</span> q5
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span> Invalid write of size <span class="token number">4</span>
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span>    at <span class="token number">0x1086AA</span><span class="token operator">:</span> <span class="token function">main</span> <span class="token punctuation">(</span>q5<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span>  Address <span class="token number">0x522f1d0</span> is <span class="token number">224</span> bytes inside an unallocated block of size <span class="token number">4</span><span class="token punctuation">,</span><span class="token number">194</span><span class="token punctuation">,</span><span class="token number">032</span> in arena <span class="token string">"client"</span>
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span> HEAP SUMMARY<span class="token operator">:</span>
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span>     in use at exit<span class="token operator">:</span> <span class="token number">0</span> bytes in <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span>   total heap usage<span class="token operator">:</span> <span class="token number">1</span> allocs<span class="token punctuation">,</span> <span class="token number">1</span> frees<span class="token punctuation">,</span> <span class="token number">100</span> bytes allocated
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span> All heap blocks were freed <span class="token operator">--</span> no leaks are possible
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span> For counts of detected and suppressed errors<span class="token punctuation">,</span> rerun with<span class="token operator">:</span> <span class="token operator">-</span>v
<span class="token operator">==</span><span class="token number">26470</span><span class="token operator">==</span> ERROR SUMMARY<span class="token operator">:</span> <span class="token number">1</span> errors from <span class="token number">1</span> <span class="token function">contexts</span> <span class="token punctuation">(</span>suppressed<span class="token operator">:</span> <span class="token number">0</span> from <span class="token number">0</span><span class="token punctuation">)</span></code></pre></div>
<h4 id="6-create-a-program-that-allocates-an-array-of-integers-as-above-frees-them-and-then-tries-to-print-the-value-of-one-of-the-elements-of-the-array" style="position:relative;"><a href="#6-create-a-program-that-allocates-an-array-of-integers-as-above-frees-them-and-then-tries-to-print-the-value-of-one-of-the-elements-of-the-array" aria-label="6 create a program that allocates an array of integers as above frees them and then tries to print the value of one of the elements of the array permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>6. Create a program that allocates an array of integers (as above), frees them, and then tries to print the value of one of the elements of the array.</h4>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token operator">*</span> data <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">free</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"data[0]: %d\n"</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Does the program run?<br>
아래 출력과 같이 아무 이상 없이 실행된다.</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ gcc <span class="token operator">-</span>g <span class="token operator">-</span>o q6 q6<span class="token punctuation">.</span>c
<span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ q6
data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$</code></pre></div>
<p>What happens when you use valgrind on it?<br>
valgrind로 확인해보면 아래 같이 오류가 출력된다. Invalid read of size 4 출력을 통해 <code class="language-text">printf("data[0]: %d\n", data[0]);</code> 부분에서 올바르지 않은read 를 했음을 알려준다. 추가적으로 <code class="language-text">Address 0x522f040 is 0 bytes inside a block of size 100 free'd</code> 를 통해 해당 주소는 이미 free()가 완료 되었음을 알려주며, Block was alloc’d at 을 통해 과거 malloc으로 할당 되었던 부분임도 알려준다.</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ valgrind <span class="token operator">--</span>leak<span class="token operator">-</span>check<span class="token operator">=</span>yes q6
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span> Memcheck<span class="token punctuation">,</span> a memory error detector
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span> <span class="token function">Copyright</span> <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">2002</span><span class="token operator">-</span><span class="token number">2017</span><span class="token punctuation">,</span> and GNU GPL'd<span class="token punctuation">,</span> by Julian Seward et al<span class="token punctuation">.</span>
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span> Using Valgrind<span class="token operator">-</span><span class="token number">3.13</span><span class="token number">.0</span> and LibVEX<span class="token punctuation">;</span> rerun with <span class="token operator">-</span>h <span class="token keyword">for</span> copyright info
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span> Command<span class="token operator">:</span> q6
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span> Invalid read of size <span class="token number">4</span>
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span>    at <span class="token number">0x108700</span><span class="token operator">:</span> <span class="token function">main</span> <span class="token punctuation">(</span>q6<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span>  Address <span class="token number">0x522f040</span> is <span class="token number">0</span> bytes inside a block of size <span class="token number">100</span> free'd
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span>    at <span class="token number">0x4C32D3B</span><span class="token operator">:</span> <span class="token function">free</span> <span class="token punctuation">(</span>in <span class="token operator">/</span>usr<span class="token operator">/</span>lib<span class="token operator">/</span>valgrind<span class="token operator">/</span>vgpreload_memcheck<span class="token operator">-</span>amd64<span class="token operator">-</span>linux<span class="token punctuation">.</span>so<span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span>    by <span class="token number">0x1086FB</span><span class="token operator">:</span> <span class="token function">main</span> <span class="token punctuation">(</span>q6<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span>  Block was alloc'd at
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span>    at <span class="token number">0x4C31B0F</span><span class="token operator">:</span> <span class="token function">malloc</span> <span class="token punctuation">(</span>in <span class="token operator">/</span>usr<span class="token operator">/</span>lib<span class="token operator">/</span>valgrind<span class="token operator">/</span>vgpreload_memcheck<span class="token operator">-</span>amd64<span class="token operator">-</span>linux<span class="token punctuation">.</span>so<span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span>    by <span class="token number">0x1086EB</span><span class="token operator">:</span> <span class="token function">main</span> <span class="token punctuation">(</span>q6<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span> 
data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span> HEAP SUMMARY<span class="token operator">:</span>
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span>     in use at exit<span class="token operator">:</span> <span class="token number">0</span> bytes in <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span>   total heap usage<span class="token operator">:</span> <span class="token number">2</span> allocs<span class="token punctuation">,</span> <span class="token number">2</span> frees<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">124</span> bytes allocated
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span> All heap blocks were freed <span class="token operator">--</span> no leaks are possible
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span> For counts of detected and suppressed errors<span class="token punctuation">,</span> rerun with<span class="token operator">:</span> <span class="token operator">-</span>v
<span class="token operator">==</span><span class="token number">21293</span><span class="token operator">==</span> ERROR SUMMARY<span class="token operator">:</span> <span class="token number">1</span> errors from <span class="token number">1</span> <span class="token function">contexts</span> <span class="token punctuation">(</span>suppressed<span class="token operator">:</span> <span class="token number">0</span> from <span class="token number">0</span><span class="token punctuation">)</span></code></pre></div>
<h4 id="7-now-pass-a-funny-value-to-free-eg-a-pointer-in-the-middle-of-the-array-you-allocated-above" style="position:relative;"><a href="#7-now-pass-a-funny-value-to-free-eg-a-pointer-in-the-middle-of-the-array-you-allocated-above" aria-label="7 now pass a funny value to free eg a pointer in the middle of the array you allocated above permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>7. Now pass a funny value to free (e.g., a pointer in the middle of the array you allocated above).</h4>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span><span class="token operator">*</span> data <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">free</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>data<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>What happens? Do you need tools to find this type of problem?<br>
우선 해당 코드를 컴파일 후 실행할 시 아래 출력과 같이 <code class="language-text">free(): invalid pointer, Aborted (core dumped)</code> 오류가 출력된다. 해당 부분을 통해 free()함수에 잘못된 포인터가 전달되어서 오류가 발생함을 알 수 있다.</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ gcc <span class="token operator">-</span>g <span class="token operator">-</span>o q7 q7<span class="token punctuation">.</span>c
<span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ q7
<span class="token function">free</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> invalid pointer
<span class="token function">Aborted</span> <span class="token punctuation">(</span>core dumped<span class="token punctuation">)</span></code></pre></div>
<p>Valgrind를 실행시켜 보면 아래 같이 오류가 출력된다. Invalid free() / delete / delete[] / realloc() 라고 오류 이유를 알려주며, <code class="language-text">Address 0x522f05c is 28 bytes inside a block of size 100 alloc'd</code> 와 같이 free()하려고 한 주소 &#x26;data[7]가 총 100 사이즈의 블록 중 28 (4*7)에 해당하는 주소임을 알려준다. 또한 100 bytes in 1 blocks are definitely lost in loss record 1 of 1 로 해제되지 못한 메모리도 알려준다.</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ valgrind <span class="token operator">--</span>leak<span class="token operator">-</span>check<span class="token operator">=</span>yes q7
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> Memcheck<span class="token punctuation">,</span> a memory error detector
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> <span class="token function">Copyright</span> <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">2002</span><span class="token operator">-</span><span class="token number">2017</span><span class="token punctuation">,</span> and GNU GPL'd<span class="token punctuation">,</span> by Julian Seward et al<span class="token punctuation">.</span>
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> Using Valgrind<span class="token operator">-</span><span class="token number">3.13</span><span class="token number">.0</span> and LibVEX<span class="token punctuation">;</span> rerun with <span class="token operator">-</span>h <span class="token keyword">for</span> copyright info
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> Command<span class="token operator">:</span> q7
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> Invalid <span class="token function">free</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> delete <span class="token operator">/</span> delete<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token function">realloc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span>    at <span class="token number">0x4C32D3B</span><span class="token operator">:</span> <span class="token function">free</span> <span class="token punctuation">(</span>in <span class="token operator">/</span>usr<span class="token operator">/</span>lib<span class="token operator">/</span>valgrind<span class="token operator">/</span>vgpreload_memcheck<span class="token operator">-</span>amd64<span class="token operator">-</span>linux<span class="token punctuation">.</span>so<span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span>    by <span class="token number">0x1086AF</span><span class="token operator">:</span> <span class="token function">main</span> <span class="token punctuation">(</span>q7<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span>  Address <span class="token number">0x522f05c</span> is <span class="token number">28</span> bytes inside a block of size <span class="token number">100</span> alloc'd
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span>    at <span class="token number">0x4C31B0F</span><span class="token operator">:</span> <span class="token function">malloc</span> <span class="token punctuation">(</span>in <span class="token operator">/</span>usr<span class="token operator">/</span>lib<span class="token operator">/</span>valgrind<span class="token operator">/</span>vgpreload_memcheck<span class="token operator">-</span>amd64<span class="token operator">-</span>linux<span class="token punctuation">.</span>so<span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span>    by <span class="token number">0x10869B</span><span class="token operator">:</span> <span class="token function">main</span> <span class="token punctuation">(</span>q7<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> HEAP SUMMARY<span class="token operator">:</span>
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span>     in use at exit<span class="token operator">:</span> <span class="token number">100</span> bytes in <span class="token number">1</span> blocks
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span>   total heap usage<span class="token operator">:</span> <span class="token number">1</span> allocs<span class="token punctuation">,</span> <span class="token number">1</span> frees<span class="token punctuation">,</span> <span class="token number">100</span> bytes allocated
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> <span class="token number">100</span> bytes in <span class="token number">1</span> blocks are definitely lost in loss record <span class="token number">1</span> of <span class="token number">1</span>
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span>    at <span class="token number">0x4C31B0F</span><span class="token operator">:</span> <span class="token function">malloc</span> <span class="token punctuation">(</span>in <span class="token operator">/</span>usr<span class="token operator">/</span>lib<span class="token operator">/</span>valgrind<span class="token operator">/</span>vgpreload_memcheck<span class="token operator">-</span>amd64<span class="token operator">-</span>linux<span class="token punctuation">.</span>so<span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span>    by <span class="token number">0x10869B</span><span class="token operator">:</span> <span class="token function">main</span> <span class="token punctuation">(</span>q7<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> LEAK SUMMARY<span class="token operator">:</span>
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span>    definitely lost<span class="token operator">:</span> <span class="token number">100</span> bytes in <span class="token number">1</span> blocks
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span>    indirectly lost<span class="token operator">:</span> <span class="token number">0</span> bytes in <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span>      possibly lost<span class="token operator">:</span> <span class="token number">0</span> bytes in <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span>    still reachable<span class="token operator">:</span> <span class="token number">0</span> bytes in <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span>         suppressed<span class="token operator">:</span> <span class="token number">0</span> bytes in <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> For counts of detected and suppressed errors<span class="token punctuation">,</span> rerun with<span class="token operator">:</span> <span class="token operator">-</span>v
<span class="token operator">==</span><span class="token number">6234</span><span class="token operator">==</span> ERROR SUMMARY<span class="token operator">:</span> <span class="token number">2</span> errors from <span class="token number">2</span> <span class="token function">contexts</span> <span class="token punctuation">(</span>suppressed<span class="token operator">:</span> <span class="token number">0</span> from <span class="token number">0</span><span class="token punctuation">)</span></code></pre></div>
<h4 id="8-try-out-some-of-the-other-interfaces-to-memory-allocation-for-example-create-a-simple-vector-like-data-structure-and-related-routines-that-use-realloc-to-manage-the-vector-use-an-array-to-store-the-vectors-elements-when-a-user-adds-an-entry-to-the-vector-use-realloc-to-allocate-more-space-for-it" style="position:relative;"><a href="#8-try-out-some-of-the-other-interfaces-to-memory-allocation-for-example-create-a-simple-vector-like-data-structure-and-related-routines-that-use-realloc-to-manage-the-vector-use-an-array-to-store-the-vectors-elements-when-a-user-adds-an-entry-to-the-vector-use-realloc-to-allocate-more-space-for-it" aria-label="8 try out some of the other interfaces to memory allocation for example create a simple vector like data structure and related routines that use realloc to manage the vector use an array to store the vectors elements when a user adds an entry to the vector use realloc to allocate more space for it permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>8. Try out some of the other interfaces to memory allocation. For example, create a simple vector-like data structure and related routines that use realloc() to manage the vector. Use an array to store the vectors elements; when a user adds an entry to the vector, use realloc() to allocate more space for it.</h4>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span>

<span class="token keyword">struct</span> <span class="token class-name">my_vector</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> max_size<span class="token punctuation">;</span>
    <span class="token keyword">int</span> now_size<span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token operator">*</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">my_vector_show</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">my_vector</span><span class="token operator">*</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"now vector: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>v<span class="token operator">-></span>now_size<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span>v<span class="token operator">-></span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">my_vector_at</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">my_vector</span><span class="token operator">*</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token punctuation">(</span>v<span class="token operator">-></span>now_size<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> index<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"wrong index\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> v<span class="token operator">-></span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"vector at [%d] is: %d\n"</span><span class="token punctuation">,</span>index<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">my_vector_push_back</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">my_vector</span><span class="token operator">*</span> v<span class="token punctuation">,</span> <span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"push_back %d \n"</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token operator">-></span>now_size <span class="token operator">==</span> v<span class="token operator">-></span>max_size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"vector is full. make space by realloc ... \n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        v<span class="token operator">-></span>max_size <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> v<span class="token operator">-></span>now_size<span class="token punctuation">;</span>
        v<span class="token operator">-></span>data <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">realloc</span><span class="token punctuation">(</span>v<span class="token operator">-></span>data<span class="token punctuation">,</span> v<span class="token operator">-></span>max_size <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    v<span class="token operator">-></span>data<span class="token punctuation">[</span>v<span class="token operator">-></span>now_size<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
    v<span class="token operator">-></span>now_size <span class="token operator">=</span> v<span class="token operator">-></span>now_size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">my_vector_pop_back</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">my_vector</span><span class="token operator">*</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> v<span class="token operator">-></span>data<span class="token punctuation">[</span>v<span class="token operator">-></span>now_size<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    v<span class="token operator">-></span>data<span class="token punctuation">[</span>v<span class="token operator">-></span>now_size<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    v<span class="token operator">-></span>now_size <span class="token operator">=</span> v<span class="token operator">-></span>now_size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"pop_back %d \n"</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">my_vector_free</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">my_vector</span><span class="token operator">*</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"free vector!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    v<span class="token operator">-></span>max_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    v<span class="token operator">-></span>now_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">free</span><span class="token punctuation">(</span>v<span class="token operator">-></span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">struct</span> <span class="token class-name">my_vector</span> v <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">my_vector_push_back</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">my_vector_push_back</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">my_vector_show</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">my_vector_push_back</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">my_vector_push_back</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">my_vector_at</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>v<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">my_vector_pop_back</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">my_vector_pop_back</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">my_vector_show</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">my_vector_free</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">my_vector_show</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre></div>
<p>How well does such a vector perform?<br>
위의 코드에선 my_vector struct를 정의하고 해당하는 함수를 구현하였다. <code class="language-text">my_vector_show()</code>는 현재 벡터의 원소를 보여주며, <code class="language-text">my_vector_at()</code>은 특정 인덱스의 값을 리턴 한다.<code class="language-text">my_vector_push_back()</code>과 <code class="language-text">my_vector_pop_back()</code>은 각각 벡터의 맨 뒤에서 값을 넣고 삭제하는 역할을 한다. 마지막으로 my_vector_free()는 벡터의 메모리를 해제하는 역할을 한다.<br>
<code class="language-text">Main()</code> 함수에서는 최초의 벡터를 <code class="language-text">struct my_vector v = {2, 0, (int*)malloc(sizeof(int)*2)};</code> 과 같이 설정하고, 이어서 push, pop 등을 진행한다. 이때 기존의 size 2를 넘어설 경우 vector is full. make space by realloc … 문구와 함께 <code class="language-text">realloc()</code> 재할당이 되는 것을 확인 할 수 있다.</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ gcc <span class="token operator">-</span>g <span class="token operator">-</span>o q8 q8<span class="token punctuation">.</span>c
<span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ q8
push_back <span class="token number">1</span> 
push_back <span class="token number">2</span> 
now vector<span class="token operator">:</span> <span class="token number">1</span> <span class="token number">2</span> 
push_back <span class="token number">3</span> 
vector is full<span class="token punctuation">.</span> make space by realloc <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
push_back <span class="token number">4</span> 
vector at <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> is<span class="token operator">:</span> <span class="token number">1</span>
pop_back <span class="token number">4</span> 
pop_back <span class="token number">3</span> 
now vector<span class="token operator">:</span> <span class="token number">1</span> <span class="token number">2</span> 
free vector<span class="token operator">!</span>
now vector<span class="token operator">:</span></code></pre></div>
<p>How does it compare to a linked list?<br>
linked list에 비해 직접 만든vector가 가지는 장점은 기본적으로 배열을 활용하기 때문에 빠른 속도로 인덱스에 대한 값 접근이 가능하다는 점이다. 다만, 단점의 경우 linked list는 중간에 삽입을 할 때 새로운 node에 link를 할당해 주기만 하면 되지만, vector는 모든 값들을 하나씩 밀어야 하는 과정이 필요하여 상대적으로 속도가 느리다. 마지막으로 vector는 기존의 크기 재설정이 불가능했던 배열과 다르게linked list처럼 필요할 때 마다 그 크기를 늘릴 수 있다는 장점이 있다.</p>
<p>Use valgrind to help you find bugs.<br>
처음 코드를 작성했을 때는, 아래의 첫번째 valgrind 출력처럼 오류가 발생했다. 그 이유를 확인해보니 my_vector_pop_back() 함수에서 v->data[v->now_size] = 0; 코드에서 버그가 발생하였다. [now_size] 인덱스로 접근하면 실제 사용하는 크기보다 더 큰, 즉 realloc에서 할당하지 않은 부분까지 써버린다. 그래서 valgrind 오류가 발생했던 것이다. 이를 v->data[v->now_size-1] = 0; 로 고치고 나니 두번째 valgrind 출력처럼 오류문구가 출력되지 않았다.<br>
<br>
고치기 전:</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ valgrind <span class="token operator">--</span>leak<span class="token operator">-</span>check<span class="token operator">=</span>yes q8
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span> Memcheck<span class="token punctuation">,</span> a memory error detector
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span> <span class="token function">Copyright</span> <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">2002</span><span class="token operator">-</span><span class="token number">2017</span><span class="token punctuation">,</span> and GNU GPL'd<span class="token punctuation">,</span> by Julian Seward et al<span class="token punctuation">.</span>
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span> Using Valgrind<span class="token operator">-</span><span class="token number">3.13</span><span class="token number">.0</span> and LibVEX<span class="token punctuation">;</span> rerun with <span class="token operator">-</span>h <span class="token keyword">for</span> copyright info
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span> Command<span class="token operator">:</span> q8
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span> 
push_back <span class="token number">1</span> 
push_back <span class="token number">2</span> 
now vector<span class="token operator">:</span> <span class="token number">1</span> <span class="token number">2</span> 
push_back <span class="token number">3</span> 
vector is full<span class="token punctuation">.</span> make space by realloc <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
push_back <span class="token number">4</span> 
vector at <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> is<span class="token operator">:</span> <span class="token number">1</span>
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span> Invalid write of size <span class="token number">4</span>
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span>    at <span class="token number">0x1089EC</span><span class="token operator">:</span> <span class="token function">my_vector_pop_back</span> <span class="token punctuation">(</span>q8<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">43</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span>    by <span class="token number">0x108AFD</span><span class="token operator">:</span> <span class="token function">main</span> <span class="token punctuation">(</span>q8<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">65</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span>  Address <span class="token number">0x522f4e0</span> is <span class="token number">0</span> bytes after a block of size <span class="token number">16</span> alloc'd
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span>    at <span class="token number">0x4C33D2F</span><span class="token operator">:</span> <span class="token function">realloc</span> <span class="token punctuation">(</span>in <span class="token operator">/</span>usr<span class="token operator">/</span>lib<span class="token operator">/</span>valgrind<span class="token operator">/</span>vgpreload_memcheck<span class="token operator">-</span>amd64<span class="token operator">-</span>linux<span class="token punctuation">.</span>so<span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span>    by <span class="token number">0x10896A</span><span class="token operator">:</span> <span class="token function">my_vector_push_back</span> <span class="token punctuation">(</span>q8<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">35</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span>    by <span class="token number">0x108ACF</span><span class="token operator">:</span> <span class="token function">main</span> <span class="token punctuation">(</span>q8<span class="token punctuation">.</span>c<span class="token operator">:</span><span class="token number">62</span><span class="token punctuation">)</span>
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span> 
pop_back <span class="token number">4</span> 
pop_back <span class="token number">3</span> 
now vector<span class="token operator">:</span> <span class="token number">1</span> <span class="token number">2</span> 
free vector<span class="token operator">!</span>
now vector<span class="token operator">:</span> 
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span> HEAP SUMMARY<span class="token operator">:</span>
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span>     in use at exit<span class="token operator">:</span> <span class="token number">0</span> bytes in <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span>   total heap usage<span class="token operator">:</span> <span class="token number">3</span> allocs<span class="token punctuation">,</span> <span class="token number">3</span> frees<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">048</span> bytes allocated
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span> All heap blocks were freed <span class="token operator">--</span> no leaks are possible
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span> For counts of detected and suppressed errors<span class="token punctuation">,</span> rerun with<span class="token operator">:</span> <span class="token operator">-</span>v
<span class="token operator">==</span><span class="token number">22122</span><span class="token operator">==</span> ERROR SUMMARY<span class="token operator">:</span> <span class="token number">1</span> errors from <span class="token number">1</span> <span class="token function">contexts</span> <span class="token punctuation">(</span>suppressed<span class="token operator">:</span> <span class="token number">0</span> from <span class="token number">0</span><span class="token punctuation">)</span></code></pre></div>
<p>고친 후:</p>
<div class="gatsby-highlight" data-language="c"><pre class="language-c"><code class="language-c"><span class="token number">2019312219</span>@swji<span class="token operator">:</span><span class="token operator">~</span><span class="token operator">/</span>hw<span class="token operator">/</span><span class="token number">2</span>$ valgrind <span class="token operator">--</span>leak<span class="token operator">-</span>check<span class="token operator">=</span>yes q8
<span class="token operator">==</span><span class="token number">22318</span><span class="token operator">==</span> Memcheck<span class="token punctuation">,</span> a memory error detector
<span class="token operator">==</span><span class="token number">22318</span><span class="token operator">==</span> <span class="token function">Copyright</span> <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">2002</span><span class="token operator">-</span><span class="token number">2017</span><span class="token punctuation">,</span> and GNU GPL'd<span class="token punctuation">,</span> by Julian Seward et al<span class="token punctuation">.</span>
<span class="token operator">==</span><span class="token number">22318</span><span class="token operator">==</span> Using Valgrind<span class="token operator">-</span><span class="token number">3.13</span><span class="token number">.0</span> and LibVEX<span class="token punctuation">;</span> rerun with <span class="token operator">-</span>h <span class="token keyword">for</span> copyright info
<span class="token operator">==</span><span class="token number">22318</span><span class="token operator">==</span> Command<span class="token operator">:</span> q8
<span class="token operator">==</span><span class="token number">22318</span><span class="token operator">==</span> 
push_back <span class="token number">1</span> 
push_back <span class="token number">2</span> 
now vector<span class="token operator">:</span> <span class="token number">1</span> <span class="token number">2</span> 
push_back <span class="token number">3</span> 
vector is full<span class="token punctuation">.</span> make space by realloc <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
push_back <span class="token number">4</span> 
vector at <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> is<span class="token operator">:</span> <span class="token number">1</span>
pop_back <span class="token number">4</span> 
pop_back <span class="token number">3</span> 
now vector<span class="token operator">:</span> <span class="token number">1</span> <span class="token number">2</span> 
free vector<span class="token operator">!</span>
now vector<span class="token operator">:</span> 
<span class="token operator">==</span><span class="token number">22318</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">22318</span><span class="token operator">==</span> HEAP SUMMARY<span class="token operator">:</span>
<span class="token operator">==</span><span class="token number">22318</span><span class="token operator">==</span>     in use at exit<span class="token operator">:</span> <span class="token number">0</span> bytes in <span class="token number">0</span> blocks
<span class="token operator">==</span><span class="token number">22318</span><span class="token operator">==</span>   total heap usage<span class="token operator">:</span> <span class="token number">3</span> allocs<span class="token punctuation">,</span> <span class="token number">3</span> frees<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">048</span> bytes allocated
<span class="token operator">==</span><span class="token number">22318</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">22318</span><span class="token operator">==</span> All heap blocks were freed <span class="token operator">--</span> no leaks are possible
<span class="token operator">==</span><span class="token number">22318</span><span class="token operator">==</span> 
<span class="token operator">==</span><span class="token number">22318</span><span class="token operator">==</span> For counts of detected and suppressed errors<span class="token punctuation">,</span> rerun with<span class="token operator">:</span> <span class="token operator">-</span>v
<span class="token operator">==</span><span class="token number">22318</span><span class="token operator">==</span> ERROR SUMMARY<span class="token operator">:</span> <span class="token number">0</span> errors from <span class="token number">0</span> <span class="token function">contexts</span> <span class="token punctuation">(</span>suppressed<span class="token operator">:</span> <span class="token number">0</span> from <span class="token number">0</span><span class="token punctuation">)</span></code></pre></div>
<h4 id="9-spendmore-time-and-read-about-using-gdb-and-valgrind-knowing-your-tools-is-critical-spend-the-time-and-learn-how-to-become-an-expert-debugger-in-the-unix-and-c-environment" style="position:relative;"><a href="#9-spendmore-time-and-read-about-using-gdb-and-valgrind-knowing-your-tools-is-critical-spend-the-time-and-learn-how-to-become-an-expert-debugger-in-the-unix-and-c-environment" aria-label="9 spendmore time and read about using gdb and valgrind knowing your tools is critical spend the time and learn how to become an expert debugger in the unix and c environment permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>9. Spendmore time and read about using gdb and valgrind. Knowing your tools is critical; spend the time and learn how to become an expert debugger in the UNIX and C environment.</h4>
<p>앞선 문제를 통해 알 수 있듯이, 메모리 문제가 있는 코드일지라도 일반적인 실행을 통해서는 그 문제를 파악하기가 쉽지 않았다. 그러나 실행 시 나타나지 않는다고 이를 방치하면 나중에 메모리 누수와 같은 문제가 생기게 된다. 따라서 gdb, valgrind 같은 툴을 통해 자신의 프로그램에 대한 디버깅을 충분히 해나 갈수 있도록 노력이 필요함을 깨닫는 계기가 되었다.</p>
<h2 id="source" style="position:relative;"><a href="#source" aria-label="source permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Source</h2>
<ul>
<li>『Operating Systems: Three Easy Pieces』 <em>-Remzi H. Arpaci-Dusseau 지음</em><br>
<a href="https://pages.cs.wisc.edu/~remzi/OSTEP/" target="_blank" rel="nofollow">https://pages.cs.wisc.edu/~remzi/OSTEP/</a></li>
</ul></div><style data-emotion="css pit38s">.css-pit38s{height:auto;}</style><div class="css-pit38s etse75s1"><style data-emotion="css v7bn0g">.css-v7bn0g{position:-webkit-sticky;position:sticky;top:50px;display:inline-block;margin:120px 40px;margin-right:0px;height:auto;width:200px;font-size:14.5px;border-left:3px solid #4ccd97;}@media (max-width: 1200px){.css-v7bn0g{display:none;}}.css-v7bn0g li{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:5px;color:gray;}.css-v7bn0g ul{margin-left:10px;padding:7px 5px;list-style:none;}.css-v7bn0g a:hover{-webkit-transition:0.3s;transition:0.3s;font-size:15px;font-weight:700;color:#433E49;}</style><div class="css-v7bn0g etse75s0"><ul>
<li>
<p><a href="#%EB%AC%B8%EC%A0%9C-%EB%B0%8F-%ED%92%80%EC%9D%B4">문제 및 풀이</a></p>
<ul>
<li>
<ul>
<li><a href="#1-first-write-a-simple-program-called-nullc-that-creates-a-pointer-to-an-integer-sets-it-to-null-and-then-tries-to-dereference-it-compile-this-into-an-executable-called-null">1. First, write a simple program called null.c that creates a pointer to an integer, sets it to NULL, and then tries to dereference it. Compile this into an executable called null.</a></li>
<li><a href="#2-next-compile-this-program-with-symbol-information-included-with-the--g-flag-doing-so-lets-put-more-information-into-the-executable-enabling-the-debugger-to-access-more-useful-information-about-variable-names-and-the-like-run-the-program-under-the-debugger-by-typing-gdb-null-and-then-once-gdb-is-running-typing-run">2. Next, compile this program with symbol information included (with the -g flag). Doing so let’s put more information into the executable, enabling the debugger to access more useful information about variable names and the like. Run the program under the debugger by typing gdb null and then, once gdb is running, typing run.</a></li>
<li><a href="#3-finally-use-the-valgrind-tool-on-this-program-well-use-the-memcheck-tool-that-is-a-part-of-valgrind-to-analyze-what-happens-run-this-by-typing-in-the-following-valgrind---leak-checkyes-null">3. Finally, use the valgrind tool on this program. We’ll use the memcheck tool that is a part of valgrind to analyze what happens. Run this by typing in the following: valgrind –leak-check=yes null.</a></li>
<li><a href="#4-write-a-simple-program--that-allocates-memory-using-malloc-but-forgets-to-free-it-before-exiting">4. Write a simple program  that allocates memory using malloc() but forgets to free it before exiting.</a></li>
<li><a href="#5-write-a-program-that-creates-an-array-of-integers-called-data-of-size-100-using-malloc-then-set-data100-to-zero">5. Write a program that creates an array of integers called data of size 100 using malloc; then, set data[100] to zero.</a></li>
<li><a href="#6-create-a-program-that-allocates-an-array-of-integers-as-above-frees-them-and-then-tries-to-print-the-value-of-one-of-the-elements-of-the-array">6. Create a program that allocates an array of integers (as above), frees them, and then tries to print the value of one of the elements of the array.</a></li>
<li><a href="#7-now-pass-a-funny-value-to-free-eg-a-pointer-in-the-middle-of-the-array-you-allocated-above">7. Now pass a funny value to free (e.g., a pointer in the middle of the array you allocated above).</a></li>
<li><a href="#8-try-out-some-of-the-other-interfaces-to-memory-allocation-for-example-create-a-simple-vector-like-data-structure-and-related-routines-that-use-realloc-to-manage-the-vector-use-an-array-to-store-the-vectors-elements-when-a-user-adds-an-entry-to-the-vector-use-realloc-to-allocate-more-space-for-it">8. Try out some of the other interfaces to memory allocation. For example, create a simple vector-like data structure and related routines that use realloc() to manage the vector. Use an array to store the vectors elements; when a user adds an entry to the vector, use realloc() to allocate more space for it.</a></li>
<li><a href="#9-spendmore-time-and-read-about-using-gdb-and-valgrind-knowing-your-tools-is-critical-spend-the-time-and-learn-how-to-become-an-expert-debugger-in-the-unix-and-c-environment">9. Spendmore time and read about using gdb and valgrind. Knowing your tools is critical; spend the time and learn how to become an expert debugger in the UNIX and C environment.</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#source">Source</a></p>
</li>
</ul></div></div></div><style data-emotion="css qi68kj">.css-qi68kj{width:768px;margin:auto auto;padding:0 10px;}@media (max-width: 768px){.css-qi68kj{width:100%;padding:0 20px;}}</style><div class="css-qi68kj elyfc7a0"><div id="disqus_thread"></div></div><style data-emotion="css 9w9jmx">.css-9w9jmx{display:grid;place-items:center;margin-top:auto;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}@media (max-width: 768px){.css-9w9jmx{font-size:13px;}}</style><footer class="css-9w9jmx e1oae0v81"><style data-emotion="css chvw2h">.css-chvw2h{width:80px;height:80px;background-image:url('bartender.png');-webkit-background-size:contain;background-size:contain;margin:20px auto 0px auto;}</style><div class="css-chvw2h e1oae0v80"></div>Just an developer with drinks<br/>2022 HyeonDong, Powered By Gatsby.</footer></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/os_hw_2/";window.___webpackCompilationHash="d4f3858f9c007fc1e167";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c9fa82aa5b1f9c65f078.js"],"app":["/app-17512d3c7d8376891424.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-c686bcb9fd021576da4f.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-2d1a635f9e34aa3c993c.js"],"component---src-pages-post-tsx":["/component---src-pages-post-tsx-66acd32db55f17007543.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-676c0d609cc6ccc353e7.js"]};/*]]>*/</script><script src="/polyfill-c9fa82aa5b1f9c65f078.js" nomodule=""></script><script src="/app-17512d3c7d8376891424.js" async=""></script><script src="/framework-c57a9454c0e3bef16c3b.js" async=""></script><script src="/webpack-runtime-ee2c7898fe6f22c4cbd1.js" async=""></script></body></html>